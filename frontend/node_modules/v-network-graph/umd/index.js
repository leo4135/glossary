(function(A,r){typeof exports=="object"&&typeof module!="undefined"?r(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],r):(A=typeof globalThis!="undefined"?globalThis:A||self,r(A.VNetworkGraph={},A.Vue))})(this,function(A,r){"use strict";var jd=Object.defineProperty,Dd=Object.defineProperties;var Zd=Object.getOwnPropertyDescriptors;var Er=Object.getOwnPropertySymbols;var Rd=Object.prototype.hasOwnProperty,Vd=Object.prototype.propertyIsEnumerable;var X=Math.pow,kr=(A,r,G)=>r in A?jd(A,r,{enumerable:!0,configurable:!0,writable:!0,value:G}):A[r]=G,q=(A,r)=>{for(var G in r||(r={}))Rd.call(r,G)&&kr(A,G,r[G]);if(Er)for(var G of Er(r))Vd.call(r,G)&&kr(A,G,r[G]);return A},Je=(A,r)=>Dd(A,Zd(r));var re=(A,r,G)=>new Promise((ie,Z)=>{var et=se=>{try{ye(G.next(se))}catch(Ne){Z(Ne)}},St=se=>{try{ye(G.throw(se))}catch(Ne){Z(Ne)}},ye=se=>se.done?ie(se.value):Promise.resolve(se.value).then(et,St);ye((G=G.apply(A,r)).next())});const G=["paths","node-labels","nodes","focusring","edge-labels","edges","base","grid","background","root"];function ie(t){return r.isReactive(t)?t:r.reactive(t)}function Z(t,e="Parameter"){if(t==null)throw new Error(`${e} is null`);return t}const et=Symbol("containers");function St(t){r.provide(et,t)}function ye(){const t=Z(r.inject(et),"containers");return{container:t.container,svg:t.svg,viewport:t.viewport,svgPanZoom:t.svgPanZoom}}var se=typeof global=="object"&&global&&global.Object===Object&&global,Ne=typeof self=="object"&&self&&self.Object===Object&&self,ee=se||Ne||Function("return this")(),he=ee.Symbol,yn=Object.prototype,Sr=yn.hasOwnProperty,Pr=yn.toString,je=he?he.toStringTag:void 0;function xr(t){var e=Sr.call(t,je),n=t[je];try{t[je]=void 0;var o=!0}catch(s){}var i=Pr.call(t);return o&&(e?t[je]=n:delete t[je]),i}var Mr=Object.prototype,Cr=Mr.toString;function Tr(t){return Cr.call(t)}var Or="[object Null]",_r="[object Undefined]",wn=he?he.toStringTag:void 0;function we(t){return t==null?t===void 0?_r:Or:wn&&wn in Object(t)?xr(t):Tr(t)}function pe(t){return t!=null&&typeof t=="object"}var Br="[object Symbol]";function En(t){return typeof t=="symbol"||pe(t)&&we(t)==Br}function zr(t,e){for(var n=-1,o=t==null?0:t.length,i=Array(o);++n<o;)i[n]=e(t[n],n,t);return i}var Ee=Array.isArray,kn=he?he.prototype:void 0,Sn=kn?kn.toString:void 0;function Pn(t){if(typeof t=="string")return t;if(Ee(t))return zr(t,Pn)+"";if(En(t))return Sn?Sn.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var Ir=/\s/;function $r(t){for(var e=t.length;e--&&Ir.test(t.charAt(e)););return e}var Ar=/^\s+/;function Lr(t){return t&&t.slice(0,$r(t)+1).replace(Ar,"")}function ae(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var xn=NaN,Nr=/^[-+]0x[0-9a-f]+$/i,jr=/^0b[01]+$/i,Dr=/^0o[0-7]+$/i,Zr=parseInt;function tt(t){if(typeof t=="number")return t;if(En(t))return xn;if(ae(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=ae(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Lr(t);var n=jr.test(t);return n||Dr.test(t)?Zr(t.slice(2),n?2:8):Nr.test(t)?xn:+t}var Rr=1/0,Vr=17976931348623157e292;function Hr(t){if(!t)return t===0?t:0;if(t=tt(t),t===Rr||t===-1/0){var e=t<0?-1:1;return e*Vr}return t===t?t:0}function Mn(t){var e=Hr(t),n=e%1;return e===e?n?e-n:e:0}function Cn(t){return t}var Fr="[object AsyncFunction]",Wr="[object Function]",Ur="[object GeneratorFunction]",Gr="[object Proxy]";function Pt(t){if(!ae(t))return!1;var e=we(t);return e==Wr||e==Ur||e==Fr||e==Gr}var xt=ee["__core-js_shared__"],Tn=function(){var t=/[^.]+$/.exec(xt&&xt.keys&&xt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function qr(t){return!!Tn&&Tn in t}var Xr=Function.prototype,Kr=Xr.toString;function ke(t){if(t!=null){try{return Kr.call(t)}catch(e){}try{return t+""}catch(e){}}return""}var Yr=/[\\^$.*+?()[\]{}|]/g,Qr=/^\[object .+?Constructor\]$/,Jr=Function.prototype,ei=Object.prototype,ti=Jr.toString,ni=ei.hasOwnProperty,oi=RegExp("^"+ti.call(ni).replace(Yr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ri(t){if(!ae(t)||qr(t))return!1;var e=Pt(t)?oi:Qr;return e.test(ke(t))}function ii(t,e){return t==null?void 0:t[e]}function Se(t,e){var n=ii(t,e);return ri(n)?n:void 0}var Mt=Se(ee,"WeakMap"),On=Object.create,si=function(){function t(){}return function(e){if(!ae(e))return{};if(On)return On(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function ai(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function li(){}function ci(t,e){var n=-1,o=t.length;for(e||(e=Array(o));++n<o;)e[n]=t[n];return e}var ui=800,di=16,fi=Date.now;function hi(t){var e=0,n=0;return function(){var o=fi(),i=di-(o-n);if(n=o,i>0){if(++e>=ui)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function pi(t){return function(){return t}}var nt=function(){try{var t=Se(Object,"defineProperty");return t({},"",{}),t}catch(e){}}(),gi=nt?function(t,e){return nt(t,"toString",{configurable:!0,enumerable:!1,value:pi(e),writable:!0})}:Cn,mi=hi(gi);function vi(t,e,n,o){for(var i=t.length,s=n+-1;++s<i;)if(e(t[s],s,t))return s;return-1}function bi(t){return t!==t}function yi(t,e,n){for(var o=n-1,i=t.length;++o<i;)if(t[o]===e)return o;return-1}function wi(t,e,n){return e===e?yi(t,e,n):vi(t,bi,n)}function Ei(t,e){var n=t==null?0:t.length;return!!n&&wi(t,e,0)>-1}var ki=9007199254740991,Si=/^(?:0|[1-9]\d*)$/;function _n(t,e){var n=typeof t;return e=e==null?ki:e,!!e&&(n=="number"||n!="symbol"&&Si.test(t))&&t>-1&&t%1==0&&t<e}function Ct(t,e,n){e=="__proto__"&&nt?nt(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function De(t,e){return t===e||t!==t&&e!==e}var Pi=Object.prototype,xi=Pi.hasOwnProperty;function Mi(t,e,n){var o=t[e];(!(xi.call(t,e)&&De(o,n))||n===void 0&&!(e in t))&&Ct(t,e,n)}function Ci(t,e,n,o){var i=!n;n||(n={});for(var s=-1,l=e.length;++s<l;){var u=e[s],d=void 0;d===void 0&&(d=t[u]),i?Ct(n,u,d):Mi(n,u,d)}return n}var Bn=Math.max;function Ti(t,e,n){return e=Bn(e===void 0?t.length-1:e,0),function(){for(var o=arguments,i=-1,s=Bn(o.length-e,0),l=Array(s);++i<s;)l[i]=o[e+i];i=-1;for(var u=Array(e+1);++i<e;)u[i]=o[i];return u[e]=n(l),ai(t,this,u)}}function Oi(t,e){return mi(Ti(t,e,Cn),t+"")}var _i=9007199254740991;function zn(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=_i}function ot(t){return t!=null&&zn(t.length)&&!Pt(t)}function Bi(t,e,n){if(!ae(n))return!1;var o=typeof e;return(o=="number"?ot(n)&&_n(e,n.length):o=="string"&&e in n)?De(n[e],t):!1}function In(t){return Oi(function(e,n){var o=-1,i=n.length,s=i>1?n[i-1]:void 0,l=i>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,l&&Bi(n[0],n[1],l)&&(s=i<3?void 0:s,i=1),e=Object(e);++o<i;){var u=n[o];u&&t(e,u,o,s)}return e})}var zi=Object.prototype;function Tt(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||zi;return t===n}function Ii(t,e){for(var n=-1,o=Array(t);++n<t;)o[n]=e(n);return o}var $i="[object Arguments]";function $n(t){return pe(t)&&we(t)==$i}var An=Object.prototype,Ai=An.hasOwnProperty,Li=An.propertyIsEnumerable,Ot=$n(function(){return arguments}())?$n:function(t){return pe(t)&&Ai.call(t,"callee")&&!Li.call(t,"callee")};function Ni(){return!1}var Ln=typeof A=="object"&&A&&!A.nodeType&&A,Nn=Ln&&typeof module=="object"&&module&&!module.nodeType&&module,ji=Nn&&Nn.exports===Ln,jn=ji?ee.Buffer:void 0,Di=jn?jn.isBuffer:void 0,rt=Di||Ni,Zi="[object Arguments]",Ri="[object Array]",Vi="[object Boolean]",Hi="[object Date]",Fi="[object Error]",Wi="[object Function]",Ui="[object Map]",Gi="[object Number]",qi="[object Object]",Xi="[object RegExp]",Ki="[object Set]",Yi="[object String]",Qi="[object WeakMap]",Ji="[object ArrayBuffer]",es="[object DataView]",ts="[object Float32Array]",ns="[object Float64Array]",os="[object Int8Array]",rs="[object Int16Array]",is="[object Int32Array]",ss="[object Uint8Array]",as="[object Uint8ClampedArray]",ls="[object Uint16Array]",cs="[object Uint32Array]",H={};H[ts]=H[ns]=H[os]=H[rs]=H[is]=H[ss]=H[as]=H[ls]=H[cs]=!0,H[Zi]=H[Ri]=H[Ji]=H[Vi]=H[es]=H[Hi]=H[Fi]=H[Wi]=H[Ui]=H[Gi]=H[qi]=H[Xi]=H[Ki]=H[Yi]=H[Qi]=!1;function us(t){return pe(t)&&zn(t.length)&&!!H[we(t)]}function ds(t){return function(e){return t(e)}}var Dn=typeof A=="object"&&A&&!A.nodeType&&A,Ze=Dn&&typeof module=="object"&&module&&!module.nodeType&&module,fs=Ze&&Ze.exports===Dn,_t=fs&&se.process,Zn=function(){try{var t=Ze&&Ze.require&&Ze.require("util").types;return t||_t&&_t.binding&&_t.binding("util")}catch(e){}}(),Rn=Zn&&Zn.isTypedArray,Bt=Rn?ds(Rn):us,hs=Object.prototype,ps=hs.hasOwnProperty;function Vn(t,e){var n=Ee(t),o=!n&&Ot(t),i=!n&&!o&&rt(t),s=!n&&!o&&!i&&Bt(t),l=n||o||i||s,u=l?Ii(t.length,String):[],d=u.length;for(var p in t)(e||ps.call(t,p))&&!(l&&(p=="length"||i&&(p=="offset"||p=="parent")||s&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||_n(p,d)))&&u.push(p);return u}function Hn(t,e){return function(n){return t(e(n))}}var gs=Hn(Object.keys,Object),ms=Object.prototype,vs=ms.hasOwnProperty;function bs(t){if(!Tt(t))return gs(t);var e=[];for(var n in Object(t))vs.call(t,n)&&n!="constructor"&&e.push(n);return e}function ys(t){return ot(t)?Vn(t):bs(t)}function ws(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var Es=Object.prototype,ks=Es.hasOwnProperty;function Ss(t){if(!ae(t))return ws(t);var e=Tt(t),n=[];for(var o in t)o=="constructor"&&(e||!ks.call(t,o))||n.push(o);return n}function Fn(t){return ot(t)?Vn(t,!0):Ss(t)}var Re=Se(Object,"create");function Ps(){this.__data__=Re?Re(null):{},this.size=0}function xs(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Ms="__lodash_hash_undefined__",Cs=Object.prototype,Ts=Cs.hasOwnProperty;function Os(t){var e=this.__data__;if(Re){var n=e[t];return n===Ms?void 0:n}return Ts.call(e,t)?e[t]:void 0}var _s=Object.prototype,Bs=_s.hasOwnProperty;function zs(t){var e=this.__data__;return Re?e[t]!==void 0:Bs.call(e,t)}var Is="__lodash_hash_undefined__";function $s(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Re&&e===void 0?Is:e,this}function Pe(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}Pe.prototype.clear=Ps,Pe.prototype.delete=xs,Pe.prototype.get=Os,Pe.prototype.has=zs,Pe.prototype.set=$s;function As(){this.__data__=[],this.size=0}function it(t,e){for(var n=t.length;n--;)if(De(t[n][0],e))return n;return-1}var Ls=Array.prototype,Ns=Ls.splice;function js(t){var e=this.__data__,n=it(e,t);if(n<0)return!1;var o=e.length-1;return n==o?e.pop():Ns.call(e,n,1),--this.size,!0}function Ds(t){var e=this.__data__,n=it(e,t);return n<0?void 0:e[n][1]}function Zs(t){return it(this.__data__,t)>-1}function Rs(t,e){var n=this.__data__,o=it(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this}function ce(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}ce.prototype.clear=As,ce.prototype.delete=js,ce.prototype.get=Ds,ce.prototype.has=Zs,ce.prototype.set=Rs;var Ve=Se(ee,"Map");function Vs(){this.size=0,this.__data__={hash:new Pe,map:new(Ve||ce),string:new Pe}}function Hs(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function st(t,e){var n=t.__data__;return Hs(e)?n[typeof e=="string"?"string":"hash"]:n.map}function Fs(t){var e=st(this,t).delete(t);return this.size-=e?1:0,e}function Ws(t){return st(this,t).get(t)}function Us(t){return st(this,t).has(t)}function Gs(t,e){var n=st(this,t),o=n.size;return n.set(t,e),this.size+=n.size==o?0:1,this}function xe(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}xe.prototype.clear=Vs,xe.prototype.delete=Fs,xe.prototype.get=Ws,xe.prototype.has=Us,xe.prototype.set=Gs;function Wn(t){return t==null?"":Pn(t)}function qs(t,e){for(var n=-1,o=e.length,i=t.length;++n<o;)t[i+n]=e[n];return t}var Un=Hn(Object.getPrototypeOf,Object),Xs="[object Object]",Ks=Function.prototype,Ys=Object.prototype,Gn=Ks.toString,Qs=Ys.hasOwnProperty,Js=Gn.call(Object);function qn(t){if(!pe(t)||we(t)!=Xs)return!1;var e=Un(t);if(e===null)return!0;var n=Qs.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Gn.call(n)==Js}function ea(t,e,n){var o=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(i);++o<i;)s[o]=t[o+e];return s}var ta=ee.isFinite,na=Math.min;function oa(t){var e=Math[t];return function(n,o){if(n=tt(n),o=o==null?0:na(Mn(o),292),o&&ta(n)){var i=(Wn(n)+"e").split("e"),s=e(i[0]+"e"+(+i[1]+o));return i=(Wn(s)+"e").split("e"),+(i[0]+"e"+(+i[1]-o))}return e(n)}}var ra=Math.ceil,ia=Math.max;function zt(t,e,n){e===void 0?e=1:e=ia(Mn(e),0);var o=t==null?0:t.length;if(!o||e<1)return[];for(var i=0,s=0,l=Array(ra(o/e));i<o;)l[s++]=ea(t,i,i+=e);return l}function sa(){this.__data__=new ce,this.size=0}function aa(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function la(t){return this.__data__.get(t)}function ca(t){return this.__data__.has(t)}var ua=200;function da(t,e){var n=this.__data__;if(n instanceof ce){var o=n.__data__;if(!Ve||o.length<ua-1)return o.push([t,e]),this.size=++n.size,this;n=this.__data__=new xe(o)}return n.set(t,e),this.size=n.size,this}function ue(t){var e=this.__data__=new ce(t);this.size=e.size}ue.prototype.clear=sa,ue.prototype.delete=aa,ue.prototype.get=la,ue.prototype.has=ca,ue.prototype.set=da;var Xn=typeof A=="object"&&A&&!A.nodeType&&A,Kn=Xn&&typeof module=="object"&&module&&!module.nodeType&&module,fa=Kn&&Kn.exports===Xn,Yn=fa?ee.Buffer:void 0;Yn&&Yn.allocUnsafe;function ha(t,e){return t.slice()}function pa(t,e){for(var n=-1,o=t==null?0:t.length,i=0,s=[];++n<o;){var l=t[n];e(l,n,t)&&(s[i++]=l)}return s}function ga(){return[]}var ma=Object.prototype,va=ma.propertyIsEnumerable,Qn=Object.getOwnPropertySymbols,ba=Qn?function(t){return t==null?[]:(t=Object(t),pa(Qn(t),function(e){return va.call(t,e)}))}:ga;function ya(t,e,n){var o=e(t);return Ee(t)?o:qs(o,n(t))}function Jn(t){return ya(t,ys,ba)}var It=Se(ee,"DataView"),$t=Se(ee,"Promise"),_e=Se(ee,"Set"),eo="[object Map]",wa="[object Object]",to="[object Promise]",no="[object Set]",oo="[object WeakMap]",ro="[object DataView]",Ea=ke(It),ka=ke(Ve),Sa=ke($t),Pa=ke(_e),xa=ke(Mt),ge=we;(It&&ge(new It(new ArrayBuffer(1)))!=ro||Ve&&ge(new Ve)!=eo||$t&&ge($t.resolve())!=to||_e&&ge(new _e)!=no||Mt&&ge(new Mt)!=oo)&&(ge=function(t){var e=we(t),n=e==wa?t.constructor:void 0,o=n?ke(n):"";if(o)switch(o){case Ea:return ro;case ka:return eo;case Sa:return to;case Pa:return no;case xa:return oo}return e});var at=ee.Uint8Array;function Ma(t){var e=new t.constructor(t.byteLength);return new at(e).set(new at(t)),e}function Ca(t,e){var n=Ma(t.buffer);return new t.constructor(n,t.byteOffset,t.length)}function Ta(t){return typeof t.constructor=="function"&&!Tt(t)?si(Un(t)):{}}var Oa="__lodash_hash_undefined__";function _a(t){return this.__data__.set(t,Oa),this}function Ba(t){return this.__data__.has(t)}function He(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new xe;++e<n;)this.add(t[e])}He.prototype.add=He.prototype.push=_a,He.prototype.has=Ba;function za(t,e){for(var n=-1,o=t==null?0:t.length;++n<o;)if(e(t[n],n,t))return!0;return!1}function io(t,e){return t.has(e)}var Ia=1,$a=2;function so(t,e,n,o,i,s){var l=n&Ia,u=t.length,d=e.length;if(u!=d&&!(l&&d>u))return!1;var p=s.get(t),f=s.get(e);if(p&&f)return p==e&&f==t;var a=-1,c=!0,h=n&$a?new He:void 0;for(s.set(t,e),s.set(e,t);++a<u;){var y=t[a],k=e[a];if(o)var v=l?o(k,y,a,e,t,s):o(y,k,a,t,e,s);if(v!==void 0){if(v)continue;c=!1;break}if(h){if(!za(e,function(m,E){if(!io(h,E)&&(y===m||i(y,m,n,o,s)))return h.push(E)})){c=!1;break}}else if(!(y===k||i(y,k,n,o,s))){c=!1;break}}return s.delete(t),s.delete(e),c}function Aa(t){var e=-1,n=Array(t.size);return t.forEach(function(o,i){n[++e]=[i,o]}),n}function At(t){var e=-1,n=Array(t.size);return t.forEach(function(o){n[++e]=o}),n}var La=1,Na=2,ja="[object Boolean]",Da="[object Date]",Za="[object Error]",Ra="[object Map]",Va="[object Number]",Ha="[object RegExp]",Fa="[object Set]",Wa="[object String]",Ua="[object Symbol]",Ga="[object ArrayBuffer]",qa="[object DataView]",ao=he?he.prototype:void 0,Lt=ao?ao.valueOf:void 0;function Xa(t,e,n,o,i,s,l){switch(n){case qa:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Ga:return!(t.byteLength!=e.byteLength||!s(new at(t),new at(e)));case ja:case Da:case Va:return De(+t,+e);case Za:return t.name==e.name&&t.message==e.message;case Ha:case Wa:return t==e+"";case Ra:var u=Aa;case Fa:var d=o&La;if(u||(u=At),t.size!=e.size&&!d)return!1;var p=l.get(t);if(p)return p==e;o|=Na,l.set(t,e);var f=so(u(t),u(e),o,i,s,l);return l.delete(t),f;case Ua:if(Lt)return Lt.call(t)==Lt.call(e)}return!1}var Ka=1,Ya=Object.prototype,Qa=Ya.hasOwnProperty;function Ja(t,e,n,o,i,s){var l=n&Ka,u=Jn(t),d=u.length,p=Jn(e),f=p.length;if(d!=f&&!l)return!1;for(var a=d;a--;){var c=u[a];if(!(l?c in e:Qa.call(e,c)))return!1}var h=s.get(t),y=s.get(e);if(h&&y)return h==e&&y==t;var k=!0;s.set(t,e),s.set(e,t);for(var v=l;++a<d;){c=u[a];var m=t[c],E=e[c];if(o)var S=l?o(E,m,c,e,t,s):o(m,E,c,t,e,s);if(!(S===void 0?m===E||i(m,E,n,o,s):S)){k=!1;break}v||(v=c=="constructor")}if(k&&!v){var b=t.constructor,g=e.constructor;b!=g&&"constructor"in t&&"constructor"in e&&!(typeof b=="function"&&b instanceof b&&typeof g=="function"&&g instanceof g)&&(k=!1)}return s.delete(t),s.delete(e),k}var el=1,lo="[object Arguments]",co="[object Array]",lt="[object Object]",tl=Object.prototype,uo=tl.hasOwnProperty;function nl(t,e,n,o,i,s){var l=Ee(t),u=Ee(e),d=l?co:ge(t),p=u?co:ge(e);d=d==lo?lt:d,p=p==lo?lt:p;var f=d==lt,a=p==lt,c=d==p;if(c&&rt(t)){if(!rt(e))return!1;l=!0,f=!1}if(c&&!f)return s||(s=new ue),l||Bt(t)?so(t,e,n,o,i,s):Xa(t,e,d,n,o,i,s);if(!(n&el)){var h=f&&uo.call(t,"__wrapped__"),y=a&&uo.call(e,"__wrapped__");if(h||y){var k=h?t.value():t,v=y?e.value():e;return s||(s=new ue),i(k,v,n,o,s)}}return c?(s||(s=new ue),Ja(t,e,n,o,i,s)):!1}function fo(t,e,n,o,i){return t===e?!0:t==null||e==null||!pe(t)&&!pe(e)?t!==t&&e!==e:nl(t,e,n,o,fo,i)}function ol(t){return function(e,n,o){for(var i=-1,s=Object(e),l=o(e),u=l.length;u--;){var d=l[++i];if(n(s[d],d,s)===!1)break}return e}}var rl=ol(),Nt=function(){return ee.Date.now()},il="Expected a function",sl=Math.max,al=Math.min;function ll(t,e,n){var o,i,s,l,u,d,p=0,f=!1,a=!1,c=!0;if(typeof t!="function")throw new TypeError(il);e=tt(e)||0,ae(n)&&(f=!!n.leading,a="maxWait"in n,s=a?sl(tt(n.maxWait)||0,e):s,c="trailing"in n?!!n.trailing:c);function h(w){var P=o,M=i;return o=i=void 0,p=w,l=t.apply(M,P),l}function y(w){return p=w,u=setTimeout(m,e),f?h(w):l}function k(w){var P=w-d,M=w-p,_=e-P;return a?al(_,s-M):_}function v(w){var P=w-d,M=w-p;return d===void 0||P>=e||P<0||a&&M>=s}function m(){var w=Nt();if(v(w))return E(w);u=setTimeout(m,k(w))}function E(w){return u=void 0,c&&o?h(w):(o=i=void 0,l)}function S(){u!==void 0&&clearTimeout(u),p=0,o=d=i=u=void 0}function b(){return u===void 0?l:E(Nt())}function g(){var w=Nt(),P=v(w);if(o=arguments,i=this,d=w,P){if(u===void 0)return y(d);if(a)return clearTimeout(u),u=setTimeout(m,e),h(d)}return u===void 0&&(u=setTimeout(m,e)),l}return g.cancel=S,g.flush=b,g}function jt(t,e,n){(n!==void 0&&!De(t[e],n)||n===void 0&&!(e in t))&&Ct(t,e,n)}function cl(t){return pe(t)&&ot(t)}function Dt(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function ul(t){return Ci(t,Fn(t))}function dl(t,e,n,o,i,s,l){var u=Dt(t,n),d=Dt(e,n),p=l.get(d);if(p){jt(t,n,p);return}var f=s?s(u,d,n+"",t,e,l):void 0,a=f===void 0;if(a){var c=Ee(d),h=!c&&rt(d),y=!c&&!h&&Bt(d);f=d,c||h||y?Ee(u)?f=u:cl(u)?f=ci(u):h?(a=!1,f=ha(d)):y?(a=!1,f=Ca(d)):f=[]:qn(d)||Ot(d)?(f=u,Ot(u)?f=ul(u):(!ae(u)||Pt(u))&&(f=Ta(d))):a=!1}a&&(l.set(d,f),i(f,d,o,s,l),l.delete(d)),jt(t,n,f)}function Zt(t,e,n,o,i){t!==e&&rl(e,function(s,l){if(i||(i=new ue),ae(s))dl(t,e,l,n,Zt,o,i);else{var u=o?o(Dt(t,l),s,l+"",t,e,i):void 0;u===void 0&&(u=s),jt(t,l,u)}},Fn)}var fl=In(function(t,e,n,o){Zt(t,e,n,o)});function me(t,e){return fo(t,e)}var ho=In(function(t,e,n){Zt(t,e,n)}),po=oa("round"),hl=1/0,pl=_e&&1/At(new _e([,-0]))[1]==hl?function(t){return new _e(t)}:li,gl=200;function ml(t,e,n){var o=-1,i=Ei,s=t.length,l=!0,u=[],d=u;if(s>=gl){var p=pl(t);if(p)return At(p);l=!1,i=io,d=new He}else d=u;e:for(;++o<s;){var f=t[o],a=f;if(f=f!==0?f:0,l&&a===a){for(var c=d.length;c--;)if(d[c]===a)continue e;u.push(f)}else i(d,a,n)||(d!==u&&d.push(a),u.push(f))}return u}function vl(t){return t&&t.length?ml(t):[]}class O{static value(e,n){return e instanceof Function?e(n):e}static values(e,n){return Object.values(e).filter(o=>o instanceof Function).length===0?e:Object.fromEntries(Object.entries(e).map(([o,i])=>[o,i instanceof Function?i(n):i]))}}var I=(t=>(t.CENTER="center",t.NORTH="north",t.NORTH_EAST="north-east",t.EAST="east",t.SOUTH_EAST="south-east",t.SOUTH="south",t.SOUTH_WEST="south-west",t.WEST="west",t.NORTH_WEST="north-west",t))(I||{});function ct(t){const e={};return Object.assign(e,t(e))}function bl(t){return t}function yl(t){return t}function go(t,e,n){const o=O.values(e.normal,t);return o.type=="circle"?{width:o.radius*2*n,height:o.radius*2*n}:{width:o.width*n,height:o.height*n}}function wl(t,e,n,o){const s=Math.abs(t.x-n.x)<e.width/2+o.width/2,u=Math.abs(t.y-n.y)<e.height/2+o.height/2;return s&&u}function Fe(t,e){let n=0;return e===1||t===void 0||t==="none"?n=t!=null?t:0:typeof t=="string"?n=t.split(/\s+/).map(o=>parseInt(o)*e).filter(o=>!isNaN(o)).join(" "):n=t*e,n&&n!=="0"?n:void 0}function ut(t){let e=0;if(t===void 0||t==="none")e=0;else if(typeof t=="string"){const n=t.split(/\s+/).map(o=>parseInt(o)).filter(o=>!isNaN(o));n.length%2===0?e=n.reduce((o,i)=>o+i,0):e=n.reduce((o,i)=>o+i,0)*2}else e=t*2;return e}const mo=20;class Rt{activate(e){const{nodePositions:n,nodes:o,configs:i,emitter:s,scale:l,svgPanZoom:u}=e,d=a=>{for(const[c,h]of Object.entries(a)){const y=this.getOrCreateNodePosition(n,c);this.setNodePosition(y,h)}},p=a=>{const c=a.filter(k=>!(k in n.value)),h=u.getViewArea(),y=l.value;for(const k of c){const v=o.value[k],m=go(v,i.node,y),E=q({},h.center);for(;;){let b=!1;for(const[g,w]of Object.entries(n.value)){if(k===g)continue;const P=o.value[g];if(!P)continue;const M=go(P,i.node,y);if(b=wl(E,m,w,M),b)break}if(b)E.x+=m.width+mo*y,E.x+m.width/2>h.box.right&&(E.x=h.center.x,E.y+=m.height+mo*y);else break}const S=this.getOrCreateNodePosition(n,k);this.setNodePosition(S,E)}};p(Object.keys(o.value));const f=r.watch(()=>me(new Set(Object.keys(o.value)),new Set(Object.keys(n.value))),a=>{a||p(Object.keys(o.value))});s.on("node:dragstart",d),s.on("node:pointermove",d),s.on("node:dragend",d),this.onDeactivate=()=>{f(),s.off("node:dragstart",d),s.off("node:pointermove",d),s.off("node:dragend",d)}}deactivate(){this.onDeactivate&&this.onDeactivate()}setNodePosition(e,n){e.value.x=po(n.x,3),e.value.y=po(n.y,3)}getOrCreateNodePosition(e,n){const o=r.toRef(e.value,n);return o.value||(o.value={x:0,y:0}),o}}function vo(){return{view:{scalingObjects:!1,panEnabled:!0,zoomEnabled:!0,minZoomLevel:.1,maxZoomLevel:64,doubleClickZoomEnabled:!0,mouseWheelZoomEnabled:!0,boxSelectionEnabled:!1,autoPanAndZoomOnLoad:"center-content",fitContentMargin:"8%",autoPanOnResize:!0,layoutHandler:new Rt,onSvgPanZoomInitialized:void 0,grid:{visible:!1,interval:10,thickIncrements:5,line:{color:"#e0e0e0",width:1,dasharray:1},thick:{color:"#cccccc",width:1,dasharray:0}},selection:{box:{color:"#0000ff20",strokeWidth:1,strokeColor:"#aaaaff",strokeDasharray:0},detector:t=>{const e=/Mac OS/.test(navigator.userAgent)?t.metaKey:t.ctrlKey;return t.type==="keydown"?e:!e}},builtInLayerOrder:[],onBeforeInitialDisplay:void 0},node:ct(t=>({normal:{type:"circle",radius:16,width:32,height:32,borderRadius:4,color:"#4466cc",strokeWidth:0,strokeColor:"#000000",strokeDasharray:0},hover:{type:e=>O.value(t.normal.type,e),radius:e=>{var n;return((n=O.value(t.normal.radius,e))!=null?n:0)+2},width:e=>{var n;return((n=O.value(t.normal.width,e))!=null?n:0)+2},height:e=>{var n;return((n=O.value(t.normal.height,e))!=null?n:0)+2},borderRadius:e=>{var n;return(n=O.value(t.normal.borderRadius,e))!=null?n:0},strokeWidth:e=>O.value(t.normal.strokeWidth,e),strokeColor:e=>O.value(t.normal.strokeColor,e),strokeDasharray:e=>O.value(t.normal.strokeDasharray,e),color:"#3355bb"},selected:void 0,draggable:!0,selectable:!1,label:{visible:!0,fontFamily:void 0,fontSize:11,lineHeight:1.1,color:"#000000",background:void 0,margin:4,direction:I.SOUTH,directionAutoAdjustment:!1,text:"name",handleNodeEvents:!0},focusring:{visible:!0,width:4,padding:3,color:"#eebb00"},zOrder:{enabled:!1,zIndex:0,bringToFrontOnHover:!0,bringToFrontOnSelected:!0},transition:void 0})),edge:ct(t=>({normal:{width:2,color:"#4466cc",dasharray:0,linecap:"butt",animate:!1,animationSpeed:50},hover:{width:e=>O.value(t.normal.width,e)+1,color:"#3355bb",dasharray:e=>O.value(t.normal.dasharray,e),linecap:e=>O.value(t.normal.linecap,e),animate:e=>O.value(t.normal.animate,e),animationSpeed:e=>O.value(t.normal.animationSpeed,e)},selected:{width:e=>O.value(t.normal.width,e)+1,color:"#dd8800",dasharray:e=>{const n=O.value(t.normal.width,e);return`${n*1.5} ${n*2}`},linecap:e=>O.value(t.normal.linecap,e),animate:e=>O.value(t.normal.animate,e),animationSpeed:e=>O.value(t.normal.animationSpeed,e)},selectable:!1,gap:3,type:"straight",marker:{source:{type:"none",width:5,height:5,margin:-1,offset:0,units:"strokeWidth",color:null},target:{type:"none",width:5,height:5,margin:-1,offset:0,units:"strokeWidth",color:null}},margin:null,summarize:(e,n)=>n.edge.type=="curve"?!1:null,summarized:{label:{fontSize:10,lineHeight:1,color:"#4466cc"},shape:{type:"rect",radius:6,width:12,height:12,borderRadius:3,color:"#ffffff",strokeWidth:1,strokeColor:"#4466cc",strokeDasharray:void 0},stroke:{width:5,color:"#4466cc",dasharray:void 0,linecap:void 0,animate:!1,animationSpeed:50}},selfLoop:{radius:12,isClockwise:!0,offset:10,angle:270},keepOrder:"clock",label:{fontFamily:void 0,fontSize:11,lineHeight:1.1,color:"#000000",background:void 0,margin:4,padding:4},zOrder:{enabled:!1,zIndex:0,bringToFrontOnHover:!0,bringToFrontOnSelected:!0}})),path:ct(t=>({visible:!1,clickable:!1,hoverable:!1,curveInNode:!1,end:"centerOfNode",margin:0,path:r.reactive({width:6,color:e=>{const n=["#d5000088","#c5116288","#aa00ff88","#6200ea88","#304ffe88","#2962ff88","#0091ea88","#00b8d488","#00bfa588","#00c85388","#64dd1788","#aeea0088","#ffd60088","#ffab0088","#ff6d0088","#dd2c0088"],o=e.edges.map(i=>i.split("").reduce((s,l)=>(s=(s<<5)-s+l.charCodeAt(0),s&s),0)).reduce((i,s)=>i+s,0);return n[Math.abs(o)%n.length]},dasharray:void 0,linecap:"round",linejoin:"round",animate:!1,animationSpeed:50}),normal:{width:e=>O.value(t.path.width,e),color:e=>O.value(t.path.color,e),dasharray:e=>O.value(t.path.dasharray,e),linecap:e=>O.value(t.path.linecap,e),linejoin:e=>O.value(t.path.linejoin,e),animate:e=>O.value(t.path.animate,e),animationSpeed:e=>O.value(t.path.animationSpeed,e)},hover:{width:e=>O.value(t.normal.width,e)+2,color:e=>O.value(t.normal.color,e),dasharray:e=>O.value(t.normal.dasharray,e),linecap:e=>O.value(t.normal.linecap,e),linejoin:e=>O.value(t.normal.linejoin,e),animate:e=>O.value(t.normal.animate,e),animationSpeed:e=>O.value(t.normal.animationSpeed,e)},selected:{width:e=>O.value(t.normal.width,e)+2,color:e=>O.value(t.normal.color,e),dasharray:"6 12",linecap:e=>O.value(t.normal.linecap,e),linejoin:e=>O.value(t.normal.linejoin,e),animate:e=>O.value(t.normal.animate,e),animationSpeed:e=>O.value(t.normal.animationSpeed,e)},selectable:!1,zOrder:{enabled:!1,zIndex:0,bringToFrontOnHover:!0,bringToFrontOnSelected:!0},transition:void 0}))}}function El(t){const e=vo();return t&&ho(e,t),e}const bo=Symbol("style");function kl(t,e){return qn(t)?ho(t,e):e}function Sl(t){const e=r.reactive(vo()),n=Object.keys(e);for(const o of n)r.watch(()=>t.value[o],()=>{fl(e[o],t.value[o]||{},kl)},{immediate:!0,deep:!0});return r.provide(bo,e),e}function dt(t){return Z(r.inject(bo),`Configs(${t})`)[t]}function Pl(){return dt("view")}function ft(){return dt("node")}function ht(){return dt("edge")}function yo(){return dt("path")}let xl=1;function Ml(){return xl++}function Y(t){return Object.entries(t)}function pt(t,e){const n=new Set(Object.keys(t));Y(e).forEach(([o,i])=>{me(t[o],i)||(t[o]=i),n.delete(o)}),n.forEach(o=>delete t[o])}function Cl(t){return t instanceof Promise||t&&typeof t.then=="function"}function Tl(t,e,n){const o=ie({edgeLayoutPoints:{},edgeGroups:{},summarizedEdges:{}});return r.watchEffect(()=>{const{edgeLayoutPoints:i,edgeGroups:s}=_l(n,t.value,e.value);pt(o.edgeLayoutPoints,i),pt(o.edgeGroups,s)}),r.watchEffect(()=>{const i={};for(const[s,{edges:l,groupWidth:u}]of Object.entries(o.edgeGroups)){let d=!1;if(u==0)d=!1;else if(n.edge.summarize instanceof Function){const p=n.edge.summarize(l,n);p===null?d=wo(t.value,l,n,u):d=p}else n.edge.summarize?d=wo(t.value,l,n,u):d=!1;o.edgeGroups[s].summarize=d,d&&Object.keys(l).forEach(p=>i[p]=!0)}pt(o.summarizedEdges,i)}),o}function Ol(t,e,n,o,i,s){return t?e?Eo(t.edge,n,o,i,0,0,s):Eo(t.edge,n,o,i,t.groupWidth,t.pointInGroup,s):{p1:{x:0,y:0},p2:{x:0,y:0}}}function _l(t,e,n){const o={},i={},s={};for(const[u,d]of Object.entries(n)){if(!(d.source in e&&d.target in e))continue;const p=[d.source,d.target].sort().join("<=>"),f=s[p]||{};f[u]=d,s[p]=f}const l=t.edge.gap instanceof Function?t.edge.gap:(u,d)=>t.edge.gap;for(const[u,d]of Object.entries(s)){const p=Object.keys(d).length;if(p==0)continue;const f=l(d,t),[a,c]=Object.entries(d)[0];if(p===1)o[a]={edge:c,pointInGroup:0,groupWidth:0},i[u]={edges:d,groupWidth:0,summarize:!1};else{let h=0;const y=Object.entries(d).map(([m,E])=>{let S=O.value(t.edge.normal.width,E);return isNaN(+S)&&(console.warn("[v-network-graph] Edge width is invalid value. id=[%s] value=[%s]",m,S),S=1),S/2}),k=Object.entries(d).map(([m,E],S)=>(S>0&&(h+=y[S-1]+f+y[S]),[m,E,h])),v=h;k.forEach(([m,E,S])=>{o[m]={edge:E,pointInGroup:S,groupWidth:v}}),i[u]={edges:d,groupWidth:v,summarize:!1}}}return{edgeLayoutPoints:o,edgeGroups:i}}function wo(t,e,n,o){if(Object.entries(e).length===1)return!1;const s=Math.min(...Object.values(e).flatMap(l=>[t[l.source],t[l.target]]).filter(l=>l).map(l=>{const u=O.values(n.node.normal,l);return u.type==="circle"?u.radius*2:Math.min(u.width,u.height)}));return o>s}function Eo(t,e,n,o,i,s,l){var a,c,h,y,k,v,m,E;let u,d,p,f;return t.source<t.target?[u,d,p,f]=ko((a=e==null?void 0:e.x)!=null?a:0,(c=e==null?void 0:e.y)!=null?c:0,(h=n==null?void 0:n.x)!=null?h:0,(y=n==null?void 0:n.y)!=null?y:0,o,i,s,l):[p,f,u,d]=ko((k=n==null?void 0:n.x)!=null?k:0,(v=n==null?void 0:n.y)!=null?v:0,(m=e==null?void 0:e.x)!=null?m:0,(E=e==null?void 0:e.y)!=null?E:0,o,i,s,l),{p1:{x:u,y:d},p2:{x:p,y:f}}}function ko(t,e,n,o,i,s,l,u){const d=n-t,p=o-e;let f=(s/2-l)*i;if(f!==0&&u!=="clock"){const a=Math.atan2(o-e,n-t);if(u==="vertical"){const c=Math.PI/2;(a<-c||a>=c)&&(f*=-1)}else u==="horizontal"&&a<0&&(f*=-1)}if(d===0){const a=p<0?-1:1;return[t+f*a,e,n+f*a,o]}else if(p===0){const a=d<0?1:-1;return[t,e+f*a,n,o+f*a]}else{const c=-1/(p/d);p<0&&(f=-f);const h=f/Math.sqrt(1+Math.pow(c,2));return[t+h,e+h*c,n+h,o+h*c]}}function So(t,e,n){return n||(n={x:0,y:0}),n.x=t.x+e.x,n.y=t.y+e.y,n}function Vt(t,e,n){return n||(n={x:0,y:0}),n.x=t.x-e.x,n.y=t.y-e.y,n}function Po(t,e,n){return n||(n={x:0,y:0}),n.x=t.x*e.x,n.y=t.y*e.y,n}function xo(t,e,n){return n||(n={x:0,y:0}),n.x=t.x*e,n.y=t.y*e,n}function Ht(t,e,n){return n||(n={x:0,y:0}),n.x=t.x/e.x,n.y=t.y/e.y,n}function Mo(t,e){return t.x*e.x+t.y*e.y}function Co(t,e){return t.x*e.y-t.y*e.x}function Ft(t){return t.x*t.x+t.y*t.y}function Wt(t){return Math.sqrt(Ft(t))}function Ut(t,e){const n=t.x-e.x,o=t.y-e.y;return n*n+o*o}function To(t,e){return Math.sqrt(Ut(t,e))}function Oo(t,e){e||(e={x:0,y:0});const n=Wt(t);return n===0?(e.x=1,e.y=0):Ht(t,{x:n,y:n},e),e}function gt(t,e,n){n||(n={x:0,y:0});const o=t.x*Math.cos(e)-t.y*Math.sin(e),i=t.x*Math.sin(e)+t.y*Math.cos(e);return n.x=o,n.y=i,n}const Bl=180/Math.PI;function zl(t){return t*Bl}function Gt(t){return Math.atan2(t.y,t.x)}function qt(t){return zl(Gt(t))}const Il=Object.freeze(Object.defineProperty({__proto__:null,add:So,angle:Gt,angleDegree:qt,cross:Co,distance:To,distanceSquared:Ut,divide:Ht,dot:Mo,length:Wt,lengthSquared:Ft,multiply:Po,multiplyScalar:xo,normalize:Oo,rotate:gt,subtract:Vt},Symbol.toStringTag,{value:"Module"}));class j{static fromArray(e){return new j(e[0]||0,e[1]||0)}static fromObject(e){return new j(e.x,e.y)}constructor(e,n){this.x=e,this.y=n}add(e){return So(this,e,this)}subtract(e){return Vt(this,e,this)}multiply(e){return Po(this,e,this)}multiplyScalar(e){return xo(this,e,this)}divide(e){return Ht(this,e,this)}dot(e){return Mo(this,e)}cross(e){return Co(this,e)}lengthSquared(){return Ft(this)}length(){return Wt(this)}distanceSquared(e){return Ut(this,e)}distance(e){return To(this,e)}normalize(){return Oo(this,this)}angle(){return Gt(this)}angleDegree(){return qt(this)}rotate(e){return gt(this,e,this)}isEqualTo(e){return this.x===e.x&&this.y===e.y}clone(){return new j(this.x,this.y)}toObject(){return{x:this.x,y:this.y}}toArray(){return[this.x,this.y]}}const W=q({Vector2D:j},Il);class F{constructor(e,n,o){this.source=e,this.target=n,this.v=o}static fromLinePosition(e){const n=j.fromObject(e.p1),o=j.fromObject(e.p2);return new F(n,o,Be(n,o))}static fromPositions(e,n){const o=j.fromObject(e),i=j.fromObject(n);return new F(o,i,Be(o,i))}static fromVectors(e,n){return new F(e,n,Be(e,n))}}function Be(t,e){return e.clone().subtract(t)}function $l(t){return[j.fromObject(t.p1),j.fromObject(t.p2)]}function Al(t){return new j((t.p1.x+t.p2.x)/2,(t.p1.y+t.p2.y)/2)}function mt(t,e){return{p1:t,p2:e}}function Xt(t,e,n){const o=F.fromLinePosition(t);return Ll(o,e,n)}function Ll(t,e,n){const o=t.v.clone().normalize(),i=t.source.clone().add(o.clone().multiplyScalar(e)),s=t.target.clone().subtract(o.clone().multiplyScalar(n));let l=i.toObject(),u=s.toObject();const d=Be(i,s);if(t.v.angle()*d.angle()<0){const p=new j((l.x+u.x)/2,(l.y+u.y)/2),f=p.clone().add(o.multiplyScalar(.5));l=p.toObject(),u=f.toObject()}return{p1:l,p2:u}}function Nl(t){return{p1:t.p2,p2:t.p1}}function We(t){const e=t.v.clone().normalize().rotate(Math.PI/2);return F.fromVectors(t.target,t.target.clone().add(e))}function Kt(t,e){const n=e.v.clone().normalize(),o=e.source,i=W.subtract(t,o),s=n.dot(i);return o.clone().add(n.multiplyScalar(s))}function vt(t,e,n,o){if(!(W.lengthSquared(W.subtract(e,n))-o*o<=Math.pow(1,-10)))return null;const l=F.fromVectors(t,e),u=Kt(n,l),d=W.length(W.subtract(u,n));if(o<d)return null;if(o===d)return u;const p=Math.sqrt(X(o,2)-X(d,2)),f=l.v.normalize().multiplyScalar(p);return u.subtract(f)}function jl(t,e,n,o,i){if(!(W.lengthSquared(W.subtract(e,n))-o*o<=Math.pow(1,-10)))return null;const u=F.fromVectors(t,e),d=Kt(n,u),p=W.length(W.subtract(d,n));if(o<p)return null;if(o===p)return d;const f=Math.sqrt(X(o,2)-X(p,2)),a=u.v.normalize().multiplyScalar(f),c=d.clone().add(a),h=d.clone().subtract(a),y=i.distance(c),k=i.distance(h);return Math.abs(y-k)<2?h:y<k?c:h}function Me(t,e){const n=W.subtract(e.source,t.source),o=t.v,i=e.v,s=W.cross(n,o)/W.cross(o,i);return e.source.clone().add(i.clone().multiplyScalar(s))}function Ue(t,e,n,o,i){const s=t,u=n.clone().subtract(s),d=u.length(),p=e+o;if(p<d)return null;const f=Math.abs(e-o);if(d<f)return null;if(d===p){const w=u.clone().normalize(),P=t.clone().add(w.multiplyScalar(e));return i?P:[P,P]}if(d===f){const w=u.clone().normalize(),P=e>o,M=t.clone().add(w.multiplyScalar(P?e:-e));return i?M:[M,M]}const a=e,c=o,h=(X(d,2)+X(a,2)-X(c,2))/(2*d*a),y=a*h,k=Math.sqrt(X(a,2)-X(y,2)),v=u.clone().normalize(),m=new j(-v.y,v.x),E=v.clone().multiplyScalar(y),S=m.clone().multiplyScalar(k),b=t.clone().add(E).add(S),g=t.clone().add(E).subtract(S);if(i){const w=b.distance(i),P=g.distance(i);return w<P?b:g}else return[b,g]}function _o(t,e,n,o){const i=F.fromPositions(t,e),s=(n.width+n.strokeWidth)/2*o,l=(n.height+n.strokeWidth)/2*o,u=n.borderRadius>0?(n.borderRadius+n.strokeWidth/2)*o:0,d=(i.v.angle()-Math.PI/2)%Math.PI,p=Math.PI/2-d%Math.PI,f=l*Math.abs(Math.tan(d)),a=s*Math.abs(Math.tan(p)),c=f<=s-u,h=a<=l-u;if(c||h||u===0)return Math.sqrt(c?X(l,2)+X(f,2):X(s,2)+X(a,2));{const y=e.x-s+u,k=e.y-l+u,v=e.x+s-u,m=e.y+l-u,E=[new j(y,k),new j(v,k),new j(v,m),new j(y,m)],S=Math.floor((i.v.angleDegree()+360)%360/90),b=E[S],g=vt(i.source,Kt(b,i),b,u);return g?Be(g,i.target).length():Be(b,i.target).length()+u}}function Bo(t,e,n,o,i){const s=F.fromLinePosition(t),l=s.v.clone().normalize(),u=o===0?s.source:s.source.clone().add(l.clone().multiplyScalar(o*i)),d=o===0?s.target:s.target.clone().subtract(l.clone().multiplyScalar(o*i)),p=(e.width/2+n)*i,f=new j(-l.y,l.x).multiplyScalar(p);let a=W.subtract(u,f),c=W.add(u,f),h=W.subtract(d,f),y=W.add(d,f);const k=s.v.angleDegree();return(k<-90||k>=90)&&([a,c]=[c,a],[h,y]=[y,h]),{source:{above:a,below:c},target:{above:h,below:y}}}function Dl(t,e,n,o){let i;n.type==="circle"?i=n.radius+n.strokeWidth/2:i=_o(e,t,n,1);let s;return o.type==="circle"?s=o.radius+o.strokeWidth/2:s=_o(t,e,o,1),[i,s]}function ve(t,e,n){const{x:o,y:i}=t,s=o-e.x,l=i-e.y;return{x:s*Math.cos(n)-l*Math.sin(n)+e.x,y:s*Math.sin(n)+l*Math.cos(n)+e.y}}function Yt(t){return t>0?-(Math.PI*2-t):Math.PI*2+t}function Qt(t,e,n,o){const i=[],s=F.fromVectors(e,t),l=F.fromVectors(e,n);let u=ze(s,l);o*u<0&&(u=Yt(u));const d=j.fromObject(ve(t,e,-u/2)),p=F.fromVectors(e,d),f=We(p),a=ze(s,p);let c=We(s);if(Math.abs(a)<Math.PI/2){const y=Me(c,f);i.push(y)}else{const y=j.fromObject(ve(d,e,a/2)),k=We(F.fromVectors(e,j.fromObject(y))),v=Me(c,k),m=Me(k,f);i.push(v,y,m)}i.push(d);const h=ze(l,p);if(c=We(l),Math.abs(h)<Math.PI/2){const y=Me(c,f);i.push(y)}else{const y=j.fromObject(ve(d,e,h/2)),k=We(F.fromVectors(e,j.fromObject(y))),v=Me(f,k),m=Me(k,c);i.push(v,y,m)}return i}function ze(t,e){return Math.atan2(t.v.y*e.v.x-t.v.x*e.v.y,t.v.x*e.v.x+t.v.y*e.v.y)}function Zl(t,e,n){const o=t.x,i=t.y,s=e.x,l=e.y,u=n.x,d=n.y,p=o-s,f=i-l,a=u-s,c=d-l;if(p===0&&f===0||a===0&&c===0)return[t,0];const h=(c*(p*(o+s)+f*(i+l))-f*(a*(u+s)+c*(d+l)))/(2*p*c-2*f*a),y=(-a*(p*(o+s)+f*(i+l))+p*(a*(u+s)+c*(d+l)))/(2*p*c-2*f*a),k=Math.sqrt(Math.pow(o-h,2)+Math.pow(i-y,2));return[new j(h,y),k]}function Ie(t){return t.type=="circle"?t.radius:Math.min(t.width,t.height)/2}function Rl(t){const e=Object.values(t);if(e.length===0)return{top:0,bottom:0,left:0,right:0};const n={top:e[0].y,bottom:e[0].y,left:e[0].x,right:e[0].x};return e.forEach(o=>{n.top=Math.min(o.y,n.top),n.bottom=Math.max(o.y,n.bottom),n.left=Math.min(o.x,n.left),n.right=Math.max(o.x,n.right)}),n}function bt(...t){return t.find(e=>!!e)}const Vl=Number.EPSILON*100;function Hl(t,e,n,o,i,s,l,u){var k,v;const d=t.edges,p=t.directions,f=d.map((m,E)=>Wl(m,p[E],o[m.edgeId])),a=[];let c=!1,h=!1;{const m=f[0];let E=Ie(e[m.source].shape)*i;const S=u+(l==="edgeOfNode"?E:0),b=S<=0?m.line.source:$o(m,S,n,!0);a.push(b),E=Ie(e[m.target].shape)*i,u>0&&W.distance(m.line.source,m.line.target)<=S+E&&(c=!0)}const y=d.length;for(let m=1;m<y;m++){const E=f[m-1],S=f[m],b=S.source,g=j.fromObject((k=n[b])!=null?k:{x:0,y:0}),w=Fl(E,S,g),P=Ie(e[b].shape)*i,M=Math.max(P*(2/3),P-4*i),_=Jt(E),C=Jt(S),T=yt(E,g,M,_),B=yt(S,g,M,!C),L=yt(E,g,P,_),V=yt(S,g,P,!C);let N;if(w){const R=W.distance(w,g);if(R<M)N=[bt(T,L,E.line.target),w,bt(B,V,S.line.source)];else if(R<=P){let ne,K;L&&T?ne=W.distance(w,T)<W.distance(w,L)?T:L:ne=L||E.line.target,V&&B?K=W.distance(w,B)<W.distance(w,V)?B:V:K=V||S.line.source,N=[ne,w,K]}else T&&B?N=[T,g,B]:L&&V?N=[L,g,V]:N=[bt(T,L,E.line.target),g,bt(B,V,S.line.source)]}else T&&B?N=[T,g,B]:L&&V?N=[L,g,V]:N=[E.line.target,g,S.line.source];if(E.curve){const R=a[a.length-1];if(R){const ne=R instanceof Array?R[R.length-1]:R;let K;N instanceof Array?K=s?N[0]:N[1]:K=N;const le=Qt(ne,E.curve.circle.center,K,E.curve.theta);N instanceof Array&&s?a.push([...le,...N]):a.push([...le,K])}}else if(E.loop){const[R,ne,K]=Lo(g,E,P);a.push(R),a.push(K),N instanceof Array&&s?a.push([ne,N[1],N[2]]):a.push(N[2])}else s||!(N instanceof Array)?a.push(N):S.curve?a.push(N[1]):S.loop?a.push(N[0]):a.push(N[0],N[2])}{const m=f[f.length-1];let E=Ie(e[m.target].shape)*i;const S=u+(l==="edgeOfNode"?E:0),b=S<=0?m.line.target:$o(m,S,n,!1);if(E=Ie(e[m.source].shape)*i,m.loop){const g=j.fromObject((v=n[m.target])!=null?v:{x:0,y:0}),[w,P,M]=Lo(g,m,E);a.push(w),a.push(M)}else if(m.curve){const g=a[a.length-1],w=g instanceof Array?g[g.length-1]:g,P=Qt(w,m.curve.circle.center,b,m.curve.theta);a.push([...P,b])}else a.push(b);u>0&&W.distance(m.line.source,m.line.target)<=S+E&&(h=!0)}return c&&(a.shift(),a[0]instanceof Array&&a.unshift(a[0][0])),h&&a.pop(),a}function zo(t){const e=t.length;if(e===0)return[];if(e<=1)return[!0];const n=[];let o=null,i=!0;for(let s=0;s<e;s++){const l=t[s].edge.source,u=t[s].edge.target;if(s===0)if(e>2){const d=Io(t,0);d===null?i=!0:i=d===u}else i=[t[1].edge.source,t[1].edge.target].includes(u);else l===u?i=!0:i=o===l;n.push(i),o=i?u:l}return n}function Io(t,e){const n=t[e],o=t[e+1],i=[n.edge.source,n.edge.target].sort(),s=[o.edge.source,o.edge.target].sort();if(i[0]===i[1])return i[0];if(s[0]===s[1])return s[0];if(n.edgeId===o.edgeId||i[0]===s[0]&&i[1]===s[1]){if(e>=t.length-2)return null;{const l=Io(t,e+1);return l===null?null:l===i[1]?i[0]:i[1]}}else return s.includes(i[1])?i[1]:i[0]}function $o(t,e,n,o){const i=o?t.source:t.target,s=t.curve;if(s){let l=e/s.circle.radius;return s.theta>0&&(l*=-1),o||(l*=-1),j.fromObject(ve(o?t.line.source:t.line.target,s.circle.center,l))}else{let l,u;if(o?(l=t.line.target,u=t.line.source):(l=t.line.source,u=t.line.target),n[i]){const d=vt(l,u,j.fromObject(n[i]),e);return d===null?l:d}else return l}}function Fl(t,e,n){let o=null;if(t.loop||e.loop)o=null;else if(t.curve)if(e.curve){if(t.line.target.isEqualTo(e.line.source))return t.line.target.clone();o=Ue(t.curve.circle.center,t.curve.circle.radius,e.curve.circle.center,e.curve.circle.radius,t.curve.center)}else o=jl(e.line.target,e.line.source,t.curve.circle.center,t.curve.circle.radius,n);else if(e.curve)o=vt(t.line.source,t.line.target,e.curve.circle.center,e.curve.circle.radius);else{const i=Ao(t.line),s=Ao(e.line);!isFinite(i)&&!isFinite(s)||Math.abs(i-s)<Vl?o=null:o=Me(t.line,e.line)}return o}function yt(t,e,n,o){if(t.loop){const i=Ue(e,n,t.loop.center,t.loop.radius[0]);return i?o?i[0]:i[1]:null}else return t.curve?Ue(e,n,t.curve.circle.center,t.curve.circle.radius,j.fromObject(t.curve.center)):vt(o?t.line.source:t.line.target,o?t.line.target:t.line.source,e,n)}function Wl(t,e,n){let o=n.origin,i=t.edge.source,s=t.edge.target,l=n.curve;const u=n.loop;u?o=n.position:e||(o=Nl(o),i=t.edge.target,s=t.edge.source,l&&(l=Je(q({},l),{theta:-l.theta})));const d=F.fromLinePosition(o);return{edgeId:t.edgeId,source:i,target:s,line:d,direction:e,curve:l,loop:u}}function Ao(t){return(t.target.y-t.source.y)/(t.target.x-t.source.x)}function Lo(t,e,n){const{radius:o,center:i}=Z(e.loop,"Loop of edge parameter"),[s,l]=o,u=Ue(t,n,i,o[0]);let[d,p]=u?u.reverse():[e.line.source,e.line.target];const f=Jt(e);f||([d,p]=[p,d]);const a=d,c=p,h=j.fromObject(a).subtract(i).angleDegree();let v=(j.fromObject(c).subtract(i).angleDegree()+360-h)%360>=180;return v=f?v:!v,[a,c,`A ${s} ${l} 0 ${v?1:0} ${f?1:0} ${c.x} ${c.y}`]}function Jt(t){return t.loop?t.direction?t.loop.isClockwise:!t.loop.isClockwise:!0}function en(t,e,n,o,i,s,l){const u=r.reactive({});r.watch(()=>new Set(Object.keys(t.value)),(p,f)=>{f||(f=new Set([]));for(const a of p)f.has(a)||Ul(t,u,a,!1,e,i);for(const a of f)p.has(a)||(n.delete(a),o.delete(a),s==null||s(a,u[a]),delete u[a])},{immediate:!0}),r.watch(()=>[...n],(p,f)=>{const a=f?p.filter(h=>!f.includes(h)):p,c=f?f.filter(h=>!p.includes(h)):[];a.forEach(h=>{const y=u[h];y&&!y.selected&&(y.selected=!0)}),c.forEach(h=>{const y=u[h];y&&y.selected&&(y.selected=!1)})},{immediate:!0}),r.watch(()=>[...o],(p,f)=>{const a=p.filter(h=>!f.includes(h)),c=f.filter(h=>!p.includes(h));a.forEach(h=>{const y=u[h];y&&!y.hovered&&(y.hovered=!0)}),c.forEach(h=>{const y=u[h];y&&y.hovered&&(y.hovered=!1)})});const d=r.computed(()=>{const p=l?l():Object.values(u);return e.zOrder.enabled?Gl(p,e.zOrder,o,n):p});return{states:u,zOrderedList:d}}function Ul(t,e,n,o,i,s){const l={id:n,selected:o,hovered:!1,selectable:r.computed(()=>t.value[n]?O.value(i.selectable,t.value[n]):r.unref(l.selectable)),zIndex:r.computed(()=>t.value[n]?O.value(i.zOrder.zIndex,t.value[n]):r.unref(l.zIndex))};e[n]=l,s(t,n,e[n])}function Gl(t,e,n,o){return e.bringToFrontOnHover&&e.bringToFrontOnSelected?t.sort((i,s)=>{const l=n.has(i.id),u=n.has(s.id);if(l!=u)return l?1:-1;const d=o.has(i.id),p=o.has(s.id);return d!=p?d?1:-1:i.zIndex-s.zIndex}):e.bringToFrontOnHover?t.sort((i,s)=>{const l=n.has(i.id),u=n.has(s.id);return l!=u?l?1:-1:i.zIndex-s.zIndex}):e.bringToFrontOnSelected?t.sort((i,s)=>{const l=o.has(i.id),u=o.has(s.id);return l!=u?l?1:-1:i.zIndex-s.zIndex}):t.sort((i,s)=>i.zIndex-s.zIndex)}function ql(t){return typeof btoa===void 0?Buffer.from(t).toString("base64").replaceAll("=",""):btoa(t).replaceAll("=","")}function Xl(){return{markers:r.reactive({}),referenceCount:{}}}function Kl(t){const{markers:e,referenceCount:n}=t;function o(u,d){var f;const p=(f=n[u])!=null?f:0;n[u]=p+1,p||(e[u]=d)}function i(u){var p;const d=(p=n[u])!=null?p:0;d&&(d-1===0?(delete e[u],delete n[u]):n[u]=d-1)}function s(u){u&&i(u)}function l(u,d,p,f,a){if(u.type==="none"){s(p);return}if(u.type==="custom")return s(p),u.customId;const c=Yl(u,d,f),h=Ql(c,a);return h===p||(s(p),o(h,c)),h}return{makeMarker:l,clearMarker:s}}function Yl(t,e,n){var o;return Je(q({},t),{color:(o=t.color)!=null?o:n,isSource:e})}function Ql(t,e){const n=ql(t.color),o=t.isSource?"L":"R",i=t.units==="strokeWidth"?"rel":"abs";return`marker_${e}_${t.type}_${t.width}_${t.height}_${t.margin}_${t.offset}_${n}_${o}_${i}`}function tn(t,e,n){return{objects:t,selected:e,hovered:n}}const No=Symbol("states"),Jl={type:"none",width:0,height:0,margin:0,offset:0,units:"strokeWidth",color:null};function ec(t,e,n,o,i,s,l,u){const d=r.reactive({}),p=ie({});r.watchEffect(()=>{const b=Object.fromEntries(Object.keys(t.objects.value).map(g=>[g,{}]));Object.entries(e.objects.value).forEach(([g,w])=>{b!=null&&b[w.source]||(b[w.source]={}),b!=null&&b[w.target]||(b[w.target]={}),b[w.source][g]=w.target,b[w.target][g]=w.source}),pt(p,b)});const{states:f,zOrderedList:a}=en(t.objects,o.node,t.selected,t.hovered,(b,g,w)=>{oc(b,g,w,o.node,p,i,s)},(b,g)=>{const w=i.nodes;delete w[b]}),c=Ml(),h=Tl(t.objects,e.objects,o),y=r.ref([]),{states:k,zOrderedList:v}=en(e.objects,o.edge,e.selected,e.hovered,(b,g,w)=>{ic(b,g,w,o.edge,l,f,h,i,u,c)},(b,g)=>{var w;(w=g.stopWatchHandle)==null||w.call(g)},()=>y.value);r.watchEffect(()=>{y.value=sc(h.edgeGroups,k)}),r.watch(h.edgeGroups,b=>cc(d,h,o),{immediate:!0});const{states:m,zOrderedList:E}=en(n.objects,o.path,n.selected,n.hovered,(b,g,w)=>{const P=w;P.clickable=r.computed(()=>b.value[g]?O.value(o.path.clickable,b.value[g]):!1),P.hoverable=r.computed(()=>b.value[g]?O.value(o.path.hoverable,b.value[g]):!1),P.path=b.value[g],P.edges=Zo(P.path,e),P.directions=zo(P.edges),P.stopWatchHandle=r.watch(()=>b.value[g].edges,()=>{P.path=b.value[g],P.edges=Zo(P.path,e),P.directions=zo(P.edges)})},(b,g)=>{var w;(w=g.stopWatchHandle)==null||w.call(g)}),S={nodeStates:f,edgeStates:k,edgeGroupStates:h,summarizedEdgeStates:d,pathStates:m,layouts:i,nodeZOrderedList:a,edgeZOrderedList:v,pathZOrderedList:E};return r.provide(No,S),S}function tc(t){return t.summarized}function oe(){return Z(r.inject(No),"states")}function nc(t,e,n,o){return n&&o.hover?O.values(o.hover,t):jo(t,e,o)}function jo(t,e,n){return e&&n.selected?O.values(n.selected,t):O.values(n.normal,t)}function oc(t,e,n,o,i,s,l){var u,d;!s.nodes[e]&&((u=l.nodes)!=null&&u[e])&&(s.nodes[e]=q({},(d=l.nodes)==null?void 0:d[e])),n.shape=r.computed(()=>t.value[e]?nc(t.value[e],n.selected,n.hovered,o):r.unref(n.shape)),n.staticShape=r.computed(()=>t.value[e]?jo(t.value[e],n.selected,o):r.unref(n.staticShape)),n.label=r.computed(()=>t.value[e]?O.values(o.label,t.value[e]):r.unref(n.label)),n.labelText=r.computed(()=>{var p,f;return o.label.text instanceof Function?r.unref(n.label).text:t.value[e]?(f=(p=t.value[e])==null?void 0:p[r.unref(n.label).text])!=null?f:"":r.unref(n.labelText)}),n.draggable=r.computed(()=>t.value[e]?O.value(o.draggable,t.value[e]):r.unref(n.draggable)),n.oppositeNodeIds=r.toRef(i,e),n.oppositeNodes=r.computed(()=>Object.entries(n.oppositeNodeIds).reduce((p,f)=>{const[a,c]=f,h=s.nodes[c];return h&&(p[a]={nodeId:c,pos:q({},h)}),p},{}))}function rc(t,e,n,o){return e?O.values(o.selected,t):n&&o.hover?O.values(o.hover,t):O.values(o.normal,t)}function Do(t){return t.type==="none"?Jl:t}function ic(t,e,n,o,i,s,l,u,d,p){const{makeMarker:f,clearMarker:a}=Kl(i);Object.assign(n,{origin:{p1:{x:0,y:0},p2:{x:0,y:0}},labelPosition:{p1:{x:0,y:0},p2:{x:0,y:0}},position:{p1:{x:0,y:0},p2:{x:0,y:0}}}),n.label=r.computed(()=>t.value[e]?O.values(o.label,t.value[e]):r.unref(n.label));const c=r.computed(()=>{const m=t.value[e],E=rc(m,n.selected,n.hovered,o);isNaN(+E.width)&&(console.warn("[v-network-graph] Edge width is invalid value. id=[%s] value=[%s]",e,E.width),E.width=1),(E.color===void 0||E.color===null)&&(console.warn("[v-network-graph] Edge color is invalid value. id=[%s] value=[%s]",e,E.color),E.color="#000000");let S=O.value(o.normal.width,m);isNaN(+S)&&(S=1);const b=Do(O.values(o.marker.source,[m,E])),g=Do(O.values(o.marker.target,[m,E]));return{stroke:E,normalWidth:S,source:b,target:g}});n.line=c;const h=r.toRef(l.edgeLayoutPoints,e),y=r.toRef(l.summarizedEdges,e),k=r.watchEffect(()=>{var N,R,ne,K,le,Ce,Te;const m=t.value[e];if(!m)return;const E=(N=s[m.source])==null?void 0:N.staticShape,S=(R=s[m.target])==null?void 0:R.staticShape;if(!E||!S)return;const b=(ne=u.nodes[m==null?void 0:m.source])!=null?ne:{x:0,y:0},g=(K=u.nodes[m==null?void 0:m.target])!=null?K:{x:0,y:0},w=Ol(h.value,(le=y.value)!=null?le:!1,b,g,d.value,o.keepOrder),[P,M]=Dl(b,g,E,S),_=d.value;n.labelPosition=Xt(w,P*_,M*_);let C=0,T=0;const B=c.value;if(B.source.type!=="none"){const Q=B.source;C=Q.margin+Q.width,Q.units==="strokeWidth"&&(C*=B.normalWidth)}if(B.target.type!=="none"){const Q=B.target;T=Q.margin+Q.width,Q.units==="strokeWidth"&&(T*=B.normalWidth)}o.margin&&(C+=o.margin,T+=o.margin);const L=!!o.margin||B.source.type!=="none"||B.target.type!=="none";if(m.source===m.target){n.origin=mt(b,g);const Q=O.values(o.selfLoop,m),[Ae,Le]=lc(b,E,Q,L,C,T,(Te=(Ce=h.value)==null?void 0:Ce.pointInGroup)!=null?Te:0,_);n.position=Ae,n.loop=Le,n.curve=void 0;return}else n.loop=void 0;if(L&&(C+=P,T+=M),o.type==="straight"||y.value)n.origin=w,n.curve=void 0,C===0&&T===0?n.position=n.origin:n.position=Xt(n.origin,C*_,T*_);else{n.origin=mt(b,g);const Q=h.value?h.value.groupWidth/2-h.value.pointInGroup:0,[Ae,Le]=ac(n.origin,w,Q,C*_,T*_);n.position=Ae,n.curve=Le}}),v=r.watchEffect(()=>{t.value[e]&&(n.sourceMarkerId=f(c.value.source,!0,n.sourceMarkerId,c.value.stroke.color,p),n.targetMarkerId=f(c.value.target,!1,n.targetMarkerId,c.value.stroke.color,p))});n.stopWatchHandle=()=>{k(),v(),a(n.sourceMarkerId),a(n.targetMarkerId)}}function sc(t,e){return Object.entries(t).map(([n,o])=>{var i;return o.summarize?{id:(i=Object.keys(o.edges)[0])!=null?i:n,summarized:!0,key:n,group:o,zIndex:Object.keys(o.edges).map(s=>{var l,u;return(u=(l=e[s])==null?void 0:l.zIndex)!=null?u:0}).reduce((s,l)=>Math.max(s,l))}:Object.entries(o.edges).map(([s,l])=>{var u,d;return{id:s,summarized:!1,key:s,edge:l,zIndex:(d=(u=e[s])==null?void 0:u.zIndex)!=null?d:0}})}).flat()}function ac(t,e,n,o,i){const s=F.fromLinePosition(t),l=F.fromLinePosition(e),u=Al(e),[d,p]=Zl(s.source,s.target,u);let f,a;if(p===0)return[t,a];if(n===0)return o===0&&i===0?f=t:f=Xt(t,o,i),[f,a];const c=F.fromVectors(d,u),h=ze(F.fromVectors(d,s.source),c);if(o===0&&i===0)f=t;else{let m=o/p,E=i/p;h>0&&(m*=-1,E*=-1),f=mt(ve(s.source,d,m),ve(s.target,d,-E));let S=ze(F.fromVectors(d,s.source),F.fromVectors(d,s.target)),b=ze(F.fromPositions(d,f.p1),F.fromPositions(d,f.p2));if(h*S<0&&(S=Yt(S),h*b<0&&(b=Yt(b))),S*b<0){const g=u.clone().add(l.v.normalize().multiplyScalar(.5));return f=mt(u,g),[f,a]}}const[y,k]=$l(f),v=Qt(y,d,k,h).map(m=>m.toObject());return a={center:u,theta:h,circle:{center:d,radius:p},control:v},[f,a]}function lc(t,e,n,o,i,s,l,u){const d=u,p=(n.radius+l/2)*d,f=n.offset*d+p,a=(n.angle-90)*(Math.PI/180),c=j.fromObject({x:t.x+f*Math.cos(a),y:t.y+f*Math.sin(a)}),h=n.isClockwise;let y,k;if(o){const b=Ue(c,p,j.fromObject(t),Ie(e)*d);if(b){[y,k]=b;let g=1;if(h||([y,k]=[k,y],g=-1),i!==0||s!==0){const w=i*d/p*g,P=s*d/p*g;y=ve(y,c,w),k=ve(k,c,-P)}}}if(y===void 0||k===void 0){const b=j.fromObject(t).subtract(c).normalize().multiplyScalar(p);let g=1*(Math.PI/180);h||(g*=-1),y=c.clone().add(gt(b,g)),k=c.clone().add(gt(b,-g))}const v=j.fromObject(y).subtract(c).angleDegree(),S=(j.fromObject(k).subtract(c).angleDegree()+360-v)%360>=180;return[{p1:y,p2:k},{center:c,radius:[p,p],isLargeArc:h?S:!S,isClockwise:h}]}function cc(t,e,n){const o=e.edgeGroups;Object.entries(o).filter(([i,s])=>s.summarize&&!(i in t)).forEach(([i,s])=>{const l={stroke:void 0};l.stroke=r.computed(()=>O.values(n.edge.summarized.stroke,s.edges)),t[i]=l}),Object.keys(t).forEach(i=>{var s;(s=e.edgeGroups[i])!=null&&s.summarize||delete t[i]})}function Zo(t,e){return t.edges.map(n=>({edgeId:n,edge:e.objects.value[n]})).filter(n=>n.edge)}class Ge{static valueOf(e){return Array.from(e.values())}}const uc=3,dc=6,Ro=500;function wt(t){return t==="touch"?dc:uc}function nn(t,e,n,o){let i=t.get(e);if(i)i.id!==n&&(i=void 0);else{const u=Array.from(t.entries()).find(([d,p])=>p.id===n);if(u){const[d,p]=u;t.delete(d),i=p}}let s,l;return[i,s,l]=Vo(i,o,n),t.set(e,i),[s,l]}function Vo(t,e,n){const o=Date.now();t&&o-t.lastTime<=Ro?(t.count++,t.lastTime=o):t={count:1,lastTime:o,id:n};const i={view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey,button:e.button,buttons:e.buttons,detail:t.count};let s,l;return e instanceof PointerEvent?(Object.assign(i,{pointerId:e.pointerId,width:e.width,height:e.height,pressure:e.pressure,tangentialPressure:e.tangentialPressure,tiltX:e.tiltX,tiltY:e.tiltY,twist:e.twist,pointerType:e.pointerType,isPrimary:e.isPrimary}),s=new PointerEvent("click",i),t.count===2&&(l=new PointerEvent("dblclick",i))):(s=new MouseEvent("click",i),t.count===2&&(l=new MouseEvent("dblclick",i))),[t,s,l]}function on(t){const e=Date.now();Array.from(t.entries()).filter(([n,o])=>e-o.lastTime>Ro).map(([n,o])=>t.delete(n))}function fc(t,e,n,o,i,s,l){const u={pointers:new Map,follow:{followedPointerId:-1,nodeBasePositions:{}},hoveredNodesPre:new Set,clicks:new Map},d={pointermove:h,pointerup:k,pointercancel:y};function p(b){const g=u.follow.followedPointerId===b.pointerId,w=i.has(b.nodeId),P=!(b.pointerId in u.pointers);if(g&&P||g&&!w){const M=Ge.valueOf(u.pointers).find(_=>i.has(_.nodeId));if(!M){u.follow={followedPointerId:-1,nodeBasePositions:{}};return}b=M,u.follow.followedPointerId=b.pointerId}else{const M=u.pointers.get(u.follow.followedPointerId);if(!M){u.follow={followedPointerId:-1,nodeBasePositions:{}};return}b=M}if(g||w){const M=Ge.valueOf(u.pointers).map(_=>_.nodeId);u.follow.nodeBasePositions=Object.fromEntries(Array.from(i).filter(_=>!M.includes(_)).filter(_=>{var C;return(C=t[_])==null?void 0:C.draggable}).map(_=>[_,rn(e.nodes,_)])),b.dragBasePosition=q({},b.latestPosition),b.nodeBasePosition=rn(e.nodes,b.nodeId)}}r.watch(i,b=>{const g=u.pointers.get(u.follow.followedPointerId);g&&p(g),b.size>0&&n.selectionMode.value!=="node"?n.selectionMode.value="node":b.size===0&&n.selectionMode.value==="node"&&(n.selectionMode.value="container")}),r.watch(n.selectionMode,b=>{b!=="node"&&i.clear()});function f(b,g){const w=b.dragBasePosition.x-g.pageX,P=b.dragBasePosition.y-g.pageY,M=u.follow.followedPointerId==b.pointerId?q({[b.nodeId]:b.nodeBasePosition},u.follow.nodeBasePositions):{[b.nodeId]:b.nodeBasePosition},_=s.value;return Object.fromEntries(Object.entries(M).map(([C,T])=>[C,{x:T.x-w/_,y:T.y-P/_}]))}function a(b,g){var P,M;if(g.isTrusted||g.shiftKey&&!["container","node"].includes(n.selectionMode.value))return;n.selectionMode.value="node";const w=(M=(P=t[b])==null?void 0:P.selectable)!=null?M:!1;if(w){const _=Ge.valueOf(u.pointers).filter(C=>i.has(C.nodeId)).length>0;g.shiftKey||_?i.has(b)?i.delete(b):typeof w=="number"&&i.size>=w||i.add(b):i.has(b)||(i.clear(),i.add(b))}l.emit("node:click",{node:b,event:g})}function c(b,g){g.isTrusted||l.emit("node:dblclick",{node:b,event:g})}function h(b){var M;b.stopPropagation();const g=u.pointers.get(b.pointerId);if(!g)return;g.latestPosition={x:b.pageX,y:b.pageY},g.moveCounter++;const w=wt(b.pointerType);if(g.moveCounter<=w||!((M=t[g.nodeId])!=null&&M.draggable))return;if(g.moveCounter===w+1){const _=f(g,{pointerId:g.pointerId,pageX:g.dragBasePosition.x,pageY:g.dragBasePosition.y});l.emit("node:dragstart",_)}const P=f(g,b);l.emit("node:pointermove",P)}function y(b){b.stopPropagation();let g=u.pointers.get(b.pointerId);if(g){for(g of u.pointers.values()){const w=g.nodeId,P=wt(b.pointerType);if(g.moveCounter>P){const _=f(g,{pointerId:g.pointerId,pageX:g.latestPosition.x,pageY:g.latestPosition.y});l.emit("node:dragend",_)}l.emit("node:pointerup",{node:w,event:b})}u.pointers.clear(),u.follow={followedPointerId:-1,nodeBasePositions:{}},Y(d).forEach(([w,P])=>{document.removeEventListener(w,P)}),n.viewMode.value="default"}}function k(b){var _,C,T;b.stopPropagation();const g=u.pointers.get(b.pointerId);if(!g)return;u.pointers.delete(b.pointerId);const w=g.nodeId,P=wt(b.pointerType),M=g.moveCounter>P;if(M){if((_=t[g.nodeId])!=null&&_.draggable){const B=f(g,b);l.emit("node:dragend",B),l.emit("node:pointerup",{node:w,event:b})}}else l.emit("node:pointerup",{node:w,event:b});if(!M){const[B,L]=nn(u.clicks,g.pointerId,w,b);(C=g.eventTarget)==null||C.dispatchEvent(B),L&&((T=g.eventTarget)==null||T.dispatchEvent(L))}u.pointers.size===0?(u.follow={followedPointerId:-1,nodeBasePositions:{}},Y(d).forEach(([B,L])=>{document.removeEventListener(B,L)}),on(u.clicks),n.viewMode.value="default"):p(g),o.clear(),u.hoveredNodesPre.forEach(o.add,o)}function v(b,g){if(g.button==2||(g.stopPropagation(),!["default","node"].includes(n.viewMode.value)))return;u.pointers.size==0&&(n.viewMode.value="node",Y(d).forEach(([P,M])=>{document.addEventListener(P,M)}));const w={pointerId:g.pointerId,nodeId:b,moveCounter:0,nodeBasePosition:rn(e.nodes,b),dragBasePosition:{x:g.pageX,y:g.pageY},latestPosition:{x:g.pageX,y:g.pageY},eventTarget:g.currentTarget};u.pointers.set(g.pointerId,w),i.has(b)&&(u.follow.followedPointerId<0?(u.follow.followedPointerId=g.pointerId,p(w)):delete u.follow.nodeBasePositions[w.nodeId]),l.emit("node:pointerdown",{node:b,event:g})}function m(b,g){u.hoveredNodesPre.add(b),!(u.pointers.size>0)&&(o.add(b),l.emit("node:pointerover",{node:b,event:g}))}function E(b,g){u.hoveredNodesPre.delete(b),!(u.pointers.size>0)&&(o.delete(b),l.emit("node:pointerout",{node:b,event:g}))}function S(b,g){g.stopPropagation(),l.emit("node:contextmenu",{node:b,event:g})}return{handleNodePointerDownEvent:v,handleNodePointerOverEvent:m,handleNodePointerOutEvent:E,handleNodeClickEvent:a,handleNodeDoubleClickEvent:c,handleNodeContextMenu:S}}function rn(t,e){var o;const n=(o=t[e])!=null?o:{x:0,y:0};return q({},n)}function hc(t,e,n,o,i){const s={pointers:new Map,pointerPeekCount:0,clicks:new Map},l={pointerup:d,pointercancel:p};r.watch(o,g=>{g.size>0&&e.selectionMode.value!=="edge"?e.selectionMode.value="edge":g.size===0&&e.selectionMode.value==="edge"&&(e.selectionMode.value="container")}),r.watch(e.selectionMode,g=>{g!=="edge"&&o.clear()});function u(g,w){if(w.button==2||(w.stopPropagation(),!["default","edge"].includes(e.viewMode.value)))return;s.pointers.size==0&&(e.viewMode.value="edge",Y(l).forEach(([M,_])=>{document.addEventListener(M,_)}),s.pointerPeekCount=0),s.pointerPeekCount++;const P={pointerId:w.pointerId,id:g,eventTarget:w.currentTarget};s.pointers.set(w.pointerId,P),i.emit("edge:pointerdown",te(g,w))}function d(g){var C,T;g.stopPropagation();const w=s.pointers.get(g.pointerId);if(!w)return;s.pointers.delete(g.pointerId);const P=w.id;i.emit("edge:pointerup",te(P,g));const[M,_]=nn(s.clicks,w.pointerId,P instanceof Array?P.join(","):P,g);(C=w.eventTarget)==null||C.dispatchEvent(M),_&&((T=w.eventTarget)==null||T.dispatchEvent(_)),s.pointers.size===0&&(s.pointerPeekCount=0,Y(l).forEach(([B,L])=>{document.removeEventListener(B,L)}),on(s.clicks),e.viewMode.value="default")}function p(g){if(g.stopPropagation(),!!s.pointers.get(g.pointerId)){for(const P of s.pointers.values()){const M=P.id;i.emit("edge:pointerup",te(M,g))}s.pointers.clear(),s.pointerPeekCount=0,Y(l).forEach(([P,M])=>{document.removeEventListener(P,M)}),i.emit("view:mode","default")}}function f(g,w){var _;if(w.isTrusted||w.shiftKey&&!["container","edge"].includes(e.selectionMode.value))return;e.selectionMode.value="edge";const P=g instanceof Array?g:[g],M=Ge.valueOf(s.pointers).filter(C=>(C.id instanceof Array?C.id:[C.id]).every(B=>o.has(B))).length>0;if(g instanceof Array)P.find(T=>{var B;return(B=t[T])==null?void 0:B.selectable})&&(w.shiftKey||M?P.some(T=>o.has(T))?P.forEach(T=>o.delete(T)):P.forEach(T=>{var L;const B=(L=t[T])==null?void 0:L.selectable;typeof B=="number"&&o.size>=B||o.add(T)}):(o.clear(),P.forEach(T=>o.add(T))));else{const C=(_=t[g])==null?void 0:_.selectable;C&&(w.shiftKey||M?o.has(g)?o.delete(g):typeof C=="number"&&o.size>=C||o.add(g):o.has(g)||(o.clear(),o.add(g)))}i.emit("edge:click",te(g,w))}function a(g,w){w.isTrusted||i.emit("edge:dblclick",te(g,w))}function c(g,w){n.add(g),i.emit("edge:pointerover",te(g,w))}function h(g,w){n.delete(g),i.emit("edge:pointerout",te(g,w))}function y(g,w){w.stopPropagation(),i.emit("edge:contextmenu",te(g,w))}function k(g,w){if(w.button==2||(w.stopPropagation(),!["default","edge"].includes(e.viewMode.value)))return;s.pointers.size==0&&(e.viewMode.value="edge",Y(l).forEach(([M,_])=>{document.addEventListener(M,_)}),s.pointerPeekCount=0),s.pointerPeekCount++;const P={pointerId:w.pointerId,id:g,eventTarget:w.currentTarget};s.pointers.set(w.pointerId,P),i.emit("edge:pointerdown",te(g,w))}function v(g,w){g.forEach(P=>n.add(P)),i.emit("edge:pointerover",te(g,w))}function m(g,w){g.forEach(P=>n.delete(P)),i.emit("edge:pointerout",te(g,w))}function E(g,w){f(g,w)}function S(g,w){a(g,w)}function b(g,w){w.stopPropagation(),i.emit("edge:contextmenu",te(g,w))}return{handleEdgePointerDownEvent:u,handleEdgePointerOverEvent:c,handleEdgePointerOutEvent:h,handleEdgeClickEvent:f,handleEdgeDoubleClickEvent:a,handleEdgeContextMenu:y,handleEdgesPointerDownEvent:k,handleEdgesPointerOverEvent:v,handleEdgesPointerOutEvent:m,handleEdgesClickEvent:E,handleEdgesDoubleClickEvent:S,handleEdgesContextMenu:b}}function te(t,e){return t instanceof Array?{edges:t,event:e,summarized:!0}:{edge:t,edges:[t],event:e,summarized:!1}}function pc(t,e,n,o){const i={moveCounter:0,pointerCounter:0,clickState:void 0},s={pointermove:u,pointerup:d,pointercancel:d};function l(h){i.moveCounter=0,i.pointerCounter===0&&Y(s).forEach(([y,k])=>{document.addEventListener(y,k,{passive:!0})}),i.pointerCounter++}function u(h){i.moveCounter++}function d(h){if(i.pointerCounter--,i.pointerCounter<=0){i.pointerCounter=0,Y(s).forEach(([k,v])=>{document.removeEventListener(k,v)});const y=wt(h.pointerType);if(i.moveCounter<=y){if(h.shiftKey&&e.selectionMode.value!=="container")return;e.selectionMode.value="container";const[k,v,m]=Vo(i.clickState,h,"view");i.clickState=k,t.value.dispatchEvent(v),m&&t.value.dispatchEvent(m)}}}function p(h){h.isTrusted||(h.stopPropagation(),o.emit("view:click",{event:h}))}function f(h){h.isTrusted||(h.stopPropagation(),o.emit("view:dblclick",{event:h}))}function a(h){o.emit("view:contextmenu",{event:h}),i.pointerCounter>0&&(i.pointerCounter=0,Y(s).forEach(([y,k])=>{var v;(v=t.value)==null||v.removeEventListener(y,k)}))}const c=h=>{h.preventDefault()};r.onMounted(()=>{const h=t.value;h&&(h.addEventListener("pointerdown",l,{passive:!0}),h.addEventListener("click",p,{passive:!1}),h.addEventListener("dblclick",f,{passive:!1}),h.addEventListener("contextmenu",a,{passive:!1}),n.value&&h.addEventListener("wheel",c,{passive:!1}))}),r.onUnmounted(()=>{const h=t.value;h&&(h.removeEventListener("pointerdown",l),h.removeEventListener("click",p),h.removeEventListener("dblclick",f),h.removeEventListener("contextmenu",a),n.value&&h.removeEventListener("wheel",c))}),r.watch(n,(h,y)=>{const k=t.value;!k||h===y||(h?k.addEventListener("wheel",c,{passive:!1}):k.removeEventListener("wheel",c))})}function gc(t,e,n,o,i,s){const l={pointers:new Map,pointerPeekCount:0,clicks:new Map};function u(m,E){var S,b;return i.value?{path:(b=(S=t[m])==null?void 0:S.path)!=null?b:m,event:E}:{path:m,event:E}}const d={pointerup:f,pointercancel:a};r.watch(o,m=>{m.size>0&&e.selectionMode.value!=="path"?e.selectionMode.value="path":m.size===0&&e.selectionMode.value==="path"&&(e.selectionMode.value="container")}),r.watch(e.selectionMode,m=>{m!=="path"&&o.clear()});function p(m,E){var b;if(!((b=t[m])!=null&&b.clickable)||E.button==2||(E.stopPropagation(),!["default","path"].includes(e.viewMode.value)))return;l.pointers.size==0&&(e.viewMode.value="path",Y(d).forEach(([g,w])=>{document.addEventListener(g,w)}),l.pointerPeekCount=0),l.pointerPeekCount++;const S={pointerId:E.pointerId,id:m,eventTarget:E.currentTarget};l.pointers.set(E.pointerId,S),s.emit("path:pointerdown",u(m,E))}function f(m){var w,P;const E=l.pointers.get(m.pointerId);if(!E)return;m.stopPropagation(),l.pointers.delete(m.pointerId);const S=E.id;s.emit("path:pointerup",u(S,m));const[b,g]=nn(l.clicks,E.pointerId,S,m);(w=E.eventTarget)==null||w.dispatchEvent(b),g&&((P=E.eventTarget)==null||P.dispatchEvent(g)),l.pointers.size===0&&(l.pointerPeekCount=0,Y(d).forEach(([M,_])=>{document.removeEventListener(M,_)}),on(l.clicks),e.viewMode.value="default")}function a(m){if(l.pointers.get(m.pointerId)){m.stopPropagation();for(const S of l.pointers.values()){const b=S.id;s.emit("path:pointerup",u(b,m))}l.pointers.clear(),l.pointerPeekCount=0,Y(d).forEach(([S,b])=>{document.removeEventListener(S,b)}),s.emit("view:mode","default")}}function c(m,E){var S;(S=t[m])!=null&&S.hoverable&&(n.add(m),s.emit("path:pointerover",u(m,E)))}function h(m,E){var S;(S=t[m])!=null&&S.hoverable&&(n.delete(m),s.emit("path:pointerout",u(m,E)))}function y(m,E){var b,g,w;if(E.isTrusted||!((b=t[m])!=null&&b.clickable)||E.shiftKey&&!["container","path"].includes(e.selectionMode.value))return;e.selectionMode.value="path";const S=(w=(g=t[m])==null?void 0:g.selectable)!=null?w:!1;if(S){const P=Ge.valueOf(l.pointers).filter(M=>o.has(M.id)).length>0;E.shiftKey||P?o.has(m)?o.delete(m):typeof S=="number"&&o.size>=S||o.add(m):o.has(m)||(o.clear(),o.add(m))}s.emit("path:click",u(m,E))}function k(m,E){var S;E.isTrusted||(S=t[m])!=null&&S.clickable&&s.emit("path:dblclick",u(m,E))}function v(m,E){var S;(S=t[m])!=null&&S.clickable&&(E.stopPropagation(),s.emit("path:contextmenu",u(m,E)))}return{handlePathPointerDownEvent:p,handlePathPointerOverEvent:c,handlePathPointerOutEvent:h,handlePathClickEvent:y,handlePathDoubleClickEvent:k,handlePathContextMenu:v}}function mc(t){return re(this,null,function*(){const n=yield(yield fetch(t)).blob();return new Promise((o,i)=>{try{const s=new FileReader;s.onload=function(){o(this.result)},s.readAsDataURL(n)}catch(s){i(s)}})})}function sn(t,e,n){var s;const o=t.createSVGPoint();o.x=n.x,o.y=n.y;const i=o.matrixTransform((s=e.getCTM())==null?void 0:s.inverse());return{x:i.x,y:i.y}}function vc(t,e,n){const o=t.createSVGPoint();o.x=n.x,o.y=n.y;const i=o.matrixTransform(e.getCTM());return{x:i.x,y:i.y}}function Ho(t,e,n){var p;const o=t.cloneNode(!0),i=e.getBBox(),s=1/n,l={x:Math.floor((i.x-10)*s),y:Math.floor((i.y-10)*s),width:Math.ceil((i.width+20)*s),height:Math.ceil((i.height+20)*s)};o.setAttribute("width",l.width.toString()),o.setAttribute("height",l.height.toString());const u=o.querySelector(".v-ng-viewport");u.setAttribute("transform",`translate(${-l.x} ${-l.y}), scale(${s})`),u.removeAttribute("style"),o.setAttribute("viewBox",`0 0 ${l.width} ${l.height}`),o.removeAttribute("style");const d=document.createNodeIterator(o,NodeFilter.SHOW_COMMENT);for(;d.nextNode();){const f=d.referenceNode;(p=f.parentNode)==null||p.removeChild(f)}return o}function bc(t){return re(this,null,function*(){let e=!1,n=t.getAttribute("href");if(n||(e=!0,n=t.getAttribute("xlink:href")),!(!n||n.startsWith("data:")))try{const o=yield mc(n);t.setAttribute(e?"xlink:href":"href",o)}catch(o){console.warn("Image download failed.",n);return}})}function yc(i,s,l){return re(this,arguments,function*(t,e,n,o={}){const u=Ho(t,e,n);if(o.embedImages){const p=Array.from(u.querySelectorAll("image")).map(f=>bc(f));yield Promise.all(p)}return u})}function wc(t,e,n,o,i,s){const l=r.computed(()=>!!s.node.selectable&&s.view.boxSelectionEnabled),u=r.computed(()=>e.viewMode.value==="box-selection"),d=r.ref(),p=r.ref(),f={pointers:new Set,points:new Map,startPoint:null,selectedNodesAtSelectStarted:new Set,selectionType:"append",options:{stopTrigger:"pointerup",selectionType:"append",selectionTypeWithShiftKey:"same"}},a=ll(()=>{Ec(Z(t.value,"container"),Z(d.value,"viewport"),p,n.nodes,o,i,f.selectedNodesAtSelectStarted,f.selectionType)},50,{maxWait:100}),c=new kc(t,y,k,v,h,m);function h(w){if(f.options.stopTrigger!=="click"||f.pointers.size>0)return;const P={x:w.offsetX,y:w.offsetY};f.startPoint&&j.fromObject(f.startPoint).distance(P)>10||g()}function y(w){w.stopPropagation();const P={x:w.offsetX,y:w.offsetY};f.pointers.size===0&&(f.startPoint=P,c.activate(),f.selectedNodesAtSelectStarted.clear(),i.forEach(M=>f.selectedNodesAtSelectStarted.add(M)),f.options.selectionTypeWithShiftKey==="same"?f.selectionType=f.options.selectionType:f.selectionType=w.shiftKey?f.options.selectionTypeWithShiftKey:f.options.selectionType),f.pointers.has(w.pointerId)||f.pointers.add(w.pointerId),f.points.set(w.pointerId,P),E()}function k(w){if(f.pointers.delete(w.pointerId),f.pointers.size===1){const P=Z(t.value).getBoundingClientRect(),M={x:w.x-P.x,y:w.y-P.y};f.startPoint=M}else f.pointers.size===0&&(c.deactivate(),f.options.stopTrigger==="pointerup"&&g(),f.selectedNodesAtSelectStarted.clear());E()}function v(w){const P=Z(t.value).getBoundingClientRect(),M={x:w.x-P.x,y:w.y-P.y};f.points.set(w.pointerId,M),E(),a()}function m(w){w.key==="Escape"&&f.options.stopTrigger!=="manual"&&(w.stopPropagation(),g())}function E(){let w,P;const M=Array.from(f.pointers);if(M.length>=2){const _=M[0],C=M[M.length-1];w=f.points.get(_),P=f.points.get(C)}else if(f.startPoint&&M.length===1){const _=M[0];w=f.startPoint,P=f.points.get(_)}else w=void 0,P=void 0;w&&P?(p.value={pos:{x:Math.min(w.x,P.x),y:Math.min(w.y,P.y)},size:{width:Math.abs(P.x-w.x),height:Math.abs(P.y-w.y)}},p.value.size.width===0&&(p.value.size.width=1),p.value.size.height===0&&(p.value.size.height=1)):p.value&&(p.value=void 0)}const S=new Sc(t,w=>{l.value&&s.view.selection.detector(w)&&(b({stop:"manual",type:"append",withShiftKey:"invert"}),S.activate())},w=>{l.value&&s.view.selection.detector(w)&&(f.pointers.size===0?g():f.options.stopTrigger="pointerup",S.deactivate())});r.watch(l,w=>{w?S.register():S.unregister()}),r.onMounted(()=>{var w;d.value=(w=t.value)==null?void 0:w.querySelector(".v-ng-viewport"),l.value&&S.register()}),r.onUnmounted(()=>{g(),l.value&&S.unregister()});function b(w={}){var P,M,_;f.options={stopTrigger:(P=w.stop)!=null?P:"pointerup",selectionType:(M=w.type)!=null?M:"append",selectionTypeWithShiftKey:(_=w.withShiftKey)!=null?_:"same"},e.viewMode.value!=="box-selection"&&(e.viewMode.value="box-selection",f.pointers.clear(),c.register())}function g(){e.viewMode.value==="box-selection"&&(e.viewMode.value="default",c.unregister())}return{isBoxSelectionMode:u,selectionBox:p,startBoxSelection:b,stopBoxSelection:g}}function Ec(t,e,n,o,i,s,l,u){if(!n.value)return;const d=n.value,p=sn(t,e,d.pos),f=sn(t,e,{x:d.pos.x+d.size.width,y:d.pos.y+d.size.height}),a=new Set(Object.entries(o).filter(([c,h])=>p.x<=h.x&&h.x<=f.x&&p.y<=h.y&&h.y<=f.y).map(([c,h])=>c));if(u==="append")s.forEach(c=>{a.has(c)||s.delete(c)}),a.forEach(c=>{var y,k;const h=(k=(y=i[c])==null?void 0:y.selectable)!=null?k:!1;(h===!0||typeof h=="number"&&s.size<h)&&s.add(c)});else{const c=new Set(l);c.forEach(h=>{a.has(h)&&c.delete(h)}),a.forEach(h=>{var y,k;if(!l.has(h)){const v=(k=(y=i[h])==null?void 0:y.selectable)!=null?k:!1;(v===!0||typeof v=="number"&&c.size<v)&&c.add(h)}}),s.clear(),c.forEach(h=>s.add(h))}}class kc{constructor(e,n,o,i,s,l){this._container=e,this._handlePointerDownEvent=n,this._handlePointerUpEvent=o,this._handlePointerMoveEvent=i,this._handleClickEvent=s,this._handleKeyDownEvent=l,this._ignoreEvent=u=>u.stopPropagation()}register(){const e={capture:!0,passive:!1},n=Z(this._container.value,"container");n.addEventListener("pointerdown",this._handlePointerDownEvent,e),n.addEventListener("click",this._handleClickEvent,e),n.addEventListener("pointerenter",this._ignoreEvent,e),n.addEventListener("pointerleave",this._ignoreEvent,e),document.addEventListener("keydown",this._handleKeyDownEvent,e)}activate(){const e={capture:!0,passive:!1};document.addEventListener("pointermove",this._handlePointerMoveEvent,e),document.addEventListener("pointerup",this._handlePointerUpEvent,e)}deactivate(){const e={capture:!0};document.removeEventListener("pointermove",this._handlePointerMoveEvent,e),document.removeEventListener("pointerup",this._handlePointerUpEvent,e)}unregister(){this.deactivate();const e={capture:!0};if(this._container.value){const n=this._container.value;n.removeEventListener("pointerdown",this._handlePointerDownEvent,e),n.removeEventListener("click",this._handleClickEvent,e),n.removeEventListener("pointerenter",this._ignoreEvent,e),n.removeEventListener("pointerleave",this._ignoreEvent,e),document.removeEventListener("keydown",this._handleKeyDownEvent,e)}}}class Sc{constructor(e,n,o){this._container=e,this._handleKeyDownEvent=n,this._handleKeyUpEvent=o,this._preventDefault=i=>{i.stopPropagation(),i.preventDefault()}}register(){document.addEventListener("keydown",this._handleKeyDownEvent,{capture:!0,passive:!0})}activate(){document.addEventListener("keyup",this._handleKeyUpEvent,{capture:!0,passive:!0}),Z(this._container.value,"container").addEventListener("contextmenu",this._preventDefault,{passive:!1})}deactivate(){document.removeEventListener("keyup",this._handleKeyUpEvent,{capture:!0}),this._container.value&&this._container.value.removeEventListener("contextmenu",this._preventDefault)}unregister(){this.deactivate(),document.removeEventListener("keydown",this._handleKeyDownEvent,{capture:!0})}}const Fo=Symbol("mouseEventHandlers");function Pc(t,e,n,o,i,s,l,u,d,p,f,a,c,h,y,k){const v={selectionMode:r.ref("container"),viewMode:r.ref("default")};l.size>0?v.selectionMode.value="node":u.size>0?v.selectionMode.value="edge":d.size>0&&(v.selectionMode.value="path"),r.watch(v.viewMode,E=>{k.emit("view:mode",E)}),pc(t,v,h,k);const m=q(q(q(q({selectedNodes:l,hoveredNodes:p,selectedEdges:u,hoveredEdges:f,selectedPaths:d,hoveredPaths:a},fc(o,e,v,p,l,n,k)),hc(i,v,f,u,k)),gc(s,v,a,d,c,k)),wc(t,v,e,o,l,y));return r.provide(Fo,m),m}function qe(){return Z(r.inject(Fo),"mouseEventHandlers")}function xc(t){return{all:t=t||new Map,on:function(e,n){var o=t.get(e);o?o.push(n):t.set(e,[n])},off:function(e,n){var o=t.get(e);o&&(n?o.splice(o.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var o=t.get(e);o&&o.slice().map(function(i){i(n)}),(o=t.get("*"))&&o.slice().map(function(i){i(e,n)})}}}const Wo=Symbol("emitter");function Mc(){const t=xc();return r.provide(Wo,t),t}function Cc(){return Z(r.inject(Wo),"event emitter")}var Uo=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Tc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var an,Go;function Et(){if(Go)return an;Go=1,an={getGlobalThis:function(){if(typeof globalThis!="undefined")return globalThis;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof Uo!="undefined")return Uo;if(typeof this!="undefined")return this;throw new Error("Unable to locate global `this`")},extend:function(e,n){e=e||{};for(var o in n)this.isObject(n[o])?e[o]=this.extend(e[o],n[o]):e[o]=n[o];return e},isElement:function(e){return e instanceof HTMLElement||e instanceof SVGElement||e instanceof SVGSVGElement||e&&typeof e=="object"&&e!==null&&e.nodeType===1&&typeof e.nodeName=="string"},isObject:function(e){return Object.prototype.toString.call(e)==="[object Object]"},isNumber:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},getSvg:function(e){var n,o;if(this.isElement(e))n=e;else if(typeof e=="string"||e instanceof String){if(n=document.querySelector(e),!n)throw new Error("Provided selector did not find any elements. Selector: "+e)}else throw new Error("Provided selector is not an HTML object nor String");if(n.tagName.toLowerCase()==="svg")o=n;else if(n.tagName.toLowerCase()==="object")o=n.contentDocument.documentElement;else if(n.tagName.toLowerCase()==="embed")o=n.getSVGDocument().documentElement;else throw n.tagName.toLowerCase()==="img"?new Error('Cannot script an SVG in an "img" element. Please use an "object" element or an in-line SVG.'):new Error("Cannot get SVG.");return o},proxy:function(e,n){return function(){return e.apply(n,arguments)}},getType:function(e){return Object.prototype.toString.apply(e).replace(/^\[object\s/,"").replace(/\]$/,"")},mouseAndTouchNormalize:function(e,n){if(e.clientX===void 0||e.clientX===null)if(e.clientX=0,e.clientY=0,e.touches!==void 0&&e.touches.length){if(e.touches[0].clientX!==void 0)e.clientX=e.touches[0].clientX,e.clientY=e.touches[0].clientY;else if(e.touches[0].pageX!==void 0){var o=n.getBoundingClientRect();e.clientX=e.touches[0].pageX-o.left,e.clientY=e.touches[0].pageY-o.top}}else e.originalEvent!==void 0&&e.originalEvent.clientX!==void 0&&(e.clientX=e.originalEvent.clientX,e.clientY=e.originalEvent.clientY)},touchNormalize:function(e,n,o){if(e.touches!==void 0&&e.touches.length){if(e.touches[o].clientX!==void 0)e.clientX=e.touches[o].clientX,e.clientY=e.touches[o].clientY;else if(e.touches[o].pageX!==void 0){var i=n.getBoundingClientRect();e.clientX=e.touches[o].pageX-i.left,e.clientY=e.touches[o].pageY-i.top}}else(e.clientX===void 0||e.clientX===null)&&(e.clientX=0,e.clientY=0,e.originalEvent!==void 0&&e.originalEvent.clientX!==void 0&&(e.clientX=e.originalEvent.clientX,e.clientY=e.originalEvent.clientY))},isDblClick:function(e,n){if(e.detail===2)return!0;if(n!=null){var o=e.timeStamp-n.timeStamp,i=Math.sqrt(Math.pow(e.clientX-n.clientX,2)+Math.pow(e.clientY-n.clientY,2));return o<250&&i<10}return!1},now:Date.now||function(){return new Date().getTime()},throttle:function(e,n,o){var i=this,s,l,u,d=null,p=0;o||(o={});var f=function(){p=o.leading===!1?0:i.now(),d=null,u=e.apply(s,l),d||(s=l=null)};return function(){var a=i.now();!p&&o.leading===!1&&(p=a);var c=n-(a-p);return s=this,l=arguments,c<=0||c>n?(clearTimeout(d),d=null,p=a,u=e.apply(s,l),d||(s=l=null)):!d&&o.trailing!==!1&&(d=setTimeout(f,c)),u}},createRequestAnimationFrame:function(e){var n=null;return e!=="auto"&&e<60&&e>1&&(n=Math.floor(1e3/e)),n===null?window.requestAnimationFrame||t(33):t(n)},calculateDistance:function(e,n){var o=e.x-n.x,i=e.y-n.y;return Math.sqrt(o*o+i*i)}};function t(e){return function(n){window.setTimeout(n,e)}}return an}var ln,qo;function Oc(){if(qo)return ln;qo=1;var t=Et();return ln=function(){var e="",n,o,i,s=[],l={passive:!0},u={passive:!1};t.getGlobalThis().addEventListener?(n="addEventListener",o="removeEventListener"):(n="attachEvent",o="detachEvent",e="on");function d(){return i||(i="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll"),i}function p(v,m){var E=function(S){!S&&(S=window.event);var b={originalEvent:S,target:S.target||S.srcElement,type:"wheel",deltaMode:S.type=="MozMousePixelScroll"?0:1,deltaX:0,delatZ:0,preventDefault:function(){S.preventDefault?S.preventDefault():S.returnValue=!1}};return d()=="mousewheel"?(b.deltaY=-.025*S.wheelDelta,S.wheelDeltaX&&(b.deltaX=-.025*S.wheelDeltaX)):b.deltaY=S.detail,m(b)};return s.push({element:v,fn:E}),E}function f(v){for(var m=0;m<s.length;m++)if(s[m].element===v)return s[m].fn;return function(){}}function a(v){for(var m=0;m<s.length;m++)if(s[m].element===v)return s.splice(m,1)}function c(v,m,E,S){var b;d()==="wheel"?b=E:b=p(v,E),v[n](e+m,b,S?l:u)}function h(v,m,E,S){var b;d()==="wheel"?b=E:b=f(v),v[o](e+m,b,S?l:u),a(v)}function y(v,m,E){c(v,d(),m,E),d()=="DOMMouseScroll"&&c(v,"MozMousePixelScroll",m,E)}function k(v,m,E){h(v,d(),m,E),d()=="DOMMouseScroll"&&h(v,"MozMousePixelScroll",m,E)}return{on:y,off:k}}(),ln}var Xe,Xo;function cn(){if(Xo)return Xe;Xo=1;var t=Et(),e="unknown";return typeof document!="undefined"&&document.documentMode&&(e="ie"),Xe={svgNS:"http://www.w3.org/2000/svg",xmlNS:"http://www.w3.org/XML/1998/namespace",xmlnsNS:"http://www.w3.org/2000/xmlns/",xlinkNS:"http://www.w3.org/1999/xlink",evNS:"http://www.w3.org/2001/xml-events",getBoundingClientRectNormalized:function(n){if(n.clientWidth&&n.clientHeight)return{width:n.clientWidth,height:n.clientHeight};if(n.getBoundingClientRect())return n.getBoundingClientRect();throw new Error("Cannot get BoundingClientRect for SVG.")},getOrCreateViewport:function(n,o){var i=null;if(t.isElement(o)?i=o:i=n.querySelector(o),!i){var s=Array.prototype.slice.call(n.childNodes||n.children).filter(function(f){return f.nodeName!=="defs"&&f.nodeName!=="#text"});s.length===1&&s[0].nodeName==="g"&&s[0].getAttribute("transform")===null&&(i=s[0])}if(!i){var l="viewport-"+new Date().toISOString().replace(/\D/g,"");i=document.createElementNS(this.svgNS,"g"),i.setAttribute("id",l);var u=n.childNodes||n.children;if(u&&u.length>0)for(var d=u.length;d>0;d--)u[u.length-d].nodeName!=="defs"&&i.appendChild(u[u.length-d]);n.appendChild(i)}var p=[];return i.getAttribute("class")&&(p=i.getAttribute("class").split(" ")),~p.indexOf("svg-pan-zoom_viewport")||(p.push("svg-pan-zoom_viewport"),i.setAttribute("class",p.join(" "))),i},setupSvgAttributes:function(n){if(n.setAttribute("xmlns",this.svgNS),n.setAttributeNS(this.xmlnsNS,"xmlns:xlink",this.xlinkNS),n.setAttributeNS(this.xmlnsNS,"xmlns:ev",this.evNS),n.parentNode!==null){var o=n.getAttribute("style")||"";o.toLowerCase().indexOf("overflow")===-1&&n.setAttribute("style","overflow: hidden; "+o)}},internetExplorerRedisplayInterval:300,refreshDefsGlobal:t.throttle(function(){for(var n=document.querySelectorAll("defs"),o=n.length,i=0;i<o;i++){var s=n[i];s.parentNode.insertBefore(s,s)}},Xe?Xe.internetExplorerRedisplayInterval:null),setCTM:function(n,o,i){var s=this,l="matrix("+o.a+","+o.b+","+o.c+","+o.d+","+o.e+","+o.f+")";n.setAttributeNS(null,"transform",l),"transform"in n.style?n.style.transform=l:"-ms-transform"in n.style?n.style["-ms-transform"]=l:"-webkit-transform"in n.style&&(n.style["-webkit-transform"]=l),e==="ie"&&i&&(i.parentNode.insertBefore(i,i),window.setTimeout(function(){s.refreshDefsGlobal()},s.internetExplorerRedisplayInterval))},getEventPoint:function(n,o){var i=o.createSVGPoint();return t.mouseAndTouchNormalize(n,o),i.x=n.clientX,i.y=n.clientY,i},getTouchPoint:function(n,o,i){var s=o.createSVGPoint();return t.touchNormalize(n,o,i),s.x=n.clientX,s.y=n.clientY,s},getSvgCenterPoint:function(n,o,i){return this.createSVGPoint(n,o/2,i/2)},createSVGPoint:function(n,o,i){var s=n.createSVGPoint();return s.x=o,s.y=i,s}},Xe}var un,Ko;function _c(){if(Ko)return un;Ko=1;var t=cn();return un={enable:function(e){var n=e.svg.querySelector("defs");n||(n=document.createElementNS(t.svgNS,"defs"),e.svg.appendChild(n));var o=n.querySelector("style#svg-pan-zoom-controls-styles");if(!o){var i=document.createElementNS(t.svgNS,"style");i.setAttribute("id","svg-pan-zoom-controls-styles"),i.setAttribute("type","text/css"),i.textContent=".svg-pan-zoom-control { cursor: pointer; fill: black; fill-opacity: 0.333; } .svg-pan-zoom-control:hover { fill-opacity: 0.8; } .svg-pan-zoom-control-background { fill: white; fill-opacity: 0.5; } .svg-pan-zoom-control-background { fill-opacity: 0.8; }",n.appendChild(i)}var s=document.createElementNS(t.svgNS,"g");s.setAttribute("id","svg-pan-zoom-controls"),s.setAttribute("transform","translate("+(e.width-70)+" "+(e.height-76)+") scale(0.75)"),s.setAttribute("class","svg-pan-zoom-control"),s.appendChild(this._createZoomIn(e)),s.appendChild(this._createZoomReset(e)),s.appendChild(this._createZoomOut(e)),e.svg.appendChild(s),e.controlIcons=s},_createZoomIn:function(e){var n=document.createElementNS(t.svgNS,"g");n.setAttribute("id","svg-pan-zoom-zoom-in"),n.setAttribute("transform","translate(30.5 5) scale(0.015)"),n.setAttribute("class","svg-pan-zoom-control"),n.addEventListener("click",function(){e.getPublicInstance().zoomIn()},!1),n.addEventListener("touchstart",function(){e.getPublicInstance().zoomIn()},!1);var o=document.createElementNS(t.svgNS,"rect");o.setAttribute("x","0"),o.setAttribute("y","0"),o.setAttribute("width","1500"),o.setAttribute("height","1400"),o.setAttribute("class","svg-pan-zoom-control-background"),n.appendChild(o);var i=document.createElementNS(t.svgNS,"path");return i.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-320v320q0 26 -19 45t-45 19h-128q-26 0 -45 -19t-19 -45v-320h-320q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h320v-320q0 -26 19 -45t45 -19h128q26 0 45 19t19 45v320h320q26 0 45 19t19 45zM1536 1120v-960 q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5t84.5 -203.5z"),i.setAttribute("class","svg-pan-zoom-control-element"),n.appendChild(i),n},_createZoomReset:function(e){var n=document.createElementNS(t.svgNS,"g");n.setAttribute("id","svg-pan-zoom-reset-pan-zoom"),n.setAttribute("transform","translate(5 35) scale(0.4)"),n.setAttribute("class","svg-pan-zoom-control"),n.addEventListener("click",function(){e.getPublicInstance().reset()},!1),n.addEventListener("touchstart",function(){e.getPublicInstance().reset()},!1);var o=document.createElementNS(t.svgNS,"rect");o.setAttribute("x","2"),o.setAttribute("y","2"),o.setAttribute("width","182"),o.setAttribute("height","58"),o.setAttribute("class","svg-pan-zoom-control-background"),n.appendChild(o);var i=document.createElementNS(t.svgNS,"path");i.setAttribute("d","M33.051,20.632c-0.742-0.406-1.854-0.609-3.338-0.609h-7.969v9.281h7.769c1.543,0,2.701-0.188,3.473-0.562c1.365-0.656,2.048-1.953,2.048-3.891C35.032,22.757,34.372,21.351,33.051,20.632z"),i.setAttribute("class","svg-pan-zoom-control-element"),n.appendChild(i);var s=document.createElementNS(t.svgNS,"path");return s.setAttribute("d","M170.231,0.5H15.847C7.102,0.5,0.5,5.708,0.5,11.84v38.861C0.5,56.833,7.102,61.5,15.847,61.5h154.384c8.745,0,15.269-4.667,15.269-10.798V11.84C185.5,5.708,178.976,0.5,170.231,0.5z M42.837,48.569h-7.969c-0.219-0.766-0.375-1.383-0.469-1.852c-0.188-0.969-0.289-1.961-0.305-2.977l-0.047-3.211c-0.03-2.203-0.41-3.672-1.142-4.406c-0.732-0.734-2.103-1.102-4.113-1.102h-7.05v13.547h-7.055V14.022h16.524c2.361,0.047,4.178,0.344,5.45,0.891c1.272,0.547,2.351,1.352,3.234,2.414c0.731,0.875,1.31,1.844,1.737,2.906s0.64,2.273,0.64,3.633c0,1.641-0.414,3.254-1.242,4.84s-2.195,2.707-4.102,3.363c1.594,0.641,2.723,1.551,3.387,2.73s0.996,2.98,0.996,5.402v2.32c0,1.578,0.063,2.648,0.19,3.211c0.19,0.891,0.635,1.547,1.333,1.969V48.569z M75.579,48.569h-26.18V14.022h25.336v6.117H56.454v7.336h16.781v6H56.454v8.883h19.125V48.569z M104.497,46.331c-2.44,2.086-5.887,3.129-10.34,3.129c-4.548,0-8.125-1.027-10.731-3.082s-3.909-4.879-3.909-8.473h6.891c0.224,1.578,0.662,2.758,1.316,3.539c1.196,1.422,3.246,2.133,6.15,2.133c1.739,0,3.151-0.188,4.236-0.562c2.058-0.719,3.087-2.055,3.087-4.008c0-1.141-0.504-2.023-1.512-2.648c-1.008-0.609-2.607-1.148-4.796-1.617l-3.74-0.82c-3.676-0.812-6.201-1.695-7.576-2.648c-2.328-1.594-3.492-4.086-3.492-7.477c0-3.094,1.139-5.664,3.417-7.711s5.623-3.07,10.036-3.07c3.685,0,6.829,0.965,9.431,2.895c2.602,1.93,3.966,4.73,4.093,8.402h-6.938c-0.128-2.078-1.057-3.555-2.787-4.43c-1.154-0.578-2.587-0.867-4.301-0.867c-1.907,0-3.428,0.375-4.565,1.125c-1.138,0.75-1.706,1.797-1.706,3.141c0,1.234,0.561,2.156,1.682,2.766c0.721,0.406,2.25,0.883,4.589,1.43l6.063,1.43c2.657,0.625,4.648,1.461,5.975,2.508c2.059,1.625,3.089,3.977,3.089,7.055C108.157,41.624,106.937,44.245,104.497,46.331z M139.61,48.569h-26.18V14.022h25.336v6.117h-18.281v7.336h16.781v6h-16.781v8.883h19.125V48.569z M170.337,20.14h-10.336v28.43h-7.266V20.14h-10.383v-6.117h27.984V20.14z"),s.setAttribute("class","svg-pan-zoom-control-element"),n.appendChild(s),n},_createZoomOut:function(e){var n=document.createElementNS(t.svgNS,"g");n.setAttribute("id","svg-pan-zoom-zoom-out"),n.setAttribute("transform","translate(30.5 70) scale(0.015)"),n.setAttribute("class","svg-pan-zoom-control"),n.addEventListener("click",function(){e.getPublicInstance().zoomOut()},!1),n.addEventListener("touchstart",function(){e.getPublicInstance().zoomOut()},!1);var o=document.createElementNS(t.svgNS,"rect");o.setAttribute("x","0"),o.setAttribute("y","0"),o.setAttribute("width","1500"),o.setAttribute("height","1400"),o.setAttribute("class","svg-pan-zoom-control-background"),n.appendChild(o);var i=document.createElementNS(t.svgNS,"path");return i.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-896q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h896q26 0 45 19t19 45zM1536 1120v-960q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5 t84.5 -203.5z"),i.setAttribute("class","svg-pan-zoom-control-element"),n.appendChild(i),n},disable:function(e){e.controlIcons&&(e.controlIcons.parentNode.removeChild(e.controlIcons),e.controlIcons=null)}},un}var dn,Yo;function Bc(){if(Yo)return dn;Yo=1;var t=cn(),e=Et(),n=function(o,i){this.init(o,i)};return n.prototype.init=function(o,i){this.viewport=o,this.options=i,this.originalState={zoom:1,x:0,y:0},this.activeState={zoom:1,x:0,y:0},this.updateCTMCached=e.proxy(this.updateCTM,this),this.requestAnimationFrame=e.createRequestAnimationFrame(this.options.refreshRate),this.viewBox={x:0,y:0,width:0,height:0},this.cacheViewBox();var s=this.processCTM();this.setCTM(s),this.updateCTM()},n.prototype.cacheViewBox=function(){var o=this.options.svg.getAttribute("viewBox");if(o){var i=o.split(/[\s\,]/).filter(function(l){return l}).map(parseFloat);this.viewBox.x=i[0],this.viewBox.y=i[1],this.viewBox.width=i[2],this.viewBox.height=i[3];var s=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height);this.activeState.zoom=isFinite(s)?s:1,this.activeState.x=(this.options.width-this.viewBox.width*s)/2,this.activeState.y=(this.options.height-this.viewBox.height*s)/2,this.updateCTMOnNextFrame(),this.options.svg.removeAttribute("viewBox")}else this.simpleViewBoxCache()},n.prototype.simpleViewBoxCache=function(){var o=this.viewport.getBBox();this.viewBox.x=o.x,this.viewBox.y=o.y,this.viewBox.width=o.width,this.viewBox.height=o.height},n.prototype.getViewBox=function(){return e.extend({},this.viewBox)},n.prototype.processCTM=function(){var o=this.getCTM();if(this.options.fit||this.options.contain){var i;this.options.fit?i=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height):i=Math.max(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height),i=isFinite(i)?i:1,o.a=i,o.d=i,o.e=-this.viewBox.x*i,o.f=-this.viewBox.y*i}if(this.options.center){var s=(this.options.width-(this.viewBox.width+this.viewBox.x*2)*o.a)*.5,l=(this.options.height-(this.viewBox.height+this.viewBox.y*2)*o.a)*.5;o.e=s,o.f=l}return this.originalState.zoom=o.a,this.originalState.x=o.e,this.originalState.y=o.f,o},n.prototype.getOriginalState=function(){return e.extend({},this.originalState)},n.prototype.getState=function(){return e.extend({},this.activeState)},n.prototype.getZoom=function(){return this.activeState.zoom},n.prototype.getRelativeZoom=function(){return this.activeState.zoom/this.originalState.zoom},n.prototype.computeRelativeZoom=function(o){return o/this.originalState.zoom},n.prototype.getPan=function(){return{x:this.activeState.x,y:this.activeState.y}},n.prototype.getCTM=function(){var o=this.options.svg.createSVGMatrix();return o.a=this.activeState.zoom,o.b=0,o.c=0,o.d=this.activeState.zoom,o.e=this.activeState.x,o.f=this.activeState.y,o},n.prototype.setCTM=function(o){var i=this.isZoomDifferent(o),s=this.isPanDifferent(o);if(i||s){if(i&&(this.options.beforeZoom(this.getRelativeZoom(),this.computeRelativeZoom(o.a))===!1?(o.a=o.d=this.activeState.zoom,i=!1):(this.updateCache(o),this.options.onZoom(this.getRelativeZoom()))),s){var l=this.options.beforePan(this.getPan(),{x:o.e,y:o.f}),u=!1,d=!1;l===!1?(o.e=this.getPan().x,o.f=this.getPan().y,u=d=!0):e.isObject(l)&&(l.x===!1?(o.e=this.getPan().x,u=!0):e.isNumber(l.x)&&(o.e=l.x),l.y===!1?(o.f=this.getPan().y,d=!0):e.isNumber(l.y)&&(o.f=l.y)),u&&d||!this.isPanDifferent(o)?s=!1:(this.updateCache(o),this.options.onPan(this.getPan()))}(i||s)&&this.updateCTMOnNextFrame()}},n.prototype.isZoomDifferent=function(o){return this.activeState.zoom!==o.a},n.prototype.isPanDifferent=function(o){return this.activeState.x!==o.e||this.activeState.y!==o.f},n.prototype.updateCache=function(o){this.activeState.zoom=o.a,this.activeState.x=o.e,this.activeState.y=o.f},n.prototype.pendingUpdate=!1,n.prototype.updateCTMOnNextFrame=function(){this.pendingUpdate||(this.pendingUpdate=!0,this.requestAnimationFrame.call(window,this.updateCTMCached))},n.prototype.updateCTM=function(){var o=this.getCTM();t.setCTM(this.viewport,o,this.defs),this.pendingUpdate=!1,this.options.onUpdatedCTM&&this.options.onUpdatedCTM(o)},dn=function(o,i){return new n(o,i)},dn}var fn,Qo;function zc(){if(Qo)return fn;Qo=1;var t=Oc(),e=_c(),n=Et(),o=cn(),i=Bc(),s=function(a,c){this.init(a,c)},l={viewportSelector:".svg-pan-zoom_viewport",panEnabled:!0,controlIconsEnabled:!1,zoomEnabled:!0,dblClickZoomEnabled:!0,mouseWheelZoomEnabled:!0,preventMouseEventsDefault:!0,zoomScaleSensitivity:.1,minZoom:.5,maxZoom:10,fit:!0,contain:!1,center:!0,refreshRate:"auto",beforeZoom:null,onZoom:null,beforePan:null,onPan:null,customEventsHandler:null,eventsListenerElement:null,onUpdatedCTM:null},u={passive:!0},d={passive:!1};s.prototype.init=function(a,c){var h=this;this.svg=a,this.defs=a.querySelector("defs"),o.setupSvgAttributes(this.svg),this.options=n.extend(n.extend({},l),c),this.state="none";var y=o.getBoundingClientRectNormalized(a);this.width=y.width,this.height=y.height,this.viewport=i(o.getOrCreateViewport(this.svg,this.options.viewportSelector),{svg:this.svg,width:this.width,height:this.height,fit:this.options.fit,contain:this.options.contain,center:this.options.center,refreshRate:this.options.refreshRate,beforeZoom:function(v,m){if(h.viewport&&h.options.beforeZoom)return h.options.beforeZoom(v,m)},onZoom:function(v){if(h.viewport&&h.options.onZoom)return h.options.onZoom(v)},beforePan:function(v,m){if(h.viewport&&h.options.beforePan)return h.options.beforePan(v,m)},onPan:function(v){if(h.viewport&&h.options.onPan)return h.options.onPan(v)},onUpdatedCTM:function(v){if(h.viewport&&h.options.onUpdatedCTM)return h.options.onUpdatedCTM(v)}});var k=this.getPublicInstance();k.setBeforeZoom(this.options.beforeZoom),k.setOnZoom(this.options.onZoom),k.setBeforePan(this.options.beforePan),k.setOnPan(this.options.onPan),k.setOnUpdatedCTM(this.options.onUpdatedCTM),this.options.controlIconsEnabled&&e.enable(this),this.lastMouseWheelEventTime=Date.now(),this.setupHandlers()},s.prototype.setupHandlers=function(){var a=this,c=null;if(this.eventListeners={pointerdown:function(v){if(v.pointerType!=="touch"){var m=a.handleMouseDown(v,c);return c=v,m}},touchstart:function(v){var m=a.handleTouchStart(v,c);return c=v,m},pointerup:function(v){if(v.pointerType!=="touch")return a.handleMouseUp(v)},touchend:function(v){return a.handleTouchEnd(v)},pointermove:function(v){if(v.pointerType!=="touch")return a.handleMouseMove(v)},touchmove:function(v){return a.handleTouchMove(v)},pointerleave:function(v){if(v.pointerType!=="touch")return a.handleMouseUp(v)},pointercancel:function(v){if(v.pointerType!=="touch")return a.handleMouseUp(v)},touchleave:function(v){return a.handleTouchEnd(v)},touchcancel:function(v){return a.handleTouchEnd(v)}},this.options.customEventsHandler!=null){this.options.customEventsHandler.init({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});var h=this.options.customEventsHandler.haltEventListeners;if(h&&h.length)for(var y=h.length-1;y>=0;y--)this.eventListeners.hasOwnProperty(h[y])&&delete this.eventListeners[h[y]]}for(var k in this.eventListeners)(this.options.eventsListenerElement||this.svg).addEventListener(k,this.eventListeners[k],this.options.preventMouseEventsDefault?d:u);this.options.mouseWheelZoomEnabled&&(this.options.mouseWheelZoomEnabled=!1,this.enableMouseWheelZoom())},s.prototype.enableMouseWheelZoom=function(){if(!this.options.mouseWheelZoomEnabled){var a=this;this.wheelListener=function(h){return a.handleMouseWheel(h)};var c=!this.options.preventMouseEventsDefault;t.on(this.options.eventsListenerElement||this.svg,this.wheelListener,c),this.options.mouseWheelZoomEnabled=!0}},s.prototype.disableMouseWheelZoom=function(){if(this.options.mouseWheelZoomEnabled){var a=!this.options.preventMouseEventsDefault;t.off(this.options.eventsListenerElement||this.svg,this.wheelListener,a),this.options.mouseWheelZoomEnabled=!1}},s.prototype.handleMouseWheel=function(a){if(!(!this.options.zoomEnabled||this.state!=="none")){this.options.preventMouseEventsDefault&&(a.preventDefault?a.preventDefault():a.returnValue=!1);var c=a.deltaY||1,h=Date.now()-this.lastMouseWheelEventTime,y=3+Math.max(0,30-h);this.lastMouseWheelEventTime=Date.now(),"deltaMode"in a&&a.deltaMode===0&&a.wheelDelta&&(c=a.deltaY===0?0:Math.abs(a.wheelDelta)/a.deltaY),c=-.3<c&&c<.3?c:(c>0?1:-1)*Math.log(Math.abs(c)+10)/y;var k=this.svg.getScreenCTM().inverse(),v=o.getEventPoint(a,this.svg).matrixTransform(k),m=Math.pow(1+this.options.zoomScaleSensitivity,-1*c);this.zoomAtPoint(m,v)}},s.prototype.zoomAtPoint=function(a,c,h){var y=this.viewport.getOriginalState();h?(a=Math.max(this.options.minZoom*y.zoom,Math.min(this.options.maxZoom*y.zoom,a)),a=a/this.getZoom()):this.getZoom()*a<this.options.minZoom*y.zoom?a=this.options.minZoom*y.zoom/this.getZoom():this.getZoom()*a>this.options.maxZoom*y.zoom&&(a=this.options.maxZoom*y.zoom/this.getZoom());var k=this.viewport.getCTM(),v=c.matrixTransform(k.inverse()),m=this.svg.createSVGMatrix().translate(v.x,v.y).scale(a).translate(-v.x,-v.y),E=k.multiply(m);E.a!==k.a&&this.viewport.setCTM(E)},s.prototype.zoom=function(a,c){this.zoomAtPoint(a,o.getSvgCenterPoint(this.svg,this.width,this.height),c)},s.prototype.publicZoom=function(a,c){c&&(a=this.computeFromRelativeZoom(a)),this.zoom(a,c)},s.prototype.publicZoomAtPoint=function(a,c,h){if(h&&(a=this.computeFromRelativeZoom(a)),n.getType(c)!=="SVGPoint")if("x"in c&&"y"in c)c=o.createSVGPoint(this.svg,c.x,c.y);else throw new Error("Given point is invalid");this.zoomAtPoint(a,c,h)},s.prototype.getZoom=function(){return this.viewport.getZoom()},s.prototype.getRelativeZoom=function(){return this.viewport.getRelativeZoom()},s.prototype.computeFromRelativeZoom=function(a){return a*this.viewport.getOriginalState().zoom},s.prototype.resetZoom=function(){var a=this.viewport.getOriginalState();this.zoom(a.zoom,!0)},s.prototype.resetPan=function(){this.pan(this.viewport.getOriginalState())},s.prototype.reset=function(){this.resetZoom(),this.resetPan()},s.prototype.handleDblClick=function(a){if(this.options.preventMouseEventsDefault&&(a.preventDefault?a.preventDefault():a.returnValue=!1),this.options.controlIconsEnabled){var c=a.target.getAttribute("class")||"";if(c.indexOf("svg-pan-zoom-control")>-1)return!1}var h;a.shiftKey?h=1/((1+this.options.zoomScaleSensitivity)*2):h=(1+this.options.zoomScaleSensitivity)*2;var y=o.getEventPoint(a,this.svg).matrixTransform(this.svg.getScreenCTM().inverse());this.zoomAtPoint(h,y)},s.prototype.handleMouseDown=function(a,c){this.options.preventMouseEventsDefault&&(a.preventDefault?a.preventDefault():a.returnValue=!1),n.mouseAndTouchNormalize(a,this.svg),this.options.dblClickZoomEnabled&&n.isDblClick(a,c)?this.handleDblClick(a):(this.state="pan",this.firstEventCTM=this.viewport.getCTM(),this.stateOrigin=o.getEventPoint(a,this.svg).matrixTransform(this.firstEventCTM.inverse()))},s.prototype.handleMouseMove=function(a){if(this.options.preventMouseEventsDefault&&(a.preventDefault?a.preventDefault():a.returnValue=!1),this.state==="pan"&&this.options.panEnabled){var c=o.getEventPoint(a,this.svg).matrixTransform(this.firstEventCTM.inverse()),h=this.firstEventCTM.translate(c.x-this.stateOrigin.x,c.y-this.stateOrigin.y);this.viewport.setCTM(h)}},s.prototype.handleMouseUp=function(a){this.options.preventMouseEventsDefault&&(a.preventDefault?a.preventDefault():a.returnValue=!1),this.state==="pan"&&(this.state="none")},s.prototype.handleTouchStart=function(a,c){if(a.touches.length==1)this.handleMouseDown(a,c);else{this.options.preventMouseEventsDefault&&(a.preventDefault?a.preventDefault():a.returnValue=!1),this.firstEventCTM=this.viewport.getCTM();var h=o.getTouchPoint(a,this.svg,0),y=o.getTouchPoint(a,this.svg,1);this.firstDistance=n.calculateDistance(h,y),h.x=(h.x+y.x)/2,h.y=(h.y+y.y)/2,this.stateOrigin=h.matrixTransform(this.firstEventCTM.inverse()),this.firstZoomLevel=this.getZoom()}},s.prototype.handleTouchMove=function(a){if(a.touches.length==1)this.handleMouseMove(a);else{if(this.options.preventMouseEventsDefault&&(a.preventDefault?a.preventDefault():a.returnValue=!1),!this.options.panEnabled&&!this.options.zoomEnabled)return;var c=o.getTouchPoint(a,this.svg,0),h=o.getTouchPoint(a,this.svg,1),y=this.svg.createSVGPoint();if(y.x=(c.x+h.x)/2,y.y=(c.y+h.y)/2,this.state==="pan"&&this.options.panEnabled){var k=y.matrixTransform(this.firstEventCTM.inverse()),v=this.firstEventCTM.translate(k.x-this.stateOrigin.x,k.y-this.stateOrigin.y);this.viewport.setCTM(v)}if(this.options.zoomEnabled){var m=n.calculateDistance(c,h),E=m/this.firstDistance,S=this.svg.getScreenCTM().inverse(),b=y.matrixTransform(S);this.zoomAtPoint(this.firstZoomLevel*E,b,!0)}}},s.prototype.handleTouchEnd=function(a){if(a.touches.length==0)this.handleMouseUp(a);else if(this.options.preventMouseEventsDefault&&(a.preventDefault?a.preventDefault():a.returnValue=!1),this.firstEventCTM=this.viewport.getCTM(),a.touches.length==1)this.stateOrigin=o.getEventPoint(a,this.svg).matrixTransform(this.firstEventCTM.inverse());else{var c=o.getTouchPoint(a,this.svg,0),h=o.getTouchPoint(a,this.svg,1);this.firstDistance=n.calculateDistance(c,h),c.x=(c.x+h.x)/2,c.y=(c.y+h.y)/2,this.stateOrigin=c.matrixTransform(this.firstEventCTM.inverse())}},s.prototype.fit=function(){var a=this.viewport.getViewBox(),c=Math.min(this.width/a.width,this.height/a.height);this.zoom(c,!0)},s.prototype.contain=function(){var a=this.viewport.getViewBox(),c=Math.max(this.width/a.width,this.height/a.height);this.zoom(c,!0)},s.prototype.center=function(){var a=this.viewport.getViewBox(),c=(this.width-(a.width+a.x*2)*this.getZoom())*.5,h=(this.height-(a.height+a.y*2)*this.getZoom())*.5;this.getPublicInstance().pan({x:c,y:h})},s.prototype.updateBBox=function(){this.viewport.simpleViewBoxCache()},s.prototype.pan=function(a){var c=this.viewport.getCTM();c.e=a.x,c.f=a.y,this.viewport.setCTM(c)},s.prototype.panBy=function(a){var c=this.viewport.getCTM();c.e+=a.x,c.f+=a.y,this.viewport.setCTM(c)},s.prototype.getPan=function(){var a=this.viewport.getState();return{x:a.x,y:a.y}},s.prototype.resize=function(){var a=o.getBoundingClientRectNormalized(this.svg);this.width=a.width,this.height=a.height;var c=this.viewport;c.options.width=this.width,c.options.height=this.height,c.processCTM(),this.options.controlIconsEnabled&&(this.getPublicInstance().disableControlIcons(),this.getPublicInstance().enableControlIcons())},s.prototype.destroy=function(){var a=this;this.beforeZoom=null,this.onZoom=null,this.beforePan=null,this.onPan=null,this.onUpdatedCTM=null,this.options.customEventsHandler!=null&&this.options.customEventsHandler.destroy({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});for(var c in this.eventListeners)(this.options.eventsListenerElement||this.svg).removeEventListener(c,this.eventListeners[c],this.options.preventMouseEventsDefault?d:u);this.disableMouseWheelZoom(),this.getPublicInstance().disableControlIcons(),p=p.filter(function(h){return h.svg!==a.svg}),delete this.options,delete this.viewport,delete this.publicInstance,delete this.pi,this.getPublicInstance=function(){return null}},s.prototype.getPublicInstance=function(){var a=this;return this.publicInstance||(this.publicInstance=this.pi={enablePan:function(){return a.options.panEnabled=!0,a.pi},disablePan:function(){return a.options.panEnabled=!1,a.pi},isPanEnabled:function(){return!!a.options.panEnabled},pan:function(c){return a.pan(c),a.pi},panBy:function(c){return a.panBy(c),a.pi},getPan:function(){return a.getPan()},setBeforePan:function(c){return a.options.beforePan=c===null?null:n.proxy(c,a.publicInstance),a.pi},setOnPan:function(c){return a.options.onPan=c===null?null:n.proxy(c,a.publicInstance),a.pi},enableZoom:function(){return a.options.zoomEnabled=!0,a.pi},disableZoom:function(){return a.options.zoomEnabled=!1,a.pi},isZoomEnabled:function(){return!!a.options.zoomEnabled},enableControlIcons:function(){return a.options.controlIconsEnabled||(a.options.controlIconsEnabled=!0,e.enable(a)),a.pi},disableControlIcons:function(){return a.options.controlIconsEnabled&&(a.options.controlIconsEnabled=!1,e.disable(a)),a.pi},isControlIconsEnabled:function(){return!!a.options.controlIconsEnabled},enableDblClickZoom:function(){return a.options.dblClickZoomEnabled=!0,a.pi},disableDblClickZoom:function(){return a.options.dblClickZoomEnabled=!1,a.pi},isDblClickZoomEnabled:function(){return!!a.options.dblClickZoomEnabled},enableMouseWheelZoom:function(){return a.enableMouseWheelZoom(),a.pi},disableMouseWheelZoom:function(){return a.disableMouseWheelZoom(),a.pi},isMouseWheelZoomEnabled:function(){return!!a.options.mouseWheelZoomEnabled},setZoomScaleSensitivity:function(c){return a.options.zoomScaleSensitivity=c,a.pi},setMinZoom:function(c){return a.options.minZoom=c,a.pi},setMaxZoom:function(c){return a.options.maxZoom=c,a.pi},setBeforeZoom:function(c){return a.options.beforeZoom=c===null?null:n.proxy(c,a.publicInstance),a.pi},setOnZoom:function(c){return a.options.onZoom=c===null?null:n.proxy(c,a.publicInstance),a.pi},zoom:function(c){return a.publicZoom(c,!0),a.pi},zoomBy:function(c){return a.publicZoom(c,!1),a.pi},zoomAtPoint:function(c,h){return a.publicZoomAtPoint(c,h,!0),a.pi},zoomAtPointBy:function(c,h){return a.publicZoomAtPoint(c,h,!1),a.pi},zoomIn:function(){return this.zoomBy(1+a.options.zoomScaleSensitivity),a.pi},zoomOut:function(){return this.zoomBy(1/(1+a.options.zoomScaleSensitivity)),a.pi},getZoom:function(){return a.getRelativeZoom()},setOnUpdatedCTM:function(c){return a.options.onUpdatedCTM=c===null?null:n.proxy(c,a.publicInstance),a.pi},resetZoom:function(){return a.resetZoom(),a.pi},resetPan:function(){return a.resetPan(),a.pi},reset:function(){return a.reset(),a.pi},fit:function(){return a.fit(),a.pi},contain:function(){return a.contain(),a.pi},center:function(){return a.center(),a.pi},updateBBox:function(){return a.updateBBox(),a.pi},resize:function(){return a.resize(),a.pi},getSizes:function(){return{width:a.width,height:a.height,realZoom:a.getZoom(),viewBox:a.viewport.getViewBox()}},destroy:function(){return a.destroy(),a.pi}}),this.publicInstance};var p=[],f=function(a,c){var h=n.getSvg(a);if(h===null)return null;for(var y=p.length-1;y>=0;y--)if(p[y].svg===h)return p[y].instance.getPublicInstance();return p.push({svg:h,instance:new s(h,c)}),p[p.length-1].instance.getPublicInstance()};return fn=f,fn}var Ic=zc();const $c=Tc(Ic),Ac={getViewArea(){const t=this.getSizes(),e=this.getPan(),n=t.realZoom;e.x/=n,e.y/=n;const o={width:t.width/n,height:t.height/n};return{box:{top:-e.y,bottom:o.height-e.y,left:-e.x,right:o.width-e.x},center:{x:o.width/2-e.x,y:o.height/2-e.y}}},getViewBox(){return this.getViewArea().box},setViewBox(t){const e=t.right-t.left,n=t.bottom-t.top,{width:o,height:i}=this.getSizes(),s=e/n,l=o/i,u=s<l?n*l:e,d=s>l?e/l:n,p=Math.min(o/u,i/d),f=this.getRealZoom(),a=this.getZoom(),c=f/a;this.zoom(p/c);const h={x:(t.left+e/2)*p,y:(t.top+n/2)*p};this.pan({x:-h.x+u/2*p,y:-h.y+d/2*p})},getRealZoom(){return this.getSizes().realZoom},applyAbsoluteZoomLevel(t,e,n){const o=Math.max(1e-4,e),i=Math.max(o,n),s=Math.max(Math.min(i,t),o),l=this.getRealZoom(),u=this.getZoom(),d=l/u;this.setMinZoom(o/d).setMaxZoom(i/d).zoom(s/d)},isPanEnabled(){return this._isPanEnabled},enablePan(){return this._isPanEnabled=!0,this._internalEnablePan(),this},disablePan(){return this._isPanEnabled=!1,this._internalDisablePan(),this},isZoomEnabled(){return this._isZoomEnabled},enableZoom(){return this._isZoomEnabled=!0,this._internalEnableZoom(),this},disableZoom(){return this._isZoomEnabled=!1,this._internalDisableZoom(),this},setPanEnabled(t){return t?this.enablePan():this.disablePan(),this},setZoomEnabled(t){return t?(this.enableZoom(),this.enableDblClickZoom()):(this.disableZoom(),this.disableDblClickZoom()),this}};function Lc(t,e){var o,i;const n=t;return n._isPanEnabled=(o=e.panEnabled)!=null?o:!0,n._isZoomEnabled=(i=e==null?void 0:e.zoomEnabled)!=null?i:!0,n._internalIsPanEnabled=n.isPanEnabled,n._internalEnablePan=n.enablePan,n._internalDisablePan=n.disablePan,n._internalIsZoomEnabled=n.isZoomEnabled,n._internalEnableZoom=n.enableZoom,n._internalDisableZoom=n.disableZoom,Object.assign(t,Ac),n}function Nc(t,e){var s,l,u,d,p,f;const n=(l=(s=e.customEventsHandler)==null?void 0:s.init)!=null?l:a=>{},o=(d=(u=e.customEventsHandler)==null?void 0:u.destroy)!=null?d:a=>{},i=(f=(p=e.customEventsHandler)==null?void 0:p.haltEventListeners)!=null?f:[];return e.mouseWheelZoomEnabled===void 0&&(e.mouseWheelZoomEnabled=e.zoomEnabled),e.customEventsHandler={init:a=>{Lc(a.instance,e),n(a)},destroy:a=>o(a),haltEventListeners:i},$c(t,e)}function jc(t,e){const n=r.ref();let o=0;const i=[],s=[],l=()=>{o=1,i.forEach(f=>f()),i.length=0},u=()=>{o=2,s.forEach(f=>f()),s.length=0};return r.onMounted(()=>{var k,v,m,E,S,b;const f=Z(t.value,"<svg>"),a=(v=(k=e.customEventsHandler)==null?void 0:k.init)!=null?v:g=>{},c=(E=(m=e.customEventsHandler)==null?void 0:m.destroy)!=null?E:g=>{},h=(b=(S=e.customEventsHandler)==null?void 0:S.haltEventListeners)!=null?b:[];e.customEventsHandler={init:g=>{n.value=g.instance,a(g),l()},destroy:g=>{u(),c(g)},haltEventListeners:h};const y=()=>{const g=f.getBoundingClientRect();g.width!==0&&g.height!==0?Nc(f,e):setTimeout(y,200)};y()}),r.onUnmounted(()=>{var f;(f=n.value)==null||f.destroy(),n.value=void 0}),{svgPanZoom:n,onSvgPanZoomMounted:f=>{o===0?i.push(f):o===1&&f()},onSvgPanZoomUnmounted:f=>{o===0||o===1?s.push(f):f()}}}const Jo=Symbol("zoomLevel");function Dc(t,e){const n=r.computed(()=>e.scalingObjects?1:1/t.value);return r.provide(Jo,{zoomLevel:t,scale:n}),{scale:n}}function J(){return Z(r.inject(Jo),"zoomLevel")}function Zc(t){return t instanceof Promise||t&&typeof t.then=="function"}function Rc(){let t=null;const e=r.ref({enabled:!1,duration:300,timingFunction:"linear"});function n(o,i=300,s="linear"){t&&(clearTimeout(t),t=null),e.value={enabled:!0,duration:i,timingFunction:s},r.nextTick(()=>re(this,null,function*(){const l=o();Zc(l)&&(yield l),t&&clearTimeout(t),t=window==null?void 0:window.setTimeout(()=>{e.value.enabled=!1,t=null},i)}))}return{transitionWhile:n,transitionOption:e}}function Vc(t){const e=r.ref({}),n=r.ref(!1);let o=1;const i=new Map;return r.watchEffect(()=>{if(t.value instanceof Array){const s=new Set([]);if(e.value=Object.fromEntries(t.value.map(l=>{let u=l.id;return u||(n.value||(n.value=!0,console.warn("[v-network-graph] Please specify the `id` field for the `Path` object. Currently, this works for compatibility, but in the future, the id field will be required.")),u=i.get(l),u||(u="path-"+o++,i.set(l,u))),s.add(u),[u,l]})),n.value)for(const[l,u]of Array.from(i.entries()))s.has(u)||i.delete(l)}else e.value=t.value}),{objects:e,isInCompatibilityModeForPath:n}}function Hc(t,e,n,o){if(o){const s=r.ref(o(t[e])),l=u=>{me(u,s.value)||(s.value=u),me(u,t[e])||n(`update:${e}`,u)};return r.watch(()=>o(s.value),l),r.watch(()=>t[e],u=>l(o(u))),s.value!==t[e]&&n(`update:${e}`,s.value),s}const i=r.ref(t[e]);return r.watch(()=>t[e],s=>{me(s,i.value)||(i.value=s)}),r.watch(i,s=>{me(s,t[e])||n(`update:${e}`,s)}),i}function hn(t,e,n,o){const i=r.reactive(new Set);return r.watch(()=>t[e],()=>{const l=t[e].filter(u=>u in n.value);me(l,Array.from(i))||(i.clear(),l.forEach(i.add,i))},{deep:!0,immediate:!0}),r.watch(i,()=>{const s=Array.from(i);me(t[e],s)||o(`update:${e}`,s)}),ie(i)}const er=Symbol("selection");function Fc(t,e,n){r.provide(er,{selectedNodes:t,selectedEdges:e,selectedPaths:n})}function Wc(){return Z(r.inject(er),"Selections")}const tr=Symbol("layouts");function Uc(t){r.provide(tr,t)}function pn(){return Z(r.inject(tr),"Layouts")}function Gc(t,e){for(let n=0;n<t.length-1;n++)e(t[n],t[n+1])}function Ke(t,e){const n=t.indexOf(e);n>=0&&t.splice(n,1)}function qc(t,e,n){const o=t.indexOf(e);o<0||t.splice(o+1,0,n)}function Xc(t,e){const n=["edges","edge-labels","focusring","nodes","node-labels","paths"];return r.computed(()=>{const o=vl(t.view.builtInLayerOrder).filter(s=>{const l=n.includes(s);return l||console.warn(`Layer ${s} is not a built-in layer.`),l}).reverse(),i=[...n];return Gc(o,(s,l)=>{Ke(i,l),qc(i,s,l)}),"edge-label"in e||"edges-label"in e||Ke(i,"edge-labels"),t.node.focusring.visible||Ke(i,"focusring"),t.node.label.visible===!1&&Ke(i,"node-labels"),t.path.visible||Ke(i,"paths"),i})}const nr=()=>new Promise(t=>r.nextTick(t));function Kc(t,e){const n=Math.max(t.width,t.height,e.width,e.height)/1e4;return Math.abs(t.x-e.x)<n&&Math.abs(t.y-e.y)<n&&Math.abs(t.width-e.width)<n&&Math.abs(t.height-e.height)<n}function Yc(t,e){return{top:t.top+e.top,left:t.left+e.left,right:t.right+e.right,bottom:t.bottom+e.bottom}}function Qc(t,e){return{top:t.top*e,left:t.left*e,right:t.right*e,bottom:t.bottom*e}}function Jc(t,e){return{top:t.top/e,left:t.left/e,right:t.right/e,bottom:t.bottom/e}}function or(t){return{top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function rr(t){return{x:t.left,y:t.top,width:t.right-t.left,height:t.bottom-t.top}}function eu(t,e){return{top:Math.min(t.top,e.top),left:Math.min(t.left,e.left),right:Math.max(t.right,e.right),bottom:Math.max(t.bottom,e.bottom)}}const tu=new RegExp("^\\d+$");function nu(t,e){let n={top:0,left:0,right:0,bottom:0};if(typeof t=="string"){const o=$e(t,e.width),i=$e(t,e.height);o===void 0||i===void 0?console.warn("Invalid `fitContentMargin` value.",t):n={top:i,left:o,right:o,bottom:i}}else if(typeof t=="number"){const o=t;n={top:o,left:o,right:o,bottom:o}}else{if(t.top){const o=$e(t.top,e.height);o===void 0?console.warn("Invalid `fitContentMargin` value.",t.top):n.top=o}if(t.left){const o=$e(t.left,e.width);o===void 0?console.warn("Invalid `fitContentMargin` value.",t.left):n.left=o}if(t.right){const o=$e(t.right,e.width);o===void 0?console.warn("Invalid `fitContentMargin` value.",t.right):n.right=o}if(t.bottom){const o=$e(t.bottom,e.height);o===void 0?console.warn("Invalid `fitContentMargin` value.",t.bottom):n.bottom=o}}return n}function ou(t,e,n,o,i,s){const l=t.getBBox();if(s)return iu(l,e,n,i);{const u=ru(t);return su(l,u,e,n,o,i)}}function $e(t,e){if(typeof t=="string"){if(t.endsWith("%")){const n=parseInt(t.toString());if(Number.isFinite(n))return e*(n/100)}else if(t.endsWith("px")||tu.test(t)){const n=parseInt(t.toString());if(Number.isFinite(n))return n}}else if(typeof t=="number")return t}function ru(t){return Array.from(t.querySelectorAll(".v-ng-graph-objects")).map(n=>n.getBBox()).reduce((n,o,i)=>{if(i===0)return o;const s=Math.min(n.x,o.x),l=Math.min(n.y,o.y);return{x:s,y:l,width:Math.max(n.x+n.width-s,o.x+o.width-s),height:Math.max(n.y+n.height-l,o.y+o.height-l)}},{x:0,y:0,width:0,height:0})}function iu(t,e,n,o){if(Object.keys(n).length<=1)return;const i=ir(t,e,o);if(i>0){const s=or(t);return{zoom:i,pos:sr(s,i,e,o)}}else return}function su(t,e,n,o,i,s){if(Object.keys(o).length<=1)return;const l=Rl(o),u={top:(l.top-e.y)*i,left:(l.left-e.x)*i,right:(e.x+e.width-l.right)*i,bottom:(e.y+e.height-l.bottom)*i};let d=ir(t,n,s);if(d===0)return;const p=kt(n,Yc(s,u));if(p.width<=0||p.height<=0)return;const f=or(t),a=kt(n,s),c=Kc(t,e);let h=0,y=0,k={top:0,left:0,right:0,bottom:0};do{y=d;const v=Jc(u,d),m={top:l.top-v.top,left:l.left-v.left,right:l.right+v.right,bottom:l.bottom+v.bottom};k=c?m:eu(f,m);const E=rr(k),b=[a.width/E.width,a.height/E.height].filter(g=>g>0);if(b.length===0)return;d=Math.min(...b),h++}while(Math.abs(y-d)>1e-6&&h<10);return{zoom:d,pos:sr(k,d,n,s)}}function ir(t,e,n){if(t.width===0||t.height===0)return 0;const o=kt(e,n);if(o.width<=0||o.height<=0)return 0;const i=[o.width/t.width,o.height/t.height];return Math.min(...i)}function sr(t,e,n,o){const i=kt(n,o),s=rr(Qc(t,e)),l=(i.width-s.width)/2,u=(i.height-s.height)/2,d=s.x-o.left,p=s.y-o.top;return{x:-d+l,y:-p+u}}function kt(t,e){const n=e.left+e.right,o=e.top+e.bottom;return{width:t.width-n,height:t.height-o}}const au=["x","y","width","height","fill","stroke","stroke-width","stroke-dasharray"],lu=r.defineComponent({__name:"VSelectionBox",props:{box:{},config:{}},setup(t){return(e,n)=>(r.openBlock(),r.createElementBlock("rect",{class:"v-ng-selection-box",x:Math.round(e.box.pos.x),y:Math.round(e.box.pos.y),width:Math.ceil(e.box.size.width),height:Math.ceil(e.box.size.height),fill:e.config.color,stroke:e.config.strokeColor,"stroke-width":e.config.strokeWidth,"stroke-dasharray":e.config.strokeDasharray},null,8,au))}}),cu=["points","fill"],uu=r.defineComponent({__name:"VMarkerHeadArrow",props:{width:{},height:{},refX:{},color:{},isSource:{type:Boolean},units:{}},setup(t){const e=t,n=r.computed(()=>{const o=e.width,i=e.height;return e.isSource?`${o} ${i}, 0 ${i/2}, ${o} 0`:`0 0, ${o} ${i/2}, 0 ${i}`});return(o,i)=>(r.openBlock(),r.createElementBlock("polygon",{points:n.value,fill:o.color},null,8,cu))}}),du=["points","stroke-width","stroke"],fu=r.defineComponent({__name:"VMarkerHeadAngle",props:{width:{},height:{},refX:{},color:{},isSource:{type:Boolean},units:{}},setup(t){const e=t,n=r.computed(()=>e.units==="strokeWidth"?1:Math.min(e.width,e.height)/5),o=r.computed(()=>{const i=n.value/2,s=e.width,l=e.height;return e.isSource?`${s-i} ${l-i}, ${i} ${l/2}, ${s-i} ${i}`:`${i} ${i}, ${s-i} ${l/2}, ${i} ${l-i}`});return(i,s)=>(r.openBlock(),r.createElementBlock("polyline",{points:o.value,fill:"none","stroke-width":n.value,stroke:i.color,"stroke-linecap":"round","stroke-linejoin":"round"},null,8,du))}}),hu=["fill","cx","cy","rx","ry"],pu=r.defineComponent({__name:"VMarkerHeadCircle",props:{width:{},height:{},refX:{},color:{},isSource:{type:Boolean},units:{}},setup(t){return(e,n)=>(r.openBlock(),r.createElementBlock("ellipse",{fill:e.color,cx:e.width/2,cy:e.height/2,rx:e.width/2,ry:e.height/2},null,8,hu))}}),gu=["id","markerWidth","markerHeight","refX","refY","markerUnits"],mu=r.defineComponent({__name:"VMarkerHead",props:{id:{},marker:{},scale:{}},setup(t){const e={arrow:uu,angle:fu,circle:pu},n=t,o=r.computed(()=>n.marker.width*(n.marker.units==="strokeWidth"?1:n.scale)),i=r.computed(()=>n.marker.height*(n.marker.units==="strokeWidth"?1:n.scale)),s=r.computed(()=>{const u=n.marker.margin*(n.marker.units==="strokeWidth"?1:n.scale);return n.marker.isSource?o.value+u:-u}),l=r.computed(()=>{const u=n.marker.offset*(n.marker.units==="strokeWidth"?1:n.scale);return n.marker.isSource?u:-u});return(u,d)=>u.marker.type!=="none"&&u.marker.type!=="custom"?(r.openBlock(),r.createElementBlock("marker",{key:0,id:u.id,markerWidth:o.value,markerHeight:i.value,refX:s.value,refY:i.value/2+l.value,orient:"auto",markerUnits:u.marker.units,class:"v-ng-marker"},[(r.openBlock(),r.createBlock(r.resolveDynamicComponent(e[u.marker.type]),{width:o.value,height:i.value,refX:s.value,color:u.marker.color,"is-source":u.marker.isSource,units:u.marker.units},null,8,["width","height","refX","color","is-source","units"]))],8,gu)):r.createCommentVNode("",!0)}}),vu={class:"v-ng-background-grid","shape-rendering":"crispEdges"},bu=["d"],yu=["d"],wu=["d"],Eu=["d"],ku=r.defineComponent({__name:"VBackgroundGrid",setup(t){const{container:e,svgPanZoom:n}=ye(),{zoomLevel:o}=J(),i=Cc(),s=Pl(),l=r.ref({x:0,y:0}),u=r.ref({width:500,height:500});r.onMounted(()=>{var y;const c=(y=n.value)==null?void 0:y.getPan();c&&(l.value={x:-c.x,y:-c.y});const h=e.value.getBoundingClientRect();u.value={width:h.width,height:h.height}}),i.on("view:resize",c=>{u.value={width:c.width,height:c.height}}),i.on("view:pan",c=>{l.value={x:-c.x,y:-c.y}}),i.on("view:zoom",()=>{var h;const c=(h=n.value)==null?void 0:h.getPan();c&&(l.value={x:-c.x,y:-c.y})});const d=r.ref([]),p=r.ref([]),f=r.ref([]),a=r.ref([]);return r.watchEffect(()=>{const c=[],h=[],y=[],k=[],v=1/o.value,m=s.grid.interval,E=l.value.x*v,S=l.value.y*v,b=Math.floor(u.value.width/m+1)*m,g=Math.floor(u.value.height/m+1)*m,w=(l.value.x+b)*v,P=(l.value.y+g)*v,M=s.grid.thickIncrements,_=s.grid.line.dasharray,C=s.grid.thick.dasharray;let T={stroke:s.grid.thick.color,"stroke-width":s.grid.thick.width,"stroke-dasharray":C,"stroke-dashoffset":C?E/v:void 0},B={stroke:s.grid.line.color,"stroke-width":s.grid.line.width,"stroke-dasharray":_,"stroke-dashoffset":_?E/v:void 0};const L=(l.value.x+b)*v;for(let N=S;N<=P;N+=m){const R=Math.floor(N/m);M&&R%M===0?c.push([R,R*m,E,L,T]):y.push([R,R*m,E,L,B])}T=q({},T),T["stroke-dashoffset"]=C?S/v:void 0,B=q({},B),B["stroke-dashoffset"]=_?S/v:void 0;const V=(l.value.y+g)*v;for(let N=E;N<=w;N+=m){const R=Math.floor(N/m);M&&R%M===0?h.push([R,R*m,S,V,T]):k.push([R,R*m,S,V,B])}p.value=c,d.value=h,a.value=y,f.value=k}),(c,h)=>(r.openBlock(),r.createElementBlock("g",vu,[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(a.value,([y,k,v,m,E])=>(r.openBlock(),r.createElementBlock("path",r.mergeProps({key:`nv${y}`,d:`M ${v} ${k} L ${m} ${k}`,ref_for:!0},E,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,bu))),128)),(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(f.value,([y,k,v,m,E])=>(r.openBlock(),r.createElementBlock("path",r.mergeProps({key:`nh${y}`,d:`M ${k} ${v} L ${k} ${m}`,ref_for:!0},E,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,yu))),128)),(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(p.value,([y,k,v,m,E])=>(r.openBlock(),r.createElementBlock("path",r.mergeProps({key:`tv${y}`,d:`M ${v} ${k} L ${m} ${k}`,ref_for:!0},E,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,wu))),128)),(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(d.value,([y,k,v,m,E])=>(r.openBlock(),r.createElementBlock("path",r.mergeProps({key:`th${y}`,d:`M ${k} ${v} L ${k} ${m}`,ref_for:!0},E,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,Eu))),128))]))}}),Su=r.defineComponent({__name:"VBackgroundViewport",setup(t){const{viewport:e}=ye(),n=r.ref(),o=(s,l,u)=>{s.forEach(d=>{var p;return l.setAttribute(d,(p=u.getAttribute(d))!=null?p:"")})},i=new MutationObserver(s=>{if(!n.value)return;const l=s.map(u=>{var d;return(d=u.attributeName)!=null?d:""}).filter(Boolean);o(l,n.value,e.value)});return r.onMounted(()=>{const s=["transform","style"];i.observe(e.value,{attributes:!0,attributeFilter:s}),n.value&&o(s,n.value,e.value)}),r.onUnmounted(()=>{i.disconnect()}),(s,l)=>(r.openBlock(),r.createElementBlock("g",{ref_key:"background",ref:n,class:"v-ng-background-viewport"},[r.renderSlot(s.$slots,"default")],512))}}),Pu=["d","stroke-width"],xu=r.defineComponent({__name:"VEdgeBackground",props:{id:{},state:{},sourcePos:{default:void 0},targetPos:{default:void 0}},setup(t){const e=t,{scale:n}=J(),o=ht(),{handleEdgePointerDownEvent:i,handleEdgePointerOverEvent:s,handleEdgePointerOutEvent:l,handleEdgeClickEvent:u,handleEdgeDoubleClickEvent:d,handleEdgeContextMenu:p}=qe(),f=r.computed(()=>{const c=e.state.position;if(e.state.loop){const{radius:h,isLargeArc:y,isClockwise:k}=e.state.loop,[v,m]=h,E=y?1:0,S=k?1:0;return`M ${c.p1.x} ${c.p1.y} A ${v} ${m} 0 ${E} ${S} ${c.p2.x} ${c.p2.y}`}else{if(o.type==="straight"||!e.state.curve)return`M ${c.p1.x} ${c.p1.y} L ${c.p2.x} ${c.p2.y}`;{const h=[...e.state.curve.control,{x:c.p2.x,y:c.p2.y}],y=[];return y.push(`M ${c.p1.x} ${c.p1.y}`),zt(h,2).forEach(([k,v])=>y.push(`Q ${k.x} ${k.y} ${v.x} ${v.y}`)),y.join(" ")}}}),a=r.computed(()=>(e.state.line.stroke.width+10)*n.value);return(c,h)=>(r.openBlock(),r.createElementBlock("path",{class:r.normalizeClass({"v-ng-line-background":!0,selectable:c.state.selectable}),d:f.value,stroke:"transparent","stroke-width":a.value,fill:"none",onPointerdown:h[0]||(h[0]=r.withModifiers(y=>r.unref(i)(c.id,y),["stop"])),onPointerenterPassive:h[1]||(h[1]=y=>r.unref(s)(c.id,y)),onPointerleavePassive:h[2]||(h[2]=y=>r.unref(l)(c.id,y)),onClick:h[3]||(h[3]=r.withModifiers(y=>r.unref(u)(c.id,y),["stop"])),onDblclick:h[4]||(h[4]=r.withModifiers(y=>r.unref(d)(c.id,y),["stop"])),onContextmenu:h[5]||(h[5]=y=>r.unref(p)(c.id,y))},null,42,Pu))}}),Mu=r.defineComponent({__name:"VEdgeBackgrounds",setup(t){const{edgeStates:e,edgeGroupStates:n,layouts:o}=oe();return(i,s)=>(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(r.unref(n).edgeGroups,({summarize:l,edges:u})=>(r.openBlock(),r.createElementBlock(r.Fragment,null,[l?r.createCommentVNode("",!0):(r.openBlock(!0),r.createElementBlock(r.Fragment,{key:0},r.renderList(u,(d,p)=>(r.openBlock(),r.createBlock(xu,{key:p,id:p,state:r.unref(e)[p],"source-pos":r.unref(o).nodes[d.source],"target-pos":r.unref(o).nodes[d.target]},null,8,["id","state","source-pos","target-pos"]))),128))],64))),256))}}),Cu=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap"],ar=r.defineComponent({__name:"VLine",props:{p1:{},p2:{},config:{}},setup(t){const e=t,{scale:n}=J(),o=r.computed(()=>e.config.width*n.value),i=r.computed(()=>Fe(e.config.dasharray,n.value)),s=r.computed(()=>{const l=e.config.animate?ut(e.config.dasharray)*e.config.animationSpeed*n.value:!1;return l?{"--animation-speed":l}:void 0});return(l,u)=>(r.openBlock(),r.createElementBlock("path",{class:r.normalizeClass({"v-ng-line":!0,animate:l.config.animate}),d:`M ${l.p1.x} ${l.p1.y} L ${l.p2.x} ${l.p2.y}`,stroke:l.config.color,"stroke-width":o.value,"stroke-dasharray":i.value,"stroke-linecap":l.config.linecap,style:r.normalizeStyle(s.value)},null,14,Cu))}}),Tu=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap"],Ou=r.defineComponent({__name:"VArc",props:{p1:{},p2:{},radius:{},isLargeArc:{type:Boolean},isClockwise:{type:Boolean},config:{}},setup(t){const e=t,{scale:n}=J(),o=r.computed(()=>e.config.width*n.value),i=r.computed(()=>Fe(e.config.dasharray,n.value)),s=r.computed(()=>{const u=e.config.animate?ut(e.config.dasharray)*e.config.animationSpeed*n.value:!1;return u?{"--animation-speed":u}:void 0}),l=r.computed(()=>{const{p1:u,p2:d,radius:p,isLargeArc:f,isClockwise:a}=e,[c,h]=p,y=f?1:0,k=a?1:0;return`M ${u.x} ${u.y} A ${c} ${h} 0 ${y} ${k} ${d.x} ${d.y}`});return(u,d)=>(r.openBlock(),r.createElementBlock("path",{class:r.normalizeClass({"v-ng-line":!0,animate:u.config.animate}),d:l.value,stroke:u.config.color,"stroke-width":o.value,"stroke-dasharray":i.value,"stroke-linecap":u.config.linecap,style:r.normalizeStyle(s.value),fill:"none"},null,14,Tu))}}),_u=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap","marker-start","marker-end"],Bu=r.defineComponent({__name:"VEdgeCurved",props:{state:{},config:{},markerStart:{default:void 0},markerEnd:{default:void 0}},setup(t){const e=t,{scale:n}=J(),o=r.computed(()=>{var f,a;const u=e.state.position,d=[...(a=(f=e.state.curve)==null?void 0:f.control)!=null?a:[],{x:u.p2.x,y:u.p2.y}],p=[];return p.push(`M ${u.p1.x} ${u.p1.y}`),zt(d,2).forEach(([c,h])=>p.push(`Q ${c.x} ${c.y} ${h.x} ${h.y}`)),p.join(" ")}),i=r.computed(()=>e.config.width*n.value),s=r.computed(()=>Fe(e.config.dasharray,n.value)),l=r.computed(()=>{const u=e.config.animate?ut(e.config.dasharray)*e.config.animationSpeed*n.value:!1;return u?{"--animation-speed":u}:void 0});return(u,d)=>(r.openBlock(),r.createElementBlock("path",{class:r.normalizeClass({"v-ng-line":!0,animate:u.config.animate}),d:o.value,fill:"none",stroke:u.config.color,"stroke-width":i.value,"stroke-dasharray":s.value,"stroke-linecap":u.config.linecap,style:r.normalizeStyle(l.value),"marker-start":u.markerStart,"marker-end":u.markerEnd},null,14,_u))}}),zu=r.defineComponent({__name:"VEdge",props:{id:{},state:{},sourcePos:{default:void 0},targetPos:{default:void 0}},setup(t){const e=ht();return(n,o)=>n.state.loop?(r.openBlock(),r.createBlock(Ou,r.mergeProps({key:0},n.state.position,{radius:n.state.loop.radius,"is-large-arc":n.state.loop.isLargeArc,"is-clockwise":n.state.loop.isClockwise,class:[{selectable:n.state.selectable,hover:n.state.hovered,selected:n.state.selected},"v-ng-edge"],config:n.state.line.stroke,"marker-start":n.state.sourceMarkerId?`url('#${n.state.sourceMarkerId}')`:void 0,"marker-end":n.state.targetMarkerId?`url('#${n.state.targetMarkerId}')`:void 0}),null,16,["radius","is-large-arc","is-clockwise","class","config","marker-start","marker-end"])):r.unref(e).type=="straight"||!n.state.curve?(r.openBlock(),r.createBlock(ar,r.mergeProps({key:1,"data-edge-id":n.id},n.state.position,{class:[{selectable:n.state.selectable,hover:n.state.hovered,selected:n.state.selected},"v-ng-edge"],config:n.state.line.stroke,"marker-start":n.state.sourceMarkerId?`url('#${n.state.sourceMarkerId}')`:void 0,"marker-end":n.state.targetMarkerId?`url('#${n.state.targetMarkerId}')`:void 0}),null,16,["data-edge-id","class","config","marker-start","marker-end"])):(r.openBlock(),r.createBlock(Bu,{key:2,"data-edge-id":n.id,class:r.normalizeClass([{selectable:n.state.selectable,hover:n.state.hovered,selected:n.state.selected},"v-ng-edge"]),state:n.state,config:n.state.line.stroke,"marker-start":n.state.sourceMarkerId?`url('#${n.state.sourceMarkerId}')`:void 0,"marker-end":n.state.targetMarkerId?`url('#${n.state.targetMarkerId}')`:void 0},null,8,["data-edge-id","class","state","config","marker-start","marker-end"]))}}),Iu=["cx","cy","r","fill","stroke","stroke-width","stroke-dasharray"],$u=["x","y","width","height","rx","ry","fill","stroke","stroke-width","stroke-dasharray"],Ye=r.defineComponent({__name:"VShape",props:{baseX:{default:0},baseY:{default:0},config:{}},setup(t){const e=t,{scale:n}=J(),o=r.ref(e.baseX),i=r.ref(e.baseY),s=r.ref(0),l=r.ref("#000000"),u=r.ref(void 0),d=r.ref(0),p=r.ref(0),f=r.ref(0),a=r.ref(0);return r.watchEffect(()=>{var h;const c=n.value;s.value=e.config.strokeWidth*c,l.value=(h=e.config.strokeColor)!=null?h:"none",u.value=Fe(e.config.strokeDasharray,c),e.config.type==="circle"?(o.value=e.baseX,i.value=e.baseY,d.value=e.config.radius*c):(p.value=e.config.width*c,f.value=e.config.height*c,a.value=e.config.borderRadius*c,o.value=e.baseX-p.value/2,i.value=e.baseY-f.value/2)}),(c,h)=>c.config.type==="circle"?(r.openBlock(),r.createElementBlock("circle",{key:0,class:"v-ng-shape-circle",cx:o.value,cy:i.value,r:d.value,fill:c.config.color,stroke:l.value,"stroke-width":s.value,"stroke-dasharray":u.value},null,8,Iu)):(r.openBlock(),r.createElementBlock("rect",{key:1,class:"v-ng-shape-rect",x:o.value,y:i.value,width:p.value,height:f.value,rx:a.value,ry:a.value,fill:c.config.color,stroke:l.value,"stroke-width":s.value,"stroke-dasharray":u.value},null,8,$u))}}),Au=["rx","ry","fill","transform"],Lu=["x","y","dominant-baseline","font-family","font-size","fill"],Nu=["x","dy","dominant-baseline"],Qe=r.defineComponent({__name:"VLabelText",props:{text:{},x:{default:0},y:{default:0},dominantBaseline:{default:"central"},config:{}},setup(t){const e=t,n=r.useAttrs(),{scale:o}=J(),i=r.computed(()=>{var v,m;return(m=(v=e.text)==null?void 0:v.toString().split(/\r?\n/))!=null?m:""}),s=r.computed(()=>{var v;return(v=n["font-size"])!=null?v:e.config.fontSize*o.value}),l=r.computed(()=>s.value*e.config.lineHeight),u=r.computed(()=>{const v=e.dominantBaseline;return v==="hanging"?0:v==="central"?-(l.value*(i.value.length-1))/2:-l.value*(i.value.length-1)}),d=r.ref(),p=r.ref(""),f=r.reactive({x:0,y:0,width:0,height:0}),a=r.computed(()=>{var b,g;const v=e.config.background;if(!v)return f;let m,E;v.padding instanceof Object?(m=v.padding.vertical,E=v.padding.horizontal):(m=(b=v.padding)!=null?b:0,E=(g=v.padding)!=null?g:0);const S=l.value-s.value;return{x:f.x-E*o.value,y:f.y-m*o.value-S/2,width:f.width+E*2*o.value,height:f.height+m*2*o.value+S}});let c;const h=()=>{e.config.background&&e.config.background.visible?!c&&d.value&&(c=k(d.value,f,p)):(c==null||c.disconnect(),c=void 0)};r.onMounted(()=>h()),r.watch(()=>e.config.background&&e.config.background.visible,(v,m)=>{v!=m&&h()}),r.onUnmounted(()=>{c==null||c.disconnect(),c=void 0});function y(v,m,E){var b;const S=v.getBBox();m.x=S.x,m.y=S.y,m.width=S.width,m.height=S.height,E.value=(b=v.getAttribute("transform"))!=null?b:void 0}function k(v,m,E){const S=new MutationObserver(()=>{y(v,m,E)});return S.observe(v,{attributes:!0,attributeFilter:["x","y","transform","font-size"]}),y(v,m,E),S}return(v,m)=>{var E,S,b,g,w,P;return r.openBlock(),r.createElementBlock(r.Fragment,null,[v.config.background&&v.config.background.visible?(r.openBlock(),r.createElementBlock("rect",r.mergeProps({key:0,class:"v-ng-text-background"},a.value,{rx:((S=(E=v.config.background)==null?void 0:E.borderRadius)!=null?S:0)*r.unref(o),ry:((g=(b=v.config.background)==null?void 0:b.borderRadius)!=null?g:0)*r.unref(o),fill:(P=(w=v.config.background)==null?void 0:w.color)!=null?P:"#ffffff",transform:p.value}),null,16,Au)):r.createCommentVNode("",!0),r.createElementVNode("text",r.mergeProps({ref_key:"element",ref:d,class:"v-ng-text"},v.$attrs,{x:v.x,y:v.y,"dominant-baseline":v.dominantBaseline,"font-family":v.$attrs["font-family"]?`${v.$attrs["font-family"]}`:v.config.fontFamily,"font-size":s.value,fill:v.$attrs.fill?`${v.$attrs.fill}`:v.config.color}),[i.value.length<=1?(r.openBlock(),r.createElementBlock(r.Fragment,{key:0},[r.createTextVNode(r.toDisplayString(v.text),1)],64)):(r.openBlock(!0),r.createElementBlock(r.Fragment,{key:1},r.renderList(i.value,(M,_)=>(r.openBlock(),r.createElementBlock("tspan",{key:_,x:v.x,dy:_==0?u.value:l.value,"dominant-baseline":v.dominantBaseline},r.toDisplayString(M),9,Nu))),128))],16,Lu)],64)}}}),ju=r.defineComponent({__name:"VEdgeSummarized",props:{edges:{},layouts:{}},setup(t){const e=t,n=ht(),{handleEdgesPointerDownEvent:o,handleEdgesPointerOverEvent:i,handleEdgesPointerOutEvent:s,handleEdgesClickEvent:l,handleEdgesDoubleClickEvent:u,handleEdgesContextMenu:d}=qe(),{edgeStates:p}=oe(),f=r.ref({p1:{x:0,y:0},p2:{x:0,y:0}}),a=r.ref({x:0,y:0});r.watchEffect(()=>{const S=Object.keys(e.edges).find(b=>b in p);S&&(f.value=p[S].position,a.value={x:(f.value.p1.x+f.value.p2.x)/2,y:(f.value.p1.y+f.value.p2.y)/2})});const c=r.computed(()=>Object.keys(e.edges)),h=r.computed(()=>O.values(n.summarized.label,e.edges)),y=r.computed(()=>O.values(n.summarized.shape,e.edges)),k=r.computed(()=>O.values(n.summarized.stroke,e.edges)),v=r.computed(()=>c.value.some(S=>p[S].hovered)),m=r.computed(()=>c.value.some(S=>p[S].selectable)),E=r.computed(()=>c.value.some(S=>p[S].selected));return(S,b)=>(r.openBlock(),r.createElementBlock("g",{class:r.normalizeClass({"v-ng-line-summarized":!0,hovered:v.value,selectable:m.value,selected:E.value}),onPointerdown:b[0]||(b[0]=r.withModifiers(g=>r.unref(o)(c.value,g),["stop"])),onPointerenterPassive:b[1]||(b[1]=g=>r.unref(i)(c.value,g)),onPointerleavePassive:b[2]||(b[2]=g=>r.unref(s)(c.value,g)),onClick:b[3]||(b[3]=r.withModifiers(g=>r.unref(l)(c.value,g),["stop"])),onDblclick:b[4]||(b[4]=r.withModifiers(g=>r.unref(u)(c.value,g),["stop"])),onContextmenu:b[5]||(b[5]=g=>r.unref(d)(c.value,g))},[r.createVNode(ar,r.mergeProps(f.value,{config:k.value,"data-edge-id":c.value[0]}),null,16,["config","data-edge-id"]),r.createVNode(Ye,{"base-x":a.value.x,"base-y":a.value.y,config:y.value},null,8,["base-x","base-y","config"]),r.createVNode(Qe,{text:Object.keys(S.edges).length.toString(),x:a.value.x,y:a.value.y,config:h.value,"text-anchor":"middle","dominant-baseline":"central"},null,8,["text","x","y","config"])],34))}}),Du={class:"v-ng-edge-overlay"},lr=r.defineComponent({__name:"VEdgeOverlay",props:{edgeId:{default:void 0},edge:{default:void 0},edges:{default:()=>({})},state:{},isSummarized:{type:Boolean}},setup(t){const e=t,{svg:n}=ye(),{scale:o}=J(),i=ht();function s(){return e.isSummarized?O.values(i.summarized.stroke,e.edges):e.state.line.stroke}function l(f){return{source:f.p1,target:f.p2}}function u(f){if(f.curve)return f.curve.center;{const a=f.origin.p1,c=f.origin.p2;return{x:(a.x+c.x)/2,y:(a.y+c.y)/2}}}function d(){var c;if(!n.value)return 0;const f=(c=e.edgeId)!=null?c:Object.keys(e.edges)[0],a=n.value.querySelector(`path[data-edge-id="${f}"]`);return a?a.getTotalLength():0}function p(f){var y;if(!n.value||!isFinite(f))return e.state.position.p1;e.state;const a=(y=e.edgeId)!=null?y:Object.keys(e.edges)[0],c=n.value.querySelector(`path[data-edge-id="${a}"]`);if(!c)return e.state.position.p1;const h=c.getPointAtLength(f);return{x:h.x,y:h.y}}return(f,a)=>(r.openBlock(),r.createElementBlock("g",Du,[f.isSummarized?r.renderSlot(f.$slots,"default",{key:0,edges:f.edges,isSummarized:f.isSummarized,stroke:s(),position:l(f.state.origin),center:u(f.state),hovered:f.state.hovered,selected:f.state.selected,scale:r.unref(o),length:d(),pointAtLength:p}):r.renderSlot(f.$slots,"default",{key:1,edgeId:f.edgeId,edge:f.edge,edges:{[f.edgeId]:f.edge},isSummarized:f.isSummarized,stroke:s(),position:l(f.state.origin),center:u(f.state),hovered:f.state.hovered,selected:f.state.selected,scale:r.unref(o),length:d(),pointAtLength:p})]))}}),Zu=r.defineComponent({__name:"VEdgeGroups",props:{hasEdgeOverlaySlot:{type:Boolean}},setup(t){const{edgeStates:e,edgeZOrderedList:n,layouts:o}=oe();return(i,s)=>(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(r.unref(n),l=>(r.openBlock(),r.createElementBlock(r.Fragment,null,[r.unref(tc)(l)?(r.openBlock(),r.createElementBlock(r.Fragment,{key:0},[(r.openBlock(),r.createBlock(ju,{key:l.key,edges:l.group.edges,layouts:r.unref(o).nodes},null,8,["edges","layouts"])),i.hasEdgeOverlaySlot?(r.openBlock(),r.createBlock(lr,{key:l.key,edges:l.group.edges,state:r.unref(e)[Object.keys(l.group.edges)[0]],"is-summarized":!0},{default:r.withCtx(u=>[r.renderSlot(i.$slots,"default",r.mergeProps({ref_for:!0},u))]),_:2},1032,["edges","state"])):r.createCommentVNode("",!0)],64)):(r.openBlock(),r.createElementBlock(r.Fragment,{key:1},[(r.openBlock(),r.createBlock(zu,{id:l.key,key:l.key,state:r.unref(e)[l.key],"source-pos":r.unref(o).nodes[l.edge.source],"target-pos":r.unref(o).nodes[l.edge.target]},null,8,["id","state","source-pos","target-pos"])),i.hasEdgeOverlaySlot?(r.openBlock(),r.createBlock(lr,{key:l.key,"edge-id":l.key,edge:l.edge,state:r.unref(e)[l.key],"is-summarized":!1},{default:r.withCtx(u=>[r.renderSlot(i.$slots,"default",r.mergeProps({ref_for:!0},u))]),_:2},1032,["edge-id","edge","state"])):r.createCommentVNode("",!0)],64))],64))),256))}}),Ru={class:"v-ng-layer-edges v-ng-graph-objects"},Vu=r.defineComponent({__name:"VEdgesLayer",setup(t){const e=r.useSlots(),n=r.computed(()=>"edge-overlay"in e);return(o,i)=>(r.openBlock(),r.createElementBlock("g",Ru,[r.createVNode(Mu),r.createVNode(Zu,{"has-edge-overlay-slot":n.value},r.createSlots({_:2},[n.value?{name:"default",fn:r.withCtx(s=>[r.renderSlot(o.$slots,"edge-overlay",r.normalizeProps(r.guardReactiveProps(s)))]),key:"0"}:void 0]),1032,["has-edge-overlay-slot"])]))}}),Hu=r.defineComponent({__name:"VEdgeLabelPlace",props:{edgeId:{},edge:{},state:{}},setup(t){const e=t,{scale:n}=J(),o=r.computed(()=>Bo(e.state.labelPosition,e.state.line.stroke,e.state.label.margin,e.state.label.padding,n.value));return(i,s)=>i.state.loop?r.createCommentVNode("",!0):r.renderSlot(i.$slots,"default",{key:0,edgeId:i.edgeId,edge:i.edge,config:i.state.label,area:o.value,hovered:i.state.hovered,selected:i.state.selected,scale:r.unref(n)})}}),Fu=r.defineComponent({__name:"VEdgeLabelsPlace",props:{edges:{},state:{},summarizeState:{}},setup(t){const e=t,{scale:n}=J(),o=r.computed(()=>{var i,s;return Bo(e.state.labelPosition,(s=(i=e.summarizeState)==null?void 0:i.stroke)!=null?s:e.state.line.stroke,e.state.label.margin,e.state.label.padding,n.value)});return(i,s)=>i.state.loop?r.createCommentVNode("",!0):r.renderSlot(i.$slots,"default",{key:0,edges:i.edges,config:i.state.label,area:o.value,hovered:i.state.hovered,selected:i.state.selected,scale:r.unref(n)})}}),Wu={class:"v-ng-edge-labels"},Uu=r.defineComponent({__name:"VEdgeLabels",props:{enableEdgeLabel:{type:Boolean,default:!1},enableEdgesLabel:{type:Boolean,default:!1}},setup(t){const{edgeStates:e,edgeGroupStates:n,summarizedEdgeStates:o}=oe(),i=r.computed(()=>{const l={},u={};return Object.entries(n.edgeGroups).forEach(([d,p])=>{Object.keys(p.edges).length>0&&(p.summarize?u[d]=p:l[d]=p)}),{individual:l,summarized:u}});function s(l){return Object.keys(l.edges)[0]}return(l,u)=>(r.openBlock(),r.createElementBlock("g",Wu,[l.enableEdgeLabel?(r.openBlock(!0),r.createElementBlock(r.Fragment,{key:0},r.renderList(i.value.individual,(d,p)=>(r.openBlock(),r.createElementBlock(r.Fragment,{key:p},[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(d.edges,(f,a)=>(r.openBlock(),r.createBlock(Hu,{key:a,"edge-id":a,edge:f,state:r.unref(e)[a]},{default:r.withCtx(c=>[r.renderSlot(l.$slots,"edge-label",r.mergeProps({ref_for:!0},c))]),_:2},1032,["edge-id","edge","state"]))),128))],64))),128)):r.createCommentVNode("",!0),l.enableEdgesLabel?(r.openBlock(!0),r.createElementBlock(r.Fragment,{key:1},r.renderList(i.value.summarized,(d,p)=>(r.openBlock(),r.createBlock(Fu,{key:p,edges:d.edges,state:r.unref(e)[s(d)],"summarize-state":r.unref(o)[s(d)]},{default:r.withCtx(f=>[r.renderSlot(l.$slots,"edges-label",r.mergeProps({ref_for:!0},f))]),_:2},1032,["edges","state","summarize-state"]))),128)):r.createCommentVNode("",!0)]))}}),Gu=r.defineComponent({__name:"VEdgeLabelsLayer",props:{enableEdgeLabel:{type:Boolean,default:!1},enableEdgesLabel:{type:Boolean,default:!1}},setup(t){return(e,n)=>(r.openBlock(),r.createBlock(Uu,{"enable-edge-label":e.enableEdgeLabel,"enable-edges-label":e.enableEdgesLabel,class:"v-ng-layer-edge-labels v-ng-graph-objects"},r.createSlots({_:2},[e.enableEdgeLabel?{name:"edge-label",fn:r.withCtx(o=>[r.renderSlot(e.$slots,"edge-label",r.normalizeProps(r.guardReactiveProps(o)))]),key:"0"}:void 0,e.enableEdgesLabel?{name:"edges-label",fn:r.withCtx(o=>[r.renderSlot(e.$slots,"edges-label",r.normalizeProps(r.guardReactiveProps(o)))]),key:"1"}:void 0]),1032,["enable-edge-label","enable-edges-label"]))}}),qu=r.defineComponent({__name:"VNodeFocusRing",props:{id:{},state:{},pos:{default:void 0}},setup(t){const e=t,n=r.computed(()=>{var l;return((l=e.pos)==null?void 0:l.x)||0}),o=r.computed(()=>{var l;return((l=e.pos)==null?void 0:l.y)||0}),i=ft(),s=r.reactive({});return r.watchEffect(()=>{var u,d,p;const l=e.state.shape;if(l.type==="circle"){const f={type:"circle",radius:l.radius+((u=l.strokeWidth)!=null?u:0)/2+i.focusring.padding+i.focusring.width/2,color:"none",strokeWidth:i.focusring.width,strokeColor:i.focusring.color,strokeDasharray:i.focusring.dasharray};Object.assign(s,f)}else{const f={type:"rect",width:l.width+((d=l.strokeWidth)!=null?d:0)+i.focusring.padding*2+i.focusring.width,height:l.height+((p=l.strokeWidth)!=null?p:0)+i.focusring.padding*2+i.focusring.width,borderRadius:l.borderRadius>0?l.borderRadius+i.focusring.padding:0,color:"none",strokeWidth:i.focusring.width,strokeColor:i.focusring.color,strokeDasharray:i.focusring.dasharray};Object.assign(s,f)}}),(l,u)=>(r.openBlock(),r.createBlock(Ye,{class:"v-ng-node-focusring","base-x":n.value,"base-y":o.value,config:s},null,8,["base-x","base-y","config"]))}}),Xu={class:"v-ng-layer-nodes-selections"},Ku=r.defineComponent({__name:"VFocusringLayer",setup(t){const{nodeStates:e}=oe(),{selectedNodes:n}=Wc(),o=pn();return(i,s)=>(r.openBlock(),r.createElementBlock("g",Xu,[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(r.unref(n),l=>(r.openBlock(),r.createBlock(qu,{id:l,key:l,state:r.unref(e)[l],pos:r.unref(o).nodes[l]},null,8,["id","state","pos"]))),128))]))}}),Yu=["transform"],cr=r.defineComponent({__name:"VNode",props:{id:{},state:{},pos:{default:void 0}},setup(t){const e=t,n=r.computed(()=>{var a;return((a=e.pos)==null?void 0:a.x)||0}),o=r.computed(()=>{var a;return((a=e.pos)==null?void 0:a.y)||0}),{scale:i}=J(),{handleNodePointerDownEvent:s,handleNodePointerOverEvent:l,handleNodePointerOutEvent:u,handleNodeClickEvent:d,handleNodeDoubleClickEvent:p,handleNodeContextMenu:f}=qe();return(a,c)=>(r.openBlock(),r.createElementBlock("g",{class:r.normalizeClass({"v-ng-node":!0,hover:a.state.hovered,selected:a.state.selected}),transform:`translate(${n.value} ${o.value})`,onPointerdown:c[0]||(c[0]=r.withModifiers(h=>r.unref(s)(a.id,h),["stop"])),onPointerenterPassive:c[1]||(c[1]=h=>r.unref(l)(a.id,h)),onPointerleavePassive:c[2]||(c[2]=h=>r.unref(u)(a.id,h)),onClick:c[3]||(c[3]=r.withModifiers(h=>r.unref(d)(a.id,h),["stop"])),onDblclick:c[4]||(c[4]=r.withModifiers(h=>r.unref(p)(a.id,h),["stop"])),onContextmenu:c[5]||(c[5]=h=>r.unref(f)(a.id,h))},[r.renderSlot(a.$slots,"override-node",{nodeId:a.id,scale:r.unref(i),config:a.state.shape,class:r.normalizeClass({draggable:a.state.draggable,selectable:a.state.selectable})},()=>[r.createVNode(Ye,{config:a.state.shape,class:r.normalizeClass({"v-ng-node-default":!0,draggable:a.state.draggable,selectable:a.state.selectable})},null,8,["config","class"])])],42,Yu))}}),Qu=r.defineComponent({__name:"VNodesLayer",setup(t){const e=r.useSlots(),n=r.computed(()=>"override-node"in e),{nodeZOrderedList:o}=oe(),i=ft(),s=pn();return(l,u)=>n.value?(r.openBlock(),r.createBlock(r.TransitionGroup,{key:0,name:r.unref(i).transition,css:!!r.unref(i).transition,tag:"g",class:"v-ng-layer-nodes v-ng-graph-objects"},{default:r.withCtx(()=>[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(r.unref(o),d=>(r.openBlock(),r.createBlock(cr,{id:d.id,key:d.id,state:d,pos:r.unref(s).nodes[d.id]},{"override-node":r.withCtx(p=>[r.renderSlot(l.$slots,"override-node",r.mergeProps({ref_for:!0},p))]),_:2},1032,["id","state","pos"]))),128))]),_:3},8,["name","css"])):(r.openBlock(),r.createBlock(r.TransitionGroup,{key:1,name:r.unref(i).transition,css:!!r.unref(i).transition,tag:"g",class:"v-ng-layer-nodes v-ng-graph-objects"},{default:r.withCtx(()=>[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(r.unref(o),d=>(r.openBlock(),r.createBlock(cr,{id:d.id,key:d.id,state:d,pos:r.unref(s).nodes[d.id]},null,8,["id","state","pos"]))),128))]),_:1},8,["name","css"]))}}),ur={[I.NORTH]:0,[I.NORTH_EAST]:1,[I.EAST]:2,[I.SOUTH_EAST]:3,[I.SOUTH]:4,[I.SOUTH_WEST]:5,[I.WEST]:6,[I.NORTH_WEST]:7,[I.CENTER]:-1},Ju=[(t,e)=>be(t,0,e?90:60),(t,e)=>be(t,45,e?90:45),(t,e)=>be(t,90,e?60:30),(t,e)=>be(t,135,e?90:45),(t,e)=>be(t,180,e?90:60),(t,e)=>be(t,225,e?90:45),(t,e)=>be(t,270,e?60:30),(t,e)=>be(t,315,e?90:45)];function ed(t,e,n,o,i){if(i===I.CENTER)return I.CENTER;const s=[];Object.entries(n).forEach(([p,f])=>{let a=!1;if(f.nodeId===t){const h=o(p);h&&(a=!0,f=Je(q({},f),{pos:{x:h.x,y:h.y}}))}const c=(qt(Vt(f.pos,e))+360+90)%360;s.push([c,a])});const l=td(i),d=[l,(l+4)%8,(l+2)%8,(l-2+8)%8,(l+1)%8,(l-1+8)%8,(l+3)%8,(l-3+8)%8].find(p=>s.every(f=>!Ju[p](...f)));return d===void 0?i:nd(d,i)}function be(t,e,n){t%=360;const o=(e-n+360)%360,i=(e+n)%360;return o<=i?o<t&&t<i:o<t||t<i}function td(t){var e;return(e=ur[t])!=null?e:0}function nd(t,e){var n,o;return(o=(n=Object.entries(ur)[t])==null?void 0:n[0])!=null?o:e}const od=["transform"],dr=r.defineComponent({__name:"VNodeLabel",props:{id:{},state:{},pos:{default:void 0}},setup(t){const e=t,n=ft(),{edgeStates:o}=oe(),{scale:i}=J(),{handleNodePointerDownEvent:s,handleNodePointerOverEvent:l,handleNodePointerOutEvent:u,handleNodeClickEvent:d,handleNodeDoubleClickEvent:p,handleNodeContextMenu:f}=qe(),a=r.computed(()=>{var C;return((C=e.pos)==null?void 0:C.x)||0}),c=r.computed(()=>{var C;return((C=e.pos)==null?void 0:C.y)||0}),h=r.computed(()=>e.state.label.direction===I.CENTER?0:e.state.label.margin*i.value),y=r.ref(0),k=r.ref(0),v=r.ref(0),m=r.ref(0),E=r.computed(()=>{var L;const C=e.state.label.direction,T=e.state.label.directionAutoAdjustment;if(T===!1)return C;const B={x:a.value,y:c.value};return T===!0?ed(e.state.id,B,e.state.oppositeNodes,V=>{var N,R;return(R=(N=o[V])==null?void 0:N.loop)==null?void 0:R.center},C):(L=T({nodeId:e.state.id,pos:B,oppositeNodes:e.state.oppositeNodes}))!=null?L:C}),S=r.computed(()=>{switch(E.value){case I.CENTER:case I.NORTH:case I.SOUTH:return"middle";case I.EAST:case I.NORTH_EAST:case I.SOUTH_EAST:return"start";case I.WEST:case I.NORTH_WEST:case I.SOUTH_WEST:default:return"end"}}),b=r.computed(()=>{switch(E.value){case I.NORTH:case I.NORTH_EAST:case I.NORTH_WEST:return"text-top";case I.SOUTH:case I.SOUTH_EAST:case I.SOUTH_WEST:return"hanging";case I.CENTER:case I.EAST:case I.WEST:default:return"central"}}),g=r.computed(()=>{switch(E.value){case I.CENTER:case I.NORTH:case I.SOUTH:return 0;case I.EAST:return k.value;case I.WEST:return-k.value;case I.NORTH_EAST:case I.SOUTH_EAST:return m.value;case I.NORTH_WEST:case I.SOUTH_WEST:default:return-m.value}}),w=r.computed(()=>{switch(E.value){case I.NORTH:return-y.value;case I.SOUTH:return y.value;case I.CENTER:case I.EAST:case I.WEST:return 0;case I.NORTH_EAST:case I.NORTH_WEST:return-v.value;case I.SOUTH_EAST:case I.SOUTH_WEST:default:return v.value}});r.watchEffect(()=>{const C=i.value,T=e.state.shape;if(T.type=="circle"){const B=T.radius*C,L=B+h.value,V=Math.sqrt(X(L,2)/2);y.value=B+h.value,k.value=B+h.value,v.value=V,m.value=V}else{const B=T.borderRadius*C,L=T.width*C,V=T.height*C,N=B+h.value,R=Math.sqrt(X(N,2)/2);y.value=V/2+h.value,k.value=L/2+h.value,v.value=V/2-B+R,m.value=L/2-B+R}});const P=r.computed(()=>C=>n.label.handleNodeEvents?{pointerdown:T=>{T.stopPropagation(),s(C,T)},pointerenter:T=>l(C,T),pointerleave:T=>u(C,T),click:T=>{T.stopPropagation(),d(C,T)},dblclick:T=>{T.stopPropagation(),p(C,T)},contextmenu:T=>{f(C,T)}}:{}),M=r.computed(()=>{const C=n.label.handleNodeEvents;return{"v-ng-node-label":!0,hover:C&&e.state.hovered,selected:C&&e.state.selected}}),_=r.computed(()=>{const C=n.label.handleNodeEvents;return{draggable:C&&e.state.draggable,selectable:C&&e.state.selectable}});return(C,T)=>(r.openBlock(),r.createElementBlock("g",r.mergeProps({class:M.value,transform:`translate(${a.value} ${c.value})`},r.toHandlers(P.value(C.id),!0)),[r.renderSlot(C.$slots,"override-node-label",{nodeId:C.id,scale:r.unref(i),text:C.state.labelText,x:g.value,y:w.value,config:C.state.label,shape:C.state.shape,textAnchor:S.value,dominantBaseline:b.value,class:r.normalizeClass(_.value)},()=>[r.createVNode(Qe,{text:C.state.labelText,x:0,y:0,config:C.state.label,"text-anchor":S.value,"dominant-baseline":b.value,class:r.normalizeClass(_.value),transform:`translate(${g.value} ${w.value})`},null,8,["text","config","text-anchor","dominant-baseline","class","transform"])])],16,od))}}),rd=r.defineComponent({__name:"VNodeLabelsLayer",setup(t){const e=r.useSlots(),n=r.computed(()=>"override-node-label"in e),{nodeZOrderedList:o}=oe(),i=ft(),s=pn(),l=r.computed(()=>u(o.value));function u(d){return d.filter(p=>{var f;return p.label.visible&&((f=p.labelText)!=null?f:!1)})}return(d,p)=>n.value?(r.openBlock(),r.createBlock(r.TransitionGroup,{key:0,name:r.unref(i).transition,css:!!r.unref(i).transition,tag:"g",class:"v-ng-layer-node-labels v-ng-graph-objects"},{default:r.withCtx(()=>[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(l.value,f=>(r.openBlock(),r.createBlock(dr,{id:f.id,key:f.id,state:f,pos:r.unref(s).nodes[f.id]},{"override-node-label":r.withCtx(a=>[r.renderSlot(d.$slots,"override-node-label",r.mergeProps({ref_for:!0},a))]),_:2},1032,["id","state","pos"]))),128))]),_:3},8,["name","css"])):(r.openBlock(),r.createBlock(r.TransitionGroup,{key:1,name:r.unref(i).transition,css:!!r.unref(i).transition,tag:"g",class:"v-ng-layer-node-labels v-ng-graph-objects"},{default:r.withCtx(()=>[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(l.value,f=>(r.openBlock(),r.createBlock(dr,{id:f.id,key:f.id,state:f,pos:r.unref(s).nodes[f.id]},null,8,["id","state","pos"]))),128))]),_:1},8,["name","css"]))}}),id=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap","stroke-linejoin"],sd=r.defineComponent({__name:"VPath",props:{path:{}},setup(t){const e=t,{nodeStates:n,edgeStates:o,layouts:i}=oe(),{scale:s}=J(),l=yo();function u(c){if(c.edges.length===0)return[];const h=O.value(l.margin,c.path)*s.value;return Hl(c,n,i.nodes,o,s.value,l.curveInNode,l.end,h)}function d(c){const h=u(c);let y=!0;return h.map(k=>{if(k===null)y=!0;else{if(typeof k=="string")return k;if(k instanceof Array){k=[...k];const v=[];if(k.length%2===1){const m=k[0];k=k.slice(1),v.push(`L ${m.x} ${m.y}`)}return zt(k,2).map(([m,E])=>v.push(`Q ${m.x} ${m.y} ${E.x} ${E.y}`)),v.join(" ")}else{const v=y;return y=!1,`${v?"M ":"L "}${k.x} ${k.y}`}}}).join(" ")}const p=r.computed(()=>{const c=e.path;return c.selected?O.values(l.selected,c.path):c.hovered&&l.hover?O.values(l.hover,c.path):O.values(l.normal,c.path)}),f=r.computed(()=>Fe(p.value.dasharray,s.value)),a=r.computed(()=>{const c=p.value.animate?ut(p.value.dasharray)*p.value.animationSpeed*s.value:!1;return c?{"--animation-speed":c}:void 0});return(c,h)=>(r.openBlock(),r.createElementBlock("path",{class:r.normalizeClass({"v-ng-path":!0,animate:p.value.animate,clickable:c.path.clickable,hoverable:c.path.hoverable}),d:d(c.path),fill:"none",stroke:p.value.color,"stroke-width":p.value.width*r.unref(s),"stroke-dasharray":f.value,"stroke-linecap":p.value.linecap,"stroke-linejoin":p.value.linejoin,style:r.normalizeStyle(a.value)},null,14,id))}}),ad=r.defineComponent({__name:"VPaths",setup(t){const{pathZOrderedList:e}=oe(),n=yo(),{handlePathPointerDownEvent:o,handlePathPointerOverEvent:i,handlePathPointerOutEvent:s,handlePathClickEvent:l,handlePathDoubleClickEvent:u,handlePathContextMenu:d}=qe();return(p,f)=>(r.openBlock(),r.createBlock(r.TransitionGroup,{name:r.unref(n).transition,css:!!r.unref(n).transition,tag:"g",class:"v-ng-paths v-ng-layer-paths v-ng-graph-objects"},{default:r.withCtx(()=>[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(r.unref(e),a=>(r.openBlock(),r.createBlock(sd,{key:a.id,path:a,onPointerdown:c=>r.unref(o)(a.id,c),onPointerenterPassive:c=>r.unref(i)(a.id,c),onPointerleavePassive:c=>r.unref(s)(a.id,c),onClick:r.withModifiers(c=>r.unref(l)(a.id,c),["stop"]),onDblclick:r.withModifiers(c=>r.unref(u)(a.id,c),["stop"]),onContextmenu:c=>r.unref(d)(a.id,c)},null,8,["path","onPointerdown","onPointerenterPassive","onPointerleavePassive","onClick","onDblclick","onContextmenu"]))),128))]),_:1},8,["name","css"]))}}),ld=r.defineComponent({__name:"VPathsLayer",setup(t){return(e,n)=>(r.openBlock(),r.createBlock(ad))}}),cd={key:0},fr=r.defineComponent({__name:"VNetworkGraph",props:{nodes:{default:()=>({})},edges:{default:()=>({})},paths:{default:()=>({})},layouts:{default:()=>({})},zoomLevel:{default:1},selectedNodes:{default:()=>[]},selectedEdges:{default:()=>[]},selectedPaths:{default:()=>[]},configs:{default:()=>({})},layers:{default:()=>({})},eventHandlers:{default:()=>({})}},emits:["update:zoomLevel","update:selectedNodes","update:selectedEdges","update:selectedPaths","update:layouts"],setup(t,{expose:e,emit:n}){const o=["override-node","override-node-label","edge-overlay","edge-label","edges-label"],i=t,s=n,l=r.useSlots(),u=r.toRef(i,"nodes"),d=r.toRef(i,"edges"),{objects:p,isInCompatibilityModeForPath:f}=Vc(r.toRef(i,"paths")),a=Mc();Object.entries(i.eventHandlers).forEach(([x,$])=>{a.on(x,$)});const c=Sl(r.toRef(i,"configs")),h=r.computed(()=>{const x=new Set(Object.keys(l));o.forEach(z=>x.delete(z));const $=Object.fromEntries(G.map(z=>[z,[]]));return Object.assign($,Object.entries(i.layers).reduce((z,[D,U])=>(x.delete(D),U in z?z[U].push(D):z[U]=[D],z),{})),$.root.push(...x),$}),y=r.computed(()=>c.view.grid.visible),k=r.computed(()=>{const x=h.value;return y.value||x.background.length>0||x.grid.length>0}),v=Xc(c,l),m=r.ref(),E=r.ref(),S=r.ref(),b=r.ref(0),g=r.computed(()=>b.value!==0),w=Hc(i,"zoomLevel",s,x=>(x=Math.max(x,c.view.minZoomLevel),x=Math.min(x,c.view.maxZoomLevel),x)),{svgPanZoom:P,onSvgPanZoomMounted:M,onSvgPanZoomUnmounted:_}=jc(E,{viewportSelector:".v-ng-viewport",minZoom:c.view.minZoomLevel,maxZoom:c.view.maxZoomLevel,dblClickZoomEnabled:yr(c.view),mouseWheelZoomEnabled:vn(c.view),fit:c.view.autoPanAndZoomOnLoad==="fit-content",center:c.view.autoPanAndZoomOnLoad!==!1,zoomEnabled:c.view.zoomEnabled,preventMouseEventsDefault:!1,onZoom:x=>{var z,D;if(b.value===2)return;const $=(D=(z=P.value)==null?void 0:z.getRealZoom())!=null?D:1;Math.abs(w.value-$)>=1e-6&&(w.value=$,a.emit("view:zoom",$))},panEnabled:c.view.panEnabled,onPan:x=>{b.value!==2&&a.emit("view:pan",x)}});St({container:m,svg:E,viewport:S,svgPanZoom:P});const C={width:0,height:0},T=globalThis.ResizeObserver?new ResizeObserver(()=>{var $,z,D;if(($=P.value)==null||$.resize(),!c.view.autoPanOnResize)return;const x=(z=m.value)==null?void 0:z.getBoundingClientRect();if(x){const U=-(C.width-x.width)/2,Oe=-(C.height-x.height)/2;(D=P.value)==null||D.panBy({x:U,y:Oe});const{width:fe,height:bn}=x;(C.width!==fe||C.height!==bn)&&(Object.assign(C,{width:fe,height:bn}),a.emit("view:resize",{x:x.x,y:x.y,width:fe,height:bn}))}}):void 0;M(()=>{var U,Oe,fe;const x=Z(m.value,"svg-pan-zoom container");T==null||T.observe(x),(Oe=(U=c.view).onSvgPanZoomInitialized)==null||Oe.call(U,Z(P.value,"svg-pan-zoom instance"));const $=x.getBoundingClientRect(),{width:z,height:D}=$;Object.assign(C,{width:z,height:D}),(fe=S.value)==null||fe.addEventListener("touchstart",wr,{passive:!1})}),_(()=>{var x;T==null||T.disconnect(),(x=S.value)==null||x.removeEventListener("touchstart",wr)});const B=x=>{var $;($=P.value)==null||$.applyAbsoluteZoomLevel(x,c.view.minZoomLevel,c.view.maxZoomLevel)};r.watch(()=>c.view.panEnabled,x=>{var $;($=P.value)==null||$.setPanEnabled(x)}),r.watch(()=>[c.view.zoomEnabled,yr(c.view),vn(c.view)],()=>{const x=P.value;x&&Nd(x,c.view.zoomEnabled,c.view.doubleClickZoomEnabled,c.view.mouseWheelZoomEnabled)}),r.watch(w,x=>B(x)),r.watch(()=>[c.view.minZoomLevel,c.view.maxZoomLevel],x=>{B(w.value)});const{scale:L}=Dc(w,c.view);M(()=>{const x=i.zoomLevel;B(x)});const V=()=>re(this,null,function*(){var x;Object.keys(i.nodes).length>0&&((x=P.value)==null||x.updateBBox(),yield nr())}),N=x=>re(this,null,function*(){var Oe,fe;const $=!x||x.margin===void 0?c.view.fitContentMargin:x.margin;yield V();const z=Z(E.value).getBoundingClientRect(),D=nu($,z),U=ou(Z(S.value),z,de.nodes,w.value,D,c.view.scalingObjects);U?(B(U.zoom),(Oe=P.value)==null||Oe.pan(U.pos)):(fe=P.value)==null||fe.center(),a.emit("view:fit",void 0)}),R=()=>re(this,null,function*(){var x;yield V(),(x=P.value)==null||x.center()}),ne=()=>{var x,$;return($=(x=P.value)==null?void 0:x.getViewBox())!=null?$:{top:0,bottom:0,left:0,right:0}},K=x=>{var $;return($=P.value)==null?void 0:$.setViewBox(x)},le=hn(i,"selectedNodes",u,s);r.watch(le,x=>a.emit("node:select",Array.from(x)));const Ce=hn(i,"selectedEdges",d,s);r.watch(Ce,x=>a.emit("edge:select",Array.from(x)));const Te=hn(i,"selectedPaths",p,s);r.watch(Te,x=>a.emit("path:select",Array.from(x))),Fc(le,Ce,Te);const Q=ie(new Set),Ae=ie(new Set),Le=ie(new Set),de=ie({nodes:{}});Uc(de),r.watch(()=>i.layouts,()=>{var x;return Object.assign(de.nodes,(x=i.layouts.nodes)!=null?x:{})},{deep:!0,immediate:!0}),r.watch(de,()=>s("update:layouts",de),{deep:!0});const gn=Xl(),mn=r.ref(!1);a.on("node:dragstart",x=>mn.value=!0),a.on("node:dragend",x=>mn.value=!1),a.on("view:mode",x=>{var $,z,D,U;c.view.panEnabled&&(x==="default"?($=P.value)==null||$.enablePan():(z=P.value)==null||z.disablePan()),c.view.zoomEnabled&&(x==="default"?(D=P.value)==null||D.enableZoom():(U=P.value)==null||U.disableZoom())});const vd=r.computed(()=>c.view.panEnabled||c.view.zoomEnabled||c.node.draggable),{nodeStates:bd,edgeStates:yd,pathStates:wd}=ec(tn(u,le,Q),tn(d,Ce,Ae),tn(p,Te,Le),r.readonly(c),de,i.layouts,gn,L),Ed=r.computed(()=>vn(c.view)),{isBoxSelectionMode:kd,selectionBox:gr,startBoxSelection:Sd,stopBoxSelection:Pd}=Pc(E,r.readonly(de),r.readonly(w),bd,yd,wd,le,Ce,Te,Q,Ae,Le,f,Ed,c,a),mr=()=>({layouts:ie(de.nodes),nodePositions:r.toRef(de,"nodes"),nodes:u,edges:d,configs:r.readonly(c),scale:r.readonly(L),emitter:a,svgPanZoom:Z(P.value)});r.watch(()=>c.view.layoutHandler,(x,$)=>{$.deactivate(),x.activate(mr())});const{transitionWhile:xd,transitionOption:vr}=Rc(),Md=r.computed(()=>{const x=vr.value;return x.enabled?{"--transition-duration":x.duration+"ms","--transition-function":x.timingFunction}:{}});M(()=>re(this,null,function*(){if(c.view.onBeforeInitialDisplay){const z=c.view.onBeforeInitialDisplay();Cl(z)&&(yield z)}const x=Z(P.value,"svg-pan-zoom");c.view.layoutHandler.activate(mr()),yield nr();const $=c.view.autoPanAndZoomOnLoad;if(c.view.fit||$!==!1){const z=Object.keys(i.nodes).length==0,D=x.getPan();if(z||$==="center-zero"){yield V();const U=x.getSizes();x.pan({x:U.width/2,y:U.height/2})}else $==="fit-content"||c.view.fit?yield N():$==="center-content"?yield R():yield V();r.nextTick(()=>{const U=x.getPan();D.x===U.x&&D.y===U.y&&a.emit("view:pan",U)})}else yield V();a.emit("view:load"),b.value=1})),_(()=>{b.value=2,a.emit("view:unload"),c.view.layoutHandler.deactivate()});function Cd(){var x;(x=P.value)==null||x.zoomIn()}function Td(){var x;(x=P.value)==null||x.zoomOut()}function Od(x){var $;($=P.value)==null||$.pan(x)}function _d(x){var $;($=P.value)==null||$.panBy(x)}function Bd(){return Z(P.value).getPan()}function zd(){const x=Z(P.value).getSizes();return{width:x.width,height:x.height,viewBox:x.viewBox}}function Id(x){return sn(Z(E.value,"svg"),Z(S.value,"viewport"),x)}function $d(x){return vc(Z(E.value,"svg"),Z(S.value,"viewport"),x)}function Ad(){return Ho(Z(E.value,"svg"),Z(S.value,"viewport"),L.value).outerHTML}function Ld(){return re(this,arguments,function*(x={}){return(yield br(x)).outerHTML})}function br(){return re(this,arguments,function*(x={}){return yc(Z(E.value,"svg"),Z(S.value,"viewport"),L.value,x)})}e({fitToContents:N,panToCenter:R,getViewBox:ne,setViewBox:K,transitionWhile:xd,startBoxSelection:Sd,stopBoxSelection:Pd,zoomIn:Cd,zoomOut:Td,panTo:Od,panBy:_d,getPan:Bd,getSizes:zd,translateFromDomToSvgCoordinates:Id,translateFromSvgToDomCoordinates:$d,getAsSvg:Ad,exportAsSvgText:Ld,exportAsSvgElement:br});function Nd(x,$,z,D){x.setZoomEnabled($),$&&z?x.enableDblClickZoom():x.disableDblClickZoom(),$&&D?x.enableMouseWheelZoom():x.disableMouseWheelZoom()}function yr(x){return x.zoomEnabled&&x.doubleClickZoomEnabled}function vn(x){return x.zoomEnabled&&x.mouseWheelZoomEnabled}function wr(x){x.stopPropagation()}return(x,$)=>(r.openBlock(),r.createElementBlock("div",{ref_key:"container",ref:m,class:"v-network-graph v-ng-container"},[(r.openBlock(),r.createElementBlock("svg",{ref_key:"svg",ref:E,class:r.normalizeClass(["v-ng-canvas",{show:g.value,dragging:mn.value,touches:vd.value,"box-selection-mode":r.unref(kd)}]),width:"100%",height:"100%"},[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(h.value.root,z=>r.renderSlot(x.$slots,z,{key:z,scale:r.unref(L)})),128)),Object.keys(r.unref(gn).markers).length>0?(r.openBlock(),r.createElementBlock("defs",cd,[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(r.unref(gn).markers,(z,D)=>(r.openBlock(),r.createBlock(mu,{id:D,key:D,marker:z,scale:r.unref(L)},null,8,["id","marker","scale"]))),128))])):r.createCommentVNode("",!0),k.value?(r.openBlock(),r.createBlock(Su,{key:1},{default:r.withCtx(()=>[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(h.value.background,z=>(r.openBlock(),r.createElementBlock("g",{key:z,class:"v-ng-layer"},[r.renderSlot(x.$slots,z,{scale:r.unref(L)})]))),128)),y.value?(r.openBlock(),r.createBlock(ku,{key:0})):r.createCommentVNode("",!0),(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(h.value.grid,z=>(r.openBlock(),r.createElementBlock("g",{key:z,class:"v-ng-layer"},[r.renderSlot(x.$slots,z,{scale:r.unref(L)})]))),128))]),_:3})):r.createCommentVNode("",!0),r.createElementVNode("g",{ref_key:"viewport",ref:S,class:r.normalizeClass(["v-ng-viewport",{"v-ng-transition":r.unref(vr).enabled}]),style:r.normalizeStyle(Md.value)},[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(h.value.base,z=>(r.openBlock(),r.createElementBlock("g",{key:z,class:"v-ng-layer"},[r.renderSlot(x.$slots,z,{scale:r.unref(L)})]))),128)),(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(r.unref(v),z=>(r.openBlock(),r.createElementBlock(r.Fragment,{key:z},[z==="edges"?(r.openBlock(),r.createBlock(Vu,{key:0},r.createSlots({_:2},["edge-overlay"in l?{name:"edge-overlay",fn:r.withCtx(D=>[r.renderSlot(x.$slots,"edge-overlay",r.mergeProps({ref_for:!0},D))]),key:"0"}:void 0]),1024)):z==="edge-labels"?(r.openBlock(),r.createBlock(Gu,{key:1,"enable-edge-label":"edge-label"in l,"enable-edges-label":"edges-label"in l},{"edge-label":r.withCtx(D=>[r.renderSlot(x.$slots,"edge-label",r.mergeProps({ref_for:!0},D))]),"edges-label":r.withCtx(D=>[r.renderSlot(x.$slots,"edges-label",r.mergeProps({ref_for:!0},D))]),_:3},8,["enable-edge-label","enable-edges-label"])):z==="focusring"?(r.openBlock(),r.createBlock(Ku,{key:2})):z==="nodes"?(r.openBlock(),r.createBlock(Qu,{key:3},{"override-node":r.withCtx(D=>[r.renderSlot(x.$slots,"override-node",r.mergeProps({ref_for:!0},D))]),_:3})):z==="node-labels"?(r.openBlock(),r.createBlock(rd,{key:4},{"override-node-label":r.withCtx(D=>[r.renderSlot(x.$slots,"override-node-label",r.mergeProps({ref_for:!0},D))]),_:3})):z==="paths"?(r.openBlock(),r.createBlock(ld,{key:5})):r.createCommentVNode("",!0),(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(h.value[z],D=>(r.openBlock(),r.createElementBlock("g",{key:D,class:"v-ng-layer"},[r.renderSlot(x.$slots,D,{scale:r.unref(L)})]))),128))],64))),128))],6),r.unref(gr)?(r.openBlock(),r.createBlock(lu,{key:2,box:r.unref(gr),config:r.unref(c).view.selection.box},null,8,["box","config"])):r.createCommentVNode("",!0)],2))],512))}}),ud=(t,e)=>{const n=t.__vccOpts||t;for(const[o,i]of e)n[o]=i;return n},dd={};function fd(t,e){return r.openBlock(),r.createElementBlock("defs",null,[(r.openBlock(),r.createBlock(r.resolveDynamicComponent("style"),null,{default:r.withCtx(()=>[r.renderSlot(t.$slots,"default")]),_:3}))])}const hr=ud(dd,[["render",fd]]),pr=r.defineComponent({__name:"VEdgeLabel",props:{area:{},config:{},text:{default:""},align:{default:"center"},verticalAlign:{default:"center"},edge:{default:void 0},hovered:{type:Boolean,default:void 0},selected:{type:Boolean,default:void 0},scale:{default:void 0}},setup(t){const e=t,n=r.ref(0),o=r.ref(0),i=r.ref("middle"),s=r.ref("central"),l=r.ref(0);r.watchEffect(()=>{const d=e.area.source,p=e.area.target;e.align==="source"?(d.above.x==p.above.x?i.value=d.above.y>p.above.y?"start":"end":i.value=d.above.x<p.above.x?"start":"end",e.verticalAlign==="above"?(n.value=d.above.x,o.value=d.above.y,s.value="text-top"):e.verticalAlign==="below"?(n.value=d.below.x,o.value=d.below.y,s.value="hanging"):(n.value=(d.above.x+d.below.x)/2,o.value=(d.above.y+d.below.y)/2,s.value="central")):e.align==="target"?(d.above.x==p.above.x?i.value=d.above.y<p.above.y?"start":"end":i.value=d.above.x>p.above.x?"start":"end",e.verticalAlign==="above"?(n.value=p.above.x,o.value=p.above.y,s.value="text-top"):e.verticalAlign==="below"?(n.value=p.below.x,o.value=p.below.y,s.value="hanging"):(n.value=(p.above.x+p.below.x)/2,o.value=(p.above.y+p.below.y)/2,s.value="central")):(i.value="middle",e.verticalAlign==="above"?(n.value=(d.above.x+p.above.x)/2,o.value=(d.above.y+p.above.y)/2,s.value="text-top"):e.verticalAlign==="below"?(n.value=(d.below.x+p.below.x)/2,o.value=(d.below.y+p.below.y)/2,s.value="hanging"):(n.value=(d.above.x+p.below.x)/2,o.value=(d.above.y+p.below.y)/2,s.value="central"));let f=F.fromPositions(d.above,p.above).v.angleDegree();(f<-90||f>=90)&&(f=f+180,f>180&&(f-=360)),l.value=f});const u=r.computed(()=>s.value==="central"&&!e.config.background?Je(q({},e.config),{background:{visible:!0,color:"#ffffff",padding:{vertical:1,horizontal:4},borderRadius:2}}):e.config);return(d,p)=>(r.openBlock(),r.createBlock(Qe,{class:"v-ng-edge-label",text:d.text,x:n.value,y:o.value,config:u.value,"text-anchor":i.value,"dominant-baseline":s.value,transform:`rotate(${l.value} ${n.value} ${o.value})`},null,8,["text","x","y","config","text-anchor","dominant-baseline","transform"]))}}),hd=Object.freeze(Object.defineProperty({__proto__:null,VEdgeLabel:pr,VLabelText:Qe,VNetworkGraph:fr,VShape:Ye,VStyle:hr},Symbol.toStringTag,{value:"Module"})),pd=10;class gd extends Rt{constructor(e={}){super(),this.options=e}setNodePosition(e,n){const o=this.options.grid||pd;e.value.x=Math.floor(n.x/o)*o,e.value.y=Math.floor(n.y/o)*o}}const md=function(t){Object.entries(hd).forEach(([e,n])=>{t.component(e,n)})};A.Config=O,A.GridLayout=gd,A.LayerPositions=G,A.NodeLabelDirection=I,A.SimpleLayout=Rt,A.VEdgeLabel=pr,A.VLabelText=Qe,A.VNetworkGraph=fr,A.VShape=Ye,A.VStyle=hr,A.Vector2D=j,A.configsWithType=bl,A.defineConfigs=yl,A.getFullConfigs=El,A.install=md,A.useStates=oe,A.withSelf=ct,Object.defineProperty(A,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=index.js.map
